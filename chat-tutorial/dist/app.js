(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _chat = require('@livelyvideo/chat');

var _chat2 = _interopRequireDefault(_chat);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
Set up the chat instance

Params:
	- html element
	- options
			user: users username, should be unique to the user
			room: room name
			apiHost: lively chat api
			websocketHost: lively ws api
			url: the company's auth url, which should access livelyvideo to create an access token for the user
**/
var chat = void 0;
function createChat(user, el) {
	if (chat) {
		chat.destroy();
	}
	chat = new _chat2.default(el, {
		user: user,
		room: 'blt',
		apiHost: 'https://dev.livelyvideo.tv',
		websocketHost: 'ws://ws-dev.livelyvideo.tv',
		authUrl: '/access-token'
	});
}

// <<<<<<< HEAD
// 		room: 'blt',
// 		apiHost: 'https://qa.livelyvideo.tv',
// 		websocketHost: 'wss://ws-qa.livelyvideo.tv',
// 		authUrl: 'https://qa.livelyvideo.tv/auth/v1/lively'
// =======

document.querySelector('#pickuser').onsubmit = function (e) {
	e.preventDefault();
	createChat(e.target.querySelector('[name=username]').value, document.querySelector('.chat'));
	e.target.setAttribute('disabled', true);
	e.target.querySelector('[name=username]').value = '';
};

},{"@livelyvideo/chat":2}],2:[function(require,module,exports){
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.LivelyChat=e():t.LivelyChat=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(5),l=r(u);n(13);var h=n(7),c=r(h),d=n(8),f=r(d),m=n(10),p=r(m),_=n(11),v=r(_),y=n(9),g=r(y),b=n(12),w=r(b),k=n(6),E=r(k),x=n(1);r(x);n(14);var S={INVALID_EL:"invalid-element"},O={user:null,room:null,apiHost:null,websocketHost:null,authUrl:null},T=function(){function t(e,n){var r=this;i(this,t),this.options=o({},O,n);var s=this.options.user?{url:this.options.authUrl+"?username="+this.options.user}:null;this.chat=new l["default"]({room:this.options.room,apiHost:this.options.apiHost,websocketHost:this.options.websocketHost},s),this.chat._username=this.options.user,this.chat._roomname=this.options.room,this.chat.on("error",function(t){console.error(t)}),this.chat.once("me",function(t){if(t.showTimestamps?r.el.classList.add("chat--timestamps"):r.el.classList.remove("chat--timestamps"),r.roleHandler(t),t&&r.renderAuthedUser(t),r.history)for(var e=0;e<r.history.messages.length;e++)r.chatBody.renderChat(r.history.messages[e])}),this.history=null,this.chat.once("history",function(t){r.history=t}),this.mount(e),this.render()}return a(t,[{key:"mount",value:function(t){switch("undefined"==typeof t?"undefined":s(t)){case"string":this.el=document.querySelector(t);break;case"object":this.el=t;break;default:console.log(S.INVALID_EL)}this.el.classList.add("chat")}},{key:"render",value:function(){var t=this;this.chatBody=new c["default"](this.el,this.chat),this.chatHeader=new g["default"](this.el,this.chat,this.options),this.chatOptions=new v["default"](this.chatHeader.el,this.chat),this.chatRoster=new w["default"](this.chatHeader.el,this.chat,this.chatBody),this.chatAdmin=new E["default"](this.chatHeader.el,this.chat,this.chatBody),this.chatInput=new p["default"](this.el,this.chat,this.chatBody),this.chatEmoticons=new f["default"](this.el,this.chat,this.chatInput),this.chat.on("chat",function(e){t.chatBody.renderChat(e)}),this.chat.once("room",function(){t.chatAdmin.init()}),this.chat.on("message",function(e){t.chatBody.renderMessage(e)}),this.chat.on("delete",function(e){t.chat.emit("delete "+e.id)})}},{key:"renderAuthedUser",value:function(t){var e=this;this.chatOptions.initUser(),this.chatEmoticons.initUser(),this.chatInput.initUser(),this._currentRole=t.room.role,this.chat.on("me",function(t){t.showTimestamps?e.el.classList.add("chat--timestamps"):e.el.classList.remove("chat--timestamps"),e.roleHandler(t)})}},{key:"roleHandler",value:function(t){if(this._currentRole&&this._currentRole!==t.room.role){var e={};switch(e.level="info",this._currentRole){case"user":e.message="you have been modded";break;case"moderator":e.message="you have been unmodded"}this.chatBody.renderMessage(e)}this.el.classList.add("chat--"+t.room.role),this._currentRole!==t.room.role&&this.el.classList.remove("chat--"+this._currentRole),this._currentRole=t.room.role}},{key:"destroy",value:function(){for(this.chat.destroy(),this.el.className="chat";this.el.firstChild;)this.el.removeChild(this.el.firstChild)}}]),t}();e["default"]=T},function(t,e){"use strict";function n(t){var e=void 0,r=void 0,i=void 0;if(t.tagName){if(e=document.createElement(t.tagName),t.className&&(e.className=t.className),t.attributes)for(r in t.attributes)e.setAttribute(r,t.attributes[r]);void 0!==t.html&&(e.innerHTML=t.html)}else e=document.createDocumentFragment();if(t.text&&e.appendChild(document.createTextNode(t.text)),void 0===window.HTMLElement&&(window.HTMLElement=Element),t.childs&&t.childs.length)for(i=0;i<t.childs.length;i++)e.appendChild(t.childs[i]instanceof window.HTMLElement?t.childs[i]:n(t.childs[i]));if(t.events)for(var s in t.events)e.addEventListener(s,t.events[s]);return e}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";function n(t,e,n){if(t.addEventListener){t.addEventListener(e,n);var r=function(){t.removeEventListener(e,n)};return r}t.attachEvent("on"+e,function(){n.call(t)});var i=function(){t.detachEvent("on"+e,function(){n.call(t)})};return i}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";function n(t,e,n){for(var r=t.target;r&&r!==document.body;){if(r===e||r===n)return!1;r=r.parentNode}return!0}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";function n(t,e,n){var r=void 0;return function(){var i=this,s=arguments,o=function(){r=null,n||t.apply(i,s)},a=n&&!r;clearTimeout(r),r=setTimeout(o,e||200),a&&t.apply(i,s)}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(module,exports,__webpack_require__){!function(t,e){module.exports=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=n(2),h=r(l),c=n(3),d=r(c),f=n(43),m=r(f),p=n(46),_=r(p),v=n(47),y=r(v),g=n(48),b=r(g),w=n(49),k=r(w),E=n(50),x=r(E),S=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(!t)throw new Error("chat configuration is required");if(!t.room)throw new Error("chat room is required");if(!t.apiHost)throw new Error("chat REST API server host is required");if(0!==t.apiHost.indexOf("https://")&&0!==t.apiHost.indexOf("http://")&&0!==t.apiHost.indexOf("//"))throw new Error("chat REST API server host must start with ws://, wss:// or //");if(!t.websocketHost)throw new Error("chat websocket server host is required");var o=null;if(0===t.websocketHost.indexOf("wss://"))o=!0;else if(0===t.websocketHost.indexOf("ws://"))o=!1;else if(0!==t.websocketHost.indexOf("//"))throw new Error("chat websocket server host must start with ws://, wss:// or //");var a=t.apiHost+"/chat/v1/rooms/"+t.room+"/command",u=t.apiHost+"/chat/v1/manifests/say/rooms/"+t.room+"/version",l=t.websocketHost+"/chat/ws/v1/rooms/"+t.room,c="/chat/http/v1/rooms/"+t.room;if(r._rosterUrl=t.apiHost+"/chat/v1/rooms/"+t.room+"/roster",r._changeroleUrl=t.apiHost+"/chat/v1/rooms/"+t.room+"/changeroles",r._routeStart=t.apiHost+"/chat/v1",n){if(!n.url)throw new Error("authorization configuration url is required");r._auth=new h["default"]("chat",n.url,n.options)}var f=new y["default"](u);if(r._parser=f,r._auth&&(r._http=new x["default"](r._auth),r._command=new _["default"](r._auth,a)),window.WebSocket)r._socketInterface=new d["default"](l,r._auth);else{var p="";p=o===!0?"https://"+t.websocketHost.slice(6)+c:o===!1?"http://"+t.websocketHost.slice(5)+c:""+t.websocketHost+c,r._socketInterface=new m["default"](p,r._auth)}return r._socketInterface.on("error",function(t){r.emit("error",t)}),r._socketInterface.on("ready",function(){r.emit("ready")}),r._historyEmitted=!1,r._socketInterface.on("unauthorized",function(){if(r._historyEmitted)return void r.emit("me",null);var t=function(){r.emit("me",null)},e=window.setTimeout(function(){t(),t=null},3e3);r.once("history",function(){t&&t(),window.clearTimeout(e)})}),r._socketInterface.on("disconnect",function(){r._historyEmitted=!1,r.emit("disconnect")}),r._socketInterface.on("message",function(t){f.parseMessage(t,r._emitCommand.bind(r))}),r._sayDedupe=[],r._me=null,r._room=null,r}return o(e,t),a(e,[{key:"getDefaultAvatars",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this._httpCheckAuth(),this._http.execGet(this._routeStart+"/avatars",t)}},{key:"setDefaultUserAvatar",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execPatch(this._routeStart+"/users/"+t+"/avatar",{"default":e},n)}},{key:"getUserEmoticons",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._httpCheckAuth(),this._http.execGet(this._routeStart+"/users/"+t+"/emoticons",e)}},{key:"getAllEmoticons",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execGet(this._routeStart+"/rooms/"+t+"/users/"+e+"/emoticons/all",n)}},{key:"postUserEmoticon",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execPost(this._routeStart+"/users/"+t+"/emoticons",e,n)}},{key:"deleteUserEmoticon",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execDelete(this._routeStart+"/users/"+t+"/emoticons/"+e,n)}},{key:"getUserAvatar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._httpCheckAuth(),this._http.execGet(this._routeStart+"/users/"+t+"/avatar",e)}},{key:"putUserAvatar",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execPut(this._routeStart+"/users/"+t+"/avatar",e,n)}},{key:"getUser",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._httpCheckAuth(),this._http.execGet(this._routeStart+"/users/"+t,e)}},{key:"patchUser",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execPatch(this._routeStart+"/users/"+t,e,n)}},{key:"getRoomUser",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execGet(this._routeStart+"/rooms/"+t+"/users/"+e,n)}},{key:"patchRoomUser",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};this._httpCheckAuth(),this._http.execPatch(this._routeStart+"/rooms/"+t+"/users/"+e,n,r)}},{key:"getRoom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._httpCheckAuth(),this._http.execGet(this._routeStart+"/rooms/"+t,e)}},{key:"patchRoom",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execPatch(this._routeStart+"/rooms/"+t,e,n)}},{key:"getChangeroles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._auth)throw new Error("Changeroles calls require authentication");var e=Object.assign({},{limit:100,role:""},t);return new k["default"](this._auth,this._changeroleUrl,e)}},{key:"getRoster",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._auth)throw new Error("Roster calls require authentication");var e=Object.assign({},{limit:100,role:""},t);return new b["default"](this._auth,this._rosterUrl,e)}},{key:"command",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!this._auth)throw new Error("Command calls require authentication");this._command.run(t,function(t,r){if(t)return void n(t);for(var i=r.length-1;i>=0;i--)r[i].data&&r[i].data&&r[i].data.command&&(e._parser.parseMessage(r[i].data.command,e._emitCommand.bind(e)),r.splice(0,1));n(null,r)})}},{key:"destroy",value:function(){this._auth.destroy(),this._socketInterface.destroy()}},{key:"_emitCommand",value:function(t,e,n){if(t)return void this.emit("error",t);switch(e){case"SAY":this._emitSay(n);break;case"ME":this._me=n,this.emit("me",n);break;case"ROOM":this._room=n,this.emit("room",n);break;case"MESSAGE":this.emit("message",n);break;case"HISTORY":this.emit("history",n),this._historyEmitted=!0;break;case"DELETE":this.emit("delete",n)}}},{key:"_emitSay",value:function(t){for(var e=this._sayDedupe.length-1;e>=0;e--)if(this._sayDedupe[e]===t.id)return;this._me&&this._me.ignore&&this._me.ignore.indexOf(t.actor.id)!==-1&&(t.ignore=!0),this._sayDedupe.length>50&&this._sayDedupe.splice(0,1),this._sayDedupe.push(t.id),this.emit("chat",t)}},{key:"_httpCheckAuth",value:function(){if(!this._auth)throw new Error("Http calls require authentication")}}]),e}(u.EventEmitter);e["default"]=S},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,a,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(n=this._events[t],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(s(n))for(a=Array.prototype.slice.call(arguments,1),l=n.slice(),i=l.length,u=0;u<i;u++)l[u].apply(this,a);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned&&(i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,o,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(a=o;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){i=a;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(module,exports,__webpack_require__){!function(t,e){module.exports=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _events = __webpack_require__(1);\n\n__webpack_require__(2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar defaultOptions = {\n\ttimeout: 5000,\n\theaders: {}\n};\n\nvar defaultHeaders = {\n\tAccept: 'application/json'\n};\n\n/**\n * @class Lively Video authorization client\n */\n\nvar Authorization = function (_EventEmitter) {\n\t_inherits(Authorization, _EventEmitter);\n\n\t/**\n  * @constructs Authorization\n  * @param {string} scope - Scope of the authorization\n  * @param {string} url - Url of your company's authorization endpoint. The expected response is {'token': 'unique token', 'expire': 'RFC3339 expiration time'}\n  * @param {Config} [options] - Configurable options for the Authorization class\n  * @param {string} [options.timeout=5000] - Authenticated request timeout in milliseconds. Timed out errors will return an Error('authorization: timeout')\n  * @param {Object} [options.headers] - Additional headers to use for the request\n  * @throws Will throw an error if no scope or no url is provided\n  */\n\tfunction Authorization(scope, url) {\n\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\t\t_classCallCheck(this, Authorization);\n\n\t\tvar _this = _possibleConstructorReturn(this, (Authorization.__proto__ || Object.getPrototypeOf(Authorization)).call(this));\n\n\t\tif (!scope) {\n\t\t\tthrow new Error('scope is required');\n\t\t}\n\n\t\tif (!url) {\n\t\t\tthrow new Error('authorization server url is required');\n\t\t}\n\n\t\t// require parameters\n\t\t_this._options = Object.assign({}, defaultOptions, options);\n\n\t\tif (url.indexOf('?') === -1) {\n\t\t\t_this._url = url + '?scope=' + scope;\n\t\t} else {\n\t\t\t_this._url = url + '&scope=' + scope;\n\t\t}\n\n\t\t// internal\n\t\t_this._stopped = false;\n\t\t_this._fatalError = null;\n\t\t_this._token = null;\n\t\t_this._retries = [0, // immediate\n\t\t200, // 200ms\n\t\t1000, // 1s\n\t\t3000 // 3s\n\t\t];\n\t\t_this._retry = 0;\n\t\t_this._autorefresh = null;\n\n\t\t_this._headers = Object.assign({}, defaultHeaders, options.headers);\n\t\t_this._retryRequest();\n\t\treturn _this;\n\t}\n\n\t_createClass(Authorization, [{\n\t\tkey: 'destroy',\n\t\tvalue: function destroy() {\n\t\t\tthis._stopped = true;\n\t\t}\n\n\t\t/**\n   * This callback will execute a request which requires the auth token.\n   * @callback cbRequest\n   * @param {Error} e - Returns a timeout error (Error('authorization: timeout')) or a fatal error\n   * @param {string} token - The authorization bearer token to use in Lively Video API requests\n   */\n\n\t\t/**\n   * Execute a request which requires an authorization token when the token is available\n   * @param {cbRequest} cb - The callback that executes the request.\n   */\n\n\t}, {\n\t\tkey: 'request',\n\t\tvalue: function request() {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar cb = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n\t\t\tif (this._fatalError) {\n\t\t\t\tcb(this._fatalError);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._token !== null) {\n\t\t\t\tcb(null, this._token);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar done = false;\n\t\t\tvar pass = function pass() {\n\t\t\t\tif (!done) {\n\t\t\t\t\tdone = true;\n\t\t\t\t\tcb(null, _this2._token);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar timeout = function timeout() {\n\t\t\t\tif (!done) {\n\t\t\t\t\tdone = true;\n\t\t\t\t\tcb(new Error('authorization: timeout'));\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar t = setTimeout(function () {\n\t\t\t\t_this2.removeListener('ready', pass);\n\t\t\t\ttimeout();\n\t\t\t}, this._options.timeout);\n\n\t\t\tthis.once('ready', function () {\n\t\t\t\tclearTimeout(t);\n\t\t\t\tpass();\n\t\t\t});\n\t\t}\n\n\t\t/**\n   * Should be called if a Lively Video endpoint returned an 401 error. A new request will be issued to the authorization server's endpoint to get a new token.\n   */\n\n\t}, {\n\t\tkey: 'refreshToken',\n\t\tvalue: function refreshToken() {\n\t\t\tvar _this3 = this;\n\n\t\t\tif (this._token !== null) {\n\t\t\t\tif (this._autorefresh !== null) {\n\t\t\t\t\tclearTimeout(this._autorefresh);\n\t\t\t\t\tthis._autorefresh = null;\n\t\t\t\t}\n\t\t\t\tthis._token = null;\n\t\t\t\t(function () {\n\t\t\t\t\t_this3._retryRequest();\n\t\t\t\t})();\n\t\t\t}\n\t\t}\n\n\t\t/**\n   * Make a request or retry after the current retry number's delay\n   * @ignore\n   */\n\n\t}, {\n\t\tkey: '_retryRequest',\n\t\tvalue: function _retryRequest() {\n\t\t\tvar _this4 = this;\n\n\t\t\tvar retry = this._retries[this._retry];\n\t\t\tif (retry) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t_this4._makeRequest();\n\t\t\t\t}, retry);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._makeRequest();\n\t\t}\n\n\t\t/**\n   * Make a request to the authorization server.\n   * @ignore\n   */\n\n\t}, {\n\t\tkey: '_makeRequest',\n\t\tvalue: function _makeRequest() {\n\t\t\tvar _this5 = this;\n\n\t\t\tfetch(this._url, {\n\t\t\t\tcredentials: 'same-origin',\n\t\t\t\theaders: this._headers\n\t\t\t}).then(function (response) {\n\t\t\t\tif (response.status >= 200 && response.status < 300) {\n\t\t\t\t\treturn response.json();\n\t\t\t\t}\n\t\t\t\tif (response.status === 401) {\n\t\t\t\t\tvar e = new Error('authorization: unauthorized');\n\t\t\t\t\te.fatal = true;\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t\tif (response.status === 403) {\n\t\t\t\t\tvar _e = new Error('authorization: forbidden');\n\t\t\t\t\t_e.fatal = true;\n\t\t\t\t\tthrow _e;\n\t\t\t\t}\n\t\t\t\tthrow new Error('authorization: non-200 response code from auth server');\n\t\t\t}).then(function (json) {\n\t\t\t\t_this5._token = json.token;\n\t\t\t\t_this5._retry = 0;\n\t\t\t\t_this5.emit('ready', {\n\t\t\t\t\ttoken: json.token\n\t\t\t\t});\n\n\t\t\t\t// re-request a minute before expiration\n\t\t\t\tvar retryAfter = new Date(json.expire).getTime() - Date.now() - 60 * 1000;\n\t\t\t\t_this5._autorefresh = setTimeout(function () {\n\t\t\t\t\t_this5._autorefresh = null;\n\t\t\t\t\tif (!_this5._stopped) {\n\t\t\t\t\t\t_this5._retryRequest();\n\t\t\t\t\t}\n\t\t\t\t}, retryAfter);\n\t\t\t}).catch(function (e) {\n\t\t\t\t_this5._token = null;\n\n\t\t\t\tif (e.fatal) {\n\t\t\t\t\t_this5._fatalError = e;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t_this5._retryRequest();\n\t\t\t\tif (_this5._retry < _this5._retries.length - 1) {\n\t\t\t\t\t_this5._retry++;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn Authorization;\n}(_events.EventEmitter);\n\nexports.default = Authorization;\nmodule.exports = exports['default'];\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.js\n// module id = 0\n// module chunks = 0\n//# sourceURL=webpack:///./src/index.js?")},function(module,exports){eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/events/events.js\n// module id = 1\n// module chunks = 0\n//# sourceURL=webpack:///./~/events/events.js?");
},function(module,exports){eval("(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = (xhr.getAllResponseHeaders() || '').trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/whatwg-fetch/fetch.js\n// module id = 2\n// module chunks = 0\n//# sourceURL=webpack:///./~/whatwg-fetch/fetch.js?")}])})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(4),l=r(u),h=n(1),c={MSG:"msg",FIN:"fin"},d={MSG:"msg",ERR:"err",FIN:"fin",ACK:"ack"},f={DEFAULT:"/",AUTH:"/auth"},m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(!t)throw new Error("url is required for chat");return r._auth=n,r._socket=new l["default"](t,"livelyWebsocket",{automaticOpen:!1,reconnectOnError:!0,reconnectOnCleanClose:!0,randomRatio:!1}),r._retries=[0,200,1e3,2e3],r._retry=0,r.ready=!1,r.authed=!1,r._socket.onopen=function(){r._auth&&r._authenticate()},r._socket.onclose=function(t){r.emit("disconnect"),r.ready=!1,r.authed=!1,1003===t.code&&(r._socket._options.reconnectOnCleanClose=!1,r._socket._options.reconnectOnError=!1,r._socket.close(),r.emit("error",new Error("Requested room does not exist")))},r._socket.onmessage=function(t){r._onmessage(t)},r._socket.open(),r}return o(e,t),a(e,[{key:"destroy",value:function(){this._socket._options.reconnectOnCleanClose=!1,this._socket._options.reconnectOnError=!1,this._socket.close()}},{key:"_authenticate",value:function(){var t=this;this._auth.request(function(e,n){return e?void t.emit("error",e):(t._send(t._socket,c.MSG,f.AUTH,n),void t.once("_authed",function(e){if(e)return void t.emit("unauthorized")}))})}},{key:"_send",value:function(t,e,n,r){if(t&&t.readyState===t.OPEN){var i=e+" "+n+" "+r;this._socket.send(i)}}},{key:"_onmessage",value:function(t){var e=t.data;if(e){var n=e.indexOf(" "),r=e.indexOf(" ",n+1),i=e.slice(0,n),s=e.slice(n+1,r),o=e.slice(r+1);if(i===d.MSG){var a=void 0;try{a=JSON.parse(o)}catch(u){return void this.emit("error",u)}return void this.emit("message",a)}return this.ready||i!==d.ACK||s!==f.DEFAULT||(this.emit("ready"),this.ready=!0,this._auth||this.emit("unauthorized")),this.authed||i!==d.FIN?i===d.ERR?void this.emit("error",new Error(o)):void 0:void(s===f.AUTH&&(this.emit("_authed"),this.authed=!0))}}}]),e}(h.EventEmitter);e["default"]=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){return Math.random()*(e-t)+t}Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),o=r(s),a=n(42),u=r(a),l={debug:!1,automaticOpen:!0,reconnectOnError:!1,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3,maxReconnectAttempts:null,randomRatio:3,binaryType:"blob",reconnectOnCleanClose:!1},h=function c(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];(0,u["default"])(this,c),this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.open=function(){var t=e._socket=new WebSocket(e._url,e._protocols);t.binaryType=e._options.binaryType,e._options.maxReconnectAttempts&&e._options.maxReconnectAttempts<e._reconnectAttempts||(e._syncState(),t.onmessage=e._onmessage.bind(e),t.onopen=e._onopen.bind(e),t.onclose=e._onclose.bind(e),t.onerror=e._onerror.bind(e))},this.send=function(t){e._socket&&e._socket.readyState===WebSocket.OPEN&&0===e._messageQueue.length?e._socket.send(t):e._messageQueue.push(t)},this.close=function(t,n){"undefined"==typeof t&&(t=1e3),e._socket&&e._socket.close(t,n)},this._onmessage=function(t){e.onmessage&&e.onmessage(t)},this._onopen=function(t){e._syncState(),e._flushQueue(),e._reconnectAttempts=0,e.onopen&&e.onopen(t)},this._onclose=function(t){e._syncState(),e._debug("WebSocket: connection is broken",t),e.onclose&&e.onclose(t),e._tryReconnect(t)},this._onerror=function(t){e._socket.close(),e._debug("WebSocket: error",t),e.onerror&&e.onerror(t),e._options.reconnectOnError&&e._tryReconnect(t)},this._tryReconnect=function(t){t.wasClean&&!e._options.reconnectOnCleanClose||setTimeout(function(){e.readyState!==e.CLOSING&&e.readyState!==e.CLOSED||(e._reconnectAttempts++,e.open())},e._getTimeout())},this._flushQueue=function(){for(;0!==e._messageQueue.length;){var t=e._messageQueue.shift();e._socket.send(t)}},this._getTimeout=function(){var t=e._options.reconnectInterval*Math.pow(e._options.reconnectDecay,e._reconnectAttempts);return t=t>e._options.maxReconnectInterval?e._options.maxReconnectInterval:t,e._options.randomRatio?i(t/e._options.randomRatio,t):t},this._syncState=function(){e.readyState=e._socket.readyState},this._url=t,this._protocols=n,this._options=(0,o["default"])({},l,r),this._messageQueue=[],this._reconnectAttempts=0,this.readyState=this.CONNECTING,"function"==typeof this._options.debug?this._debug=this._options.debug:this._options.debug?this._debug=console.log.bind(console):this._debug=function(){},r.automaticOpen&&this.open()};e["default"]=h,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(6),__esModule:!0}},function(t,e,n){n(7),t.exports=n(10).Object.assign},function(t,e,n){var r=n(8);r(r.S+r.F,"Object",{assign:n(23)})},function(t,e,n){var r=n(9),i=n(10),s=n(11),o=n(13),a="prototype",u=function(t,e,n){var l,h,c,d=t&u.F,f=t&u.G,m=t&u.S,p=t&u.P,_=t&u.B,v=t&u.W,y=f?i:i[e]||(i[e]={}),g=y[a],b=f?r:m?r[e]:(r[e]||{})[a];f&&(n=e);for(l in n)h=!d&&b&&void 0!==b[l],h&&l in y||(c=h?b[l]:n[l],y[l]=f&&"function"!=typeof b[l]?n[l]:_&&h?s(c,r):v&&b[l]==c?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[a]=t[a],e}(c):p&&"function"==typeof c?s(Function.call,c):c,p&&((y.virtual||(y.virtual={}))[l]=c,t&u.R&&g&&!g[l]&&o(g,l,c)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(12);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(14),i=n(22);t.exports=n(18)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(15),i=n(17),s=n(21),o=Object.defineProperty;e.f=n(18)?Object.defineProperty:function(t,e,n){if(r(t),e=s(e,!0),r(n),i)try{return o(t,e,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(16);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(18)&&!n(19)(function(){return 7!=Object.defineProperty(n(20)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(19)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(16),i=n(9).document,s=r(i)&&r(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},function(t,e,n){var r=n(16);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var r=n(24),i=n(39),s=n(40),o=n(41),a=n(28),u=Object.assign;t.exports=!u||n(19)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=o(t),u=arguments.length,l=1,h=i.f,c=s.f;u>l;)for(var d,f=a(arguments[l++]),m=h?r(f).concat(h(f)):r(f),p=m.length,_=0;p>_;)c.call(f,d=m[_++])&&(n[d]=f[d]);return n}:u},function(t,e,n){var r=n(25),i=n(38);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(26),i=n(27),s=n(31)(!1),o=n(35)("IE_PROTO");t.exports=function(t,e){var n,a=i(t),u=0,l=[];for(n in a)n!=o&&r(a,n)&&l.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~s(l,n)||l.push(n));return l}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(28),i=n(30);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(29);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(27),i=n(32),s=n(34);t.exports=function(t){return function(e,n,o){var a,u=r(e),l=i(u.length),h=s(o,l);if(t&&n!=n){for(;l>h;)if(a=u[h++],a!=a)return!0}else for(;l>h;h++)if((t||h in u)&&u[h]===n)return t||h||0;return!t&&-1}}},function(t,e,n){var r=n(33),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(33),i=Math.max,s=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):s(t,e)}},function(t,e,n){var r=n(36)("keys"),i=n(37);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(9),i="__core-js_shared__",s=r[i]||(r[i]={});t.exports=function(t){return s[t]||(s[t]={})}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(30);t.exports=function(t){return Object(r(t))}},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(44);var u=n(1),l=n(45),h=r(l),c=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(r._auth=n,!t)throw new Error("url is required for a command");return r._url=t,r._stopped=!0,r._connectionID=(0,h["default"])(),r._isConnected=!1,r._retry=0,r._retries=[0,300,1e3],r._run(),r}return o(e,t),a(e,[{key:"destroy",value:function(){this._stopped=!0}},{key:"_retryRun",value:function(t){var e=this;return t?(this._retry=0,void this._run()):(this._retry<this._retries.length-1&&this._retry++,void setTimeout(function(){e._run()},this._retries[this._retry]))}},{key:"_run",value:function(){var t=this;return this._auth?void this._auth.request(function(e,n){return e?void t._disconnected(e):void t._request(n)}):void this._request()}},{key:"_request",value:function(t){var e=this,n={Accept:"application/json","Content-Type":"application/json"};t&&(n.Authorization="Bearer "+t),fetch(this._url+"?cid="+this._connectionID,{method:"GET",headers:n}).then(function(t){if(200===t.status)return t.json();if(401===t.status){e._auth.refreshToken();var n=new Error("chat: unauthorized");throw n.retry=!0,n}if(503===t.status){var r=new Error("chat: server unavailable");throw r.retry=!0,r}if(404===t.status)throw new Error("Room does not exist");if(403===t.status)throw e.emit("unauthorized"),new Error("chat: forbidden");if(409===t.status){e._connectionID=(0,h["default"])();var i=new Error("chat: connection id conflict");throw i.ignore=!0,i.retry=!0,i}throw new Error("non 200 response")}).then(function(t){e._connected();for(var n=0;n<t.length;n++)e.emit("message",t[n]);e._stopped||e._retryRun(!0)})["catch"](function(t){e._disconnected(t),t.retry&&(e._stopped||e._retryRun())})}},{key:"_disconnected",value:function(t){t&&(t.ignore||this.emit("error",t)),this._isConnected&&(this.emit("disconnect"),this._isConnected=!1)}},{key:"_connected",value:function(){this._isConnected||(this.emit("ready"),this._isConnected=!0)}}]),e}(u.EventEmitter);e["default"]=c},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return p.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function s(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function o(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function a(t){var e=new FileReader;return e.readAsArrayBuffer(t),o(e)}function u(t){var e=new FileReader;return e.readAsText(t),o(e)}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(p.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(p.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(p.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(t){if(!p.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob?(this.blob=function(){var t=s(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(a)},this.text=function(){var t=s(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=s(this);return t?t:Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function c(t,e){e=e||{};var n=e.body;if(c.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=h(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function f(t){var e=new i,n=(t.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();e.append(r,i)}),e}function m(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof i?e.headers:new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var p={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];i||(i=[],this.map[t]=i),i.push(r)},i.prototype["delete"]=function(t){delete this.map[e(t)]},i.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},i.prototype.getAll=function(t){return this.map[e(t)]||[]},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=[n(r)]},i.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},p.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this)},l.call(c.prototype),l.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var v=[301,302,303,307,308];m.redirect=function(t,e){if(v.indexOf(e)===-1)throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t
}})},t.Headers=i,t.Request=c,t.Response=m,t.fetch=function(t,e){return new Promise(function(n,r){function i(){return"responseURL"in o?o.responseURL:/^X-Request-URL:/m.test(o.getAllResponseHeaders())?o.getResponseHeader("X-Request-URL"):void 0}var s;s=c.prototype.isPrototypeOf(t)&&!e?t:new c(t,e);var o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:f(o),url:i()},e="response"in o?o.response:o.responseText;n(new m(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(s.method,s.url,!0),"include"===s.credentials&&(o.withCredentials=!0),"responseType"in o&&p.blob&&(o.responseType="blob"),s.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"==typeof s._bodyInit?null:s._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var n=new Array(16),r=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n},i=function(t,e){var n=e||0,r=s;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]},s=[],o={},a=0;a<256;a++)s[a]=(a+256).toString(16).substr(1),o[s[a]]=a;var u=function(){var t=r();return t[6]=15&t[6]|64,t[8]=63&t[8]|128,i(t)};e["default"]=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(44);var s=function(){function t(e,n){if(r(this,t),!e)throw new Error("auth is required for a command");if(this._auth=e,!n)throw new Error("url is required for a command");this._url=n,this._retries=[0,300,1e3]}return i(t,[{key:"run",value:function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!t)return void r(new Error("command is required for a command"));var i=-1,e=function s(){n._auth.request(function(e,o){return e?void r(e):void fetch(n._url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o},body:JSON.stringify({command:t})}).then(function(t){if(t.status>=200&&t.status<300)return 204===t.status?null:t.json();if(401===t.status){n._auth.refreshToken();var e=new Error("chat: unauthorized");throw e.retry=!0,e}if(503===t.status){var r=new Error("chat: server unavailable");throw r.retry=!0,r}if(403===t.status)throw new Error("chat: forbidden");if(t.status>=400&&t.status<500)return t.json();throw new Error("chat: non-200 response code from chat server")}).then(function(t){return t&&t.messages?void r(null,t.messages):void r()})["catch"](function(t){if(t.retry&&i<n._retries.length-1){i++;var e=n._retries[i];return e?void setTimeout(s,e):void s()}r(t)})})};e()}}]),t}();e["default"]=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(44);var s={INDEX:"index",TYPE:"type",NESTED_ITEMS:"nestedItems"},o={KEY:"key",VARS:"vars"},a={NESTED_DATA_ARRAY:"nestedDataArray",NESTED_ARRAY:"nestedArray",NESTED_OBJECT:"nestedObject",TEMPLATE:"template",INT_ARRAY:"intArray",STRING_ARRAY:"stringArray",STRING:"string",INT:"int",BOOL:"bool"},u={emoticons:"emoticon",links:"link",mentions:"mention",tags:"tag"},l=function(){function t(e){if(r(this,t),!e)throw new Error("url is required for parser");this._baseUrl=e,this._manifests={},this._buffer={},this._fetchingManifests={}}return i(t,[{key:"parseMessage",value:function(t,e){var n=this;t&&t instanceof Array&&!(t.length<2)||e(new Error("Invalid data format"));var r=t[0],i=t[1];this._parseMessage(r,i,function(t,i){return t?void e(t):("HISTORY"===r&&i.messages.length&&i.messages.forEach(function(t,e){n._parseMessage("SAY",t,function(t,n){t||(i.messages[e]=n)})}),void e(null,r,i))})}},{key:"_addManifest",value:function(t){this._manifests[t.version]=t}},{key:"_parseMessage",value:function(t,e,n){var r=this,i=e[0],s=void 0;return this._manifests[i]?this._manifests[i].manifests[t]?(s=this._parse(i,this._manifests[i].manifests[t],e),void n(null,s)):void n(new Error("manifest does not have "+t+" command")):(this._buffer[i]?this._buffer[i].push([e,t,n]):this._buffer[i]=[[e,t,n]],void(this._fetchingManifests[i]!==!0&&(this._fetchingManifests[i]=!0,fetch(this._baseUrl+"/"+i).then(function(t){if(200!==t.status)throw new Error("chat: non-200 response code from chat server");return t.json()}).then(function(t){for(r._addManifest(t);r._buffer[t.version].length>0;){var e=r._buffer[t.version].shift();s=r._parse(t.version,t.manifests[e[1]],e[0]),e[2](null,s)}})["catch"](function(t){r._buffer[i]=[],n(t)}))))}},{key:"_parse",value:function(t,e,n){for(var r=this,i={},l=Object.keys(e),h=function(h){var c=l[h],d=e[c],f=n[d[s.INDEX]];if(null===f)return i[c]=null,"continue";var m=void 0;switch(d[s.TYPE]){case a.NESTED_ARRAY:m=[];for(var p=0;p<f.length;p++)m.push(r._parse(t,d[s.NESTED_ITEMS],f[p]));break;case a.NESTED_OBJECT:m=r._parse(t,d[s.NESTED_ITEMS],f);break;case a.TEMPLATE:m=r._parseTemplate(t,f[d[s.NESTED_ITEMS][o.KEY].index],f[d[s.NESTED_ITEMS][o.VARS].index]);break;default:m=f}m&&m instanceof Array&&m.forEach(function(t){var e=t;e.positions&&e.positions instanceof Array&&e.positions.forEach(function(t){u[c]&&(e.type=u[c],i.positions||(i.positions={}),i.positions[t]=e)})}),i[c]=m},c=0;c<l.length;c++){h(c)}return i}},{key:"_parseTemplate",value:function(t,e,n){var r=new h(this._manifests[t].templates[e],n);return r.getParsed()}}]),t}(),h=function(){function t(e,n){return r(this,t),this._parsed="",n&&0!==n.length?void(e&&0!==e.length&&(this._parsed="",this._varPos=0,this._curr="",this._template=e,this._templateLength=e.length,this._vars=n,this._next=this._startState.bind(this),this._pos=0,this._skipNext=!1)):void(this._parsed=e)}return i(t,[{key:"getParsed",value:function(){if(this._parsed)return this._parsed;for(var t=0;t<this._templateLength;t++)this._skipNext?this._skipNext=!1:(this._pos=t,this._curr=this._template[t],this._next=this._next().bind(this));return this._parsed}},{key:"_startDelim",value:function(){return!(this._pos>=this._templateLength-1)&&("{"===this._curr&&"{"===this._template[this._pos+1]&&(this._skipNext=!0,!0))}},{key:"_endDelim",value:function(){return!(this._pos>=this._templateLength-1)&&("}"===this._curr&&"}"===this._template[this._pos+1]&&(this._skipNext=!0,!0))}},{key:"_startState",value:function(){return this._startDelim()?this._midState:(this._parsed+=this._curr,this._startState)}},{key:"_midState",value:function(){return"n"===this._curr?this._endState:(this._parsed=this._parsed+"{{"+this._curr,this._startState)}},{key:"_endState",value:function(){return this._endDelim()?(this._parsed+=this._vars[this._varPos],this._varPos++):this._parsed+=this._curr,this._startState}}]),t}();e["default"]=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(44);var s=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r(this,t),!e)throw new Error("auth is required for a roster request");if(this._auth=e,!n)throw new Error("url is required for a roster request");this._url=n,this._nextParams="",this._options=i,this._retries=[0,300,1e3]}return i(t,[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=this._url+"?";this._options.limit&&(e=e+"limit="+this._options.limit+"&"),this._options.role&&(e=e+"role="+this._options.role+"&"),this._request(e,t)}},{key:"next",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(this._nextParams){var e=this._url+"?"+this._nextParams;return void this._request(e,t)}t(null,[])}},{key:"_request",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=-1,i=function s(){e._auth.request(function(i,o){return i?void n(i):void fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o}}).then(function(t){if(200===t.status)return t.json();if(401===t.status){var e=new Error("chat: unauthorized");throw e.retry=!0,e}if(503===t.status){var n=new Error("chat: server unavailable");throw n.retry=!0,n}if(403===t.status)throw new Error("chat: forbidden");throw new Error("chat: non-200 response code from chat server")}).then(function(t){e._nextParams=t&&t._links&&t._links.next&&t._links.next.href?t._links.next.href.split("?")[1]:"",n(null,t.users)})["catch"](function(t){if(t.retry&&r<e._retries.length-1){r++;var i=e._retries[r];return i?void setTimeout(s,i):void s()}n(t)})})};i()}}]),t}();e["default"]=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(44);var s=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r(this,t),!e)throw new Error("auth is required for a changerole request");if(this._auth=e,!n)throw new Error("url is required for a changerole request");this._url=n,this._nextParams="",this._options=i,this._retries=[0,300,1e3]}return i(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=this._url+"?";this._options.limit&&(e=e+"limit="+this._options.limit+"&"),this._request(e,t)}},{key:"next",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(this._nextParams){var e=this._url+"?"+this._nextParams;return void this._request(e,t)}t(null,[])}},{key:"_request",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=-1,i=function s(){e._auth.request(function(i,o){return i?void n(i):void fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o}}).then(function(t){if(200===t.status)return t.json();if(401===t.status){var e=new Error("chat: unauthorized");throw e.retry=!0,e}if(503===t.status){var n=new Error("chat: server unavailable");throw n.retry=!0,n}if(403===t.status)throw new Error("chat: forbidden");throw new Error("chat: non-200 response code from chat server")}).then(function(t){e._nextParams=t&&t._links&&t._links.next&&t._links.next.href?t._links.next.href.split("?")[1]:"",n(null,t.changeroles)})["catch"](function(t){if(t.retry&&r<e._retries.length-1){r++;var i=e._retries[r];return i?void setTimeout(s,i):void s()}n(t)})})};i()}}]),t}();e["default"]=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(44);var s=function(){function t(e){if(r(this,t),!e)throw new Error("auth is required for an http request");this._auth=e,this._retries=[0,300,1e3]}return i(t,[{key:"execGet",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!t)throw new Error("url is required for an http request");this._execute("GET",t,null,e)}},{key:"execPut",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!t)throw new Error("url is required for an http request");this._execute("PUT",t,e,n)}},{key:"execPost",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!t)throw new Error("url is required for an http request");this._execute("POST",t,e,n)}},{key:"execPatch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!t)throw new Error("url is required for an http request");this._execute("PATCH",t,e,n)}},{key:"execDelete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!t)throw new Error("url is required for an http request");this._execute("DELETE",t,e)}},{key:"_execute",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},s={method:t,headers:{Accept:"application/json","Content-Type":"application/json"}};n&&(s.body=JSON.stringify(n));var o=-1,a=function u(){r._auth.request(function(t,n){return t?void i(t):(s.headers.Authorization="Bearer "+n,void fetch(e,s).then(function(t){if(t.status>=200&&t.status<300)return t.json();if(401===t.status){var e=new Error("chat: unauthorized");throw e.retry=!0,e}if(503===t.status){var n=new Error("chat: server unavailable");throw n.retry=!0,n}if(403===t.status)throw new Error("chat: forbidden");throw new Error("chat: non-200 response code from chat server")}).then(function(t){i(null,t)})["catch"](function(t){if(t.retry&&o<r._retries.length-1){o++;var e=r._retries[o];return e?void setTimeout(u,e):void u()}i(t)}))})};a()}}]),t}();e["default"]=s}])})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),a=r(o),u=n(3),l=r(u),h=n(2),c=r(h),d=[{name:"rateLimitDuration",value:1,text:"1s"},{name:"rateLimitDuration",value:5,text:"5s"},{name:"rateLimitDuration",value:30,text:"30s"},{name:"rateLimitDuration",value:60,text:"1m"},{name:"rateLimitDuration",value:300,text:"5m"},{name:"rateLimitDuration",value:900,text:"15m"}],f=[{name:"rateLimitMax",value:1,text:"1 chat"},{name:"rateLimitMax",value:5,text:"5 chats"},{name:"rateLimitMax",value:10,text:"10 chats"}],m=[{name:"mode",value:"user",text:"Everyone"},{name:"mode",value:"moderator",text:"Moderators"},{name:"mode",value:"owner",text:"Owner"}],p=function(){function t(e,n,r,s){i(this,t),this.parent=e,this.chat=n,this.chatBody=r,this.options=s,this.toggleFlyout=this.toggleFlyout.bind(this),this.closeFlyoutOnBlur=this.closeFlyoutOnBlur.bind(this),this.handleRadioChange=this.handleRadioChange.bind(this),this.render(),this.renderFlyout()}return s(t,[{key:"init",value:function(){this.renderRadios()}},{key:"render",value:function(){this.tooltip=(0,a["default"])({tagName:"span",className:"chat__tooltip",text:"Room Settings"}),this.el=(0,a["default"])({tagName:"button",className:"chat__admin-button",childs:[this.tooltip],events:{click:this.toggleFlyout}}),this.parent.appendChild(this.el)}},{key:"renderFlyout",value:function(){this.flyout=(0,a["default"])({tagName:"div",className:"chat__flyout"}),this.parent.parentElement.appendChild(this.flyout)}},{key:"renderRadios",value:function(){var t=(0,a["default"])({tagName:"div",className:"chat__info chat__info--mode",text:"Chat Mode"});this.flyout.appendChild(t),this.radioRenderer(m);var e=(0,a["default"])({tagName:"div",className:"chat__description chat__description--mode",text:"The current mode of the room specifying which users can chat"});this.flyout.appendChild(e);var n=(0,a["default"])({tagName:"div",className:"chat__info",text:"Chat Rate Limit"});this.flyout.appendChild(n),this.radioRenderer(f);var r=(0,a["default"])({tagName:"div",className:"chat__description",text:"Max amount of chats allowed during..."});this.flyout.appendChild(r),this.radioRenderer(d);var i=(0,a["default"])({tagName:"div",className:"chat__description",text:"Duration of max allowed chats."});this.flyout.appendChild(i)}},{key:"radioRenderer",value:function(t){for(var e=[],n=0;n<t.length;n++){var r=(0,a["default"])({tagName:"input",className:"chat__radio",attributes:{type:"radio",name:t[n].name,value:t[n].value,id:t[n].name+n},events:{change:this.handleRadioChange}});this.chat._room[t[n].name]===t[n].value&&(r.checked="checked"),e.push(r);var i=(0,a["default"])({tagName:"label",className:"chat__radio-label chat__radio-label--"+t.length,text:t[n].text,attributes:{"for":t[n].name+n}});e.push(i)}var s=(0,a["default"])({tagName:"div",className:"chat__radio-slider chat__radio-slider--"+t.length});e.push(s);var o=(0,a["default"])({tagName:"div",className:"chat__radio-wrapper",childs:e}),u=(0,a["default"])({tagName:"div",className:"chat__radio-container chat__radio-container--restricted chat__radio-container--"+t[0].name,childs:[o]});this.flyout.appendChild(u)}},{key:"handleRadioChange",value:function(t){var e={};e[t.target.name]=isNaN(t.target.value)?t.target.value:parseInt(t.target.value),this.chat.patchRoom(this.chat._roomname,e,function(t,e){t&&console.log("ERR:"+t)})}},{key:"closeFlyoutOnBlur",value:function(t){(0,l["default"])(t,this.flyout,this.el)&&(this._blurEvent(),this._blurEvent=null,this.flyout.classList.remove("chat__flyout--visible"))}},{key:"toggleFlyout",value:function(t){this.flyout.classList.toggle("chat__flyout--visible"),this._blurEvent||(this._blurEvent=(0,c["default"])(document,"click",this.closeFlyoutOnBlur))}}]),t}();e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(16),a=r(o),u=n(1),l=r(u),h=n(15),c=r(h),d=n(4),f=r(d),m={chatLimit:250},p=function(){function t(e,n,r){i(this,t),this.parentEl=e,this.chat=n,this.options=Object.assign({},m,r),this._scrollLocked=!0,this._previousMessage=null,this._chatElements=[],this._chatStorage=[],this.scrollHandler=(0,f["default"])(this.scrollHandler.bind(this),50),this.appendChatElements=(0,c["default"])(this.appendChatElements.bind(this),250,{trailing:!0}),this.render()}return s(t,[{key:"render",value:function(){var t=this;this.chatBody=(0,l["default"])({tagName:"div",className:"chat__body"}),this.chatBodyContainer=(0,l["default"])({tagName:"div",className:"chat__body-container",childs:[this.chatBody]}),this.chatBodyScroll=(0,l["default"])({tagName:"div",className:"chat__body-scroll"}),this.chatBodyScroll.addEventListener("click",this.scrollLock.bind(this,!0));var e=0,n=setInterval(function(){t.scrollLock(!0),e++,e>=5&&(t.chatBody.addEventListener("scroll",t.scrollHandler),clearInterval(n))},250);this.parentEl.appendChild(this.chatBodyContainer),this.parentEl.appendChild(this.chatBodyScroll)}},{key:"createMessageText",value:function(t){var e=(0,l["default"])({tagName:"div",className:"chat__text"}),n=t.message,r=t.positions,i=0;for(var s in r){s=parseInt(s,10);var o=n.slice(i,s),a=n.slice(s,s+r[s].length);switch(i=s+r[s].length,o.length&&e.appendChild((0,l["default"])({tagName:"span",text:o})),r[s].type){case"emoticon":var u=(0,l["default"])({tagName:"img",className:"chat__line-emoticon",attributes:{src:r[s].url}}),h=(0,l["default"])({tagName:"span",className:"chat__line-emoticon-wrap",attributes:{"data-pattern":a},childs:[u]});e.appendChild(h);break;case"mention":var c="chat__line-mention";this.chat._username===r[s].url&&(c="chat__line-mention chat__line-mention--me"),e.appendChild((0,l["default"])({tagName:"a",className:c,attributes:{href:"/"+r[s].url,target:"_blank"},text:a}));break;case"tag":e.appendChild((0,l["default"])({tagName:"a",className:"chat__line-tag",attributes:{href:"/tag/"+r[s].text,target:"_blank"},text:a}));break;case"link":e.appendChild((0,l["default"])({tagName:"a",className:"chat__line-link",attributes:{href:r[s].href,target:"_blank"},text:a}))}}return i<n.length&&e.appendChild((0,l["default"])({tagName:"span",text:n.slice(i)})),e}},{key:"renderChat",value:function(t){if(!this.chat._me||!this.chat._me.ignore||this.chat._me.ignore.indexOf(t.actor.username)===-1){var e=this.renderTimeDiff(this._previousMessage,t),n=this._previousMessage&&this._previousMessage.actor.username!==t.actor.username,r=this.createMessageText(t),i=[];if(e||n||0===this._chatElements.length){var s=(0,l["default"])({tagName:"div",className:"chat__avatar",attributes:{style:"background-color: "+t.actor.color+"; background-image: url("+t.actor.avatar+");"}});if(i.push(s),"user"!==t.actor.role){var o=(0,l["default"])({tagName:"span",className:"chat__line-role chat__line-role--"+t.actor.role,text:t.actor.role});i.push(o)}var u=(0,l["default"])({tagName:"span",className:"chat__actor",text:t.actor.username,attributes:{style:"color: "+t.actor.color}});i.push(u)}var h=(0,l["default"])({tagName:"span",className:"chat__line-timestamp",text:a["default"].utc(1e3*t.timestamp).format("LT")});i.push(h);var c=(0,l["default"])({tagName:"div",className:"chat__line-content",childs:[r]});i.push(c);var d=[],f=(0,l["default"])({tagName:"div",className:"chat__tooltip chat__tooltip--action",text:"Delete Chat"}),m=(0,l["default"])({tagName:"button",className:"chat__action chat__action--delete",childs:[f]});if(m.addEventListener("click",this.deleteActionHandler.bind(this,t.id)),d.push(m),t.actor.username!==this.chat._username){var p=(0,l["default"])({tagName:"div",className:"chat__tooltip chat__tooltip--action",text:"Mute User"}),_=(0,l["default"])({tagName:"button",className:"chat__action chat__action--mute",childs:[p]});_.addEventListener("click",this.muteActionHandler.bind(this,t.actor.username)),d.push(_);var v=(0,l["default"])({tagName:"div",className:"chat__tooltip chat__tooltip--action",text:"Ignore User"}),y=(0,l["default"])({tagName:"button",className:"chat__action chat__action--ignore",childs:[v]});y.addEventListener("click",this.ignoreActionHandler.bind(this,t.actor.username)),d.push(y);var g=(0,l["default"])({tagName:"div",className:"chat__tooltip chat__tooltip--action",text:"IP Ban User"}),b=(0,l["default"])({tagName:"button",className:"chat__action chat__action--ban",childs:[g]});b.addEventListener("click",this.banActionHandler.bind(this,t.actor.username)),d.push(b)}var w=(0,l["default"])({tagName:"div",className:"chat__actions "+(t.actor.username===this.chat._username&&this.chat._me&&"user"===this.chat._me.room.role?"chat__actions--user":""),childs:d});i.push(w);var k=(0,l["default"])({tagName:"div",className:"chat__line "+(e||n||0===this._chatElements.length?"":"chat__line--condensed")+" ",childs:i,attributes:{"data-username":t.actor.username}});this.chat.on("delete "+t.id,this.removeChat.bind(this,k)),this.chatElementsManager(k),this._previousMessage=t}}},{key:"renderTimeDiff",value:function(t,e){if(t){var n=a["default"].utc(1e3*e.timestamp),r=a["default"].utc(1e3*this._previousMessage.timestamp),i=n.diff(r,"minutes")>5;if(i){var s=(0,l["default"])({tagName:"span",className:"chat__time-diff-span",text:r.fromNow()}),o=(0,l["default"])({tagName:"div",className:"chat__time-diff",childs:[s]});this.chatElementsManager(o)}return i}}},{key:"renderMessage",value:function(t){var e="chat__line chat__line--info";switch(t.level){case"error":e="chat__line chat__line--error";break;case"warn":e="chat__line chat__line--warning"}var n=[],r=(0,l["default"])({tagName:"div",className:"chat__avatar chat__avatar--"+t.level});n.push(r);var i=(0,l["default"])({tagName:"span",className:"chat__actor",text:t.level});n.push(i);var s=(0,l["default"])({tagName:"div",className:"chat__text",text:t.message}),o=(0,l["default"])({tagName:"div",className:"chat__line-content",childs:[s]});n.push(o);var a=(0,l["default"])({tagName:"div",className:"chat__tooltip chat__tooltip--action",text:"Delete"}),u=(0,l["default"])({tagName:"button",className:"chat__action chat__action--delete",childs:[a]}),h=(0,l["default"])({tagName:"div",className:"chat__actions",childs:[u]});n.push(h);var c=(0,l["default"])({tagName:"div",className:e,childs:n});u.addEventListener("click",this.removeChat.bind(this,c,!0)),this.chatElementsManager(c)}},{key:"chatElementsManager",value:function(t){this._chatStorage.push(t),this._chatElements.push(t),this.appendChatElements()}},{key:"appendChatElements",value:function(){for(this._scrollLocked?1e3:this.options.chatLimit;this._chatStorage.length;)this.chatBody.appendChild(this._chatStorage.shift());for(;this._chatElements.length>this.options.chatLimit;)this.chatBody.removeChild(this._chatElements.shift());this.scrollBottom()}},{key:"scrollHandler",value:function(){Math.abs(this.chatBody.scrollTop-(this.chatBody.scrollHeight-this.chatBody.offsetHeight))<=5?this.scrollLock():this.scrollUnlock()}},{key:"scrollLock",value:function(t){this._scrollLocked=!0,this.chatBodyScroll.classList.remove("chat__body-scroll--active"),t&&this.scrollBottom()}},{key:"scrollUnlock",value:function(){this.chatBody.scrollHeight!==this.chatBody.clientHeight&&(this._scrollLocked=!1,this.chatBodyScroll.classList.add("chat__body-scroll--active"))}},{key:"scrollBottom",value:function(){this._scrollLocked&&(this.chatBody.scrollTop=this.chatBody.scrollHeight)}},{key:"removeChat",value:function(t,e){return!this.chat._me||e||"moderator"!==this.chat._me.room.role&&"owner"!==this.chat._me.room.role?(this.chatBody.removeChild(t),void this._chatElements.shift()):void t.classList.add("chat__line--removed")}},{key:"deleteActionHandler",value:function(t){this.chat.command("/delete "+t)}},{key:"muteActionHandler",value:function(t){this.chat.command("/mute "+t)}},{key:"ignoreActionHandler",value:function(t){this.chat.command("/ignore "+t),this.removeChatsByUsername(t)}},{key:"banActionHandler",value:function(t){this.chat.command("/ignore "+t),this.removeChatsByUsername(t)}},{key:"removeChatsByUsername",value:function(t){for(var e=[],n=0;n<this._chatElements.length;n++)this._chatElements[n].getAttribute("data-username")===t&&(this._chatElements[n].parentElement.removeChild(this._chatElements[n]),e.push(n));for(var n=0;n<e.length;n++)this._chatElements.splice(e[n],1)}}]),t}();e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),a=r(o),u=n(3),l=r(u),h=n(2),c=r(h),d=function(){function t(e,n,r,s){i(this,t),this.parent=e,this.chat=n,this.chatInput=r,this.options=s,this.toggleFlyout=this.toggleFlyout.bind(this),this.closeFlyoutOnBlur=this.closeFlyoutOnBlur.bind(this),this.render()}return s(t,[{key:"initUser",value:function(){this.getEmoticons()}},{key:"getEmoticons",value:function(){this.chat.getAllEmoticons(this.chat._roomname,this.chat._username,function(t,e){t&&console.log(t),this.emoticons=e.emoticons,this.enableEmoticonButton(),this.renderEmoticonFlyout()}.bind(this))}},{key:"render",value:function(){this.tooltip=(0,a["default"])({tagName:"span",className:"chat__tooltip",text:"Add Emoticon"}),this.el=(0,a["default"])({tagName:"button",className:"chat__emoticon-button chat__emoticon-button--disabled",childs:[this.tooltip]}),this.chatInput.chatInputWrapper.appendChild(this.el)}},{key:"enableEmoticonButton",value:function(){this.el.addEventListener("click",this.toggleFlyout),this.el.classList.remove("chat__emoticon-button--disabled")}},{key:"renderEmoticonFlyout",value:function(){var t=this;this.flyout=(0,a["default"])({tagName:"div",className:"chat__emoticon-flyout"}),Object.keys(this.emoticons).map(function(e,n){var r=t.emoticons[e],i=(0,a["default"])({tagName:"button",className:"chat__emoticon-selector",attributes:{style:"background-image: url("+r.source+")",title:r.pattern}}),s=(0,a["default"])({tagName:"span",className:"chat__emoticon-selector-container",childs:[i]}),o=t.selectEmoticon.bind(t,r.pattern);s.addEventListener("click",o),t.flyout.appendChild(s)}),this.parent.appendChild(this.flyout)}},{key:"selectEmoticon",value:function(t){this.chatInput.chatInput.value=""+this.chatInput.chatInput.value+t+" ",this.chatInput.chatInput.focus(),this.flyout.classList.remove("chat__emoticon-flyout--visible")}},{key:"closeFlyoutOnBlur",value:function(t){(0,l["default"])(t,this.flyout,this.el)&&(this._blurEvent(),this._blurEvent=null,this.flyout.classList.remove("chat__emoticon-flyout--visible"))}},{key:"toggleFlyout",value:function(t){this.flyout.classList.toggle("chat__emoticon-flyout--visible"),this._blurEvent||(this._blurEvent=(0,c["default"])(document,"click",this.closeFlyoutOnBlur))}}]),t}();e["default"]=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),a=r(o),u=function(){function t(e,n,r){i(this,t),this.parent=e,this.chat=n,this.options=r,this.render()}return s(t,[{key:"render",value:function(){this.chatHeaderTitle=(0,a["default"])({tagName:"h1",className:"chat__header-title",text:""+this.options.room}),this.el=(0,a["default"])({tagName:"div",className:"chat__header",childs:[this.chatHeaderTitle]}),this.parent.appendChild(this.el)}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),a=r(o),u={chatLimit:250},l=function(){function t(e,n,r,s){i(this,t),this.parent=e,this.chat=n,this.chatBody=r,this.options=Object.assign({},u,s),this.render()}return s(t,[{key:"initUser",value:function(){this.chatInput.classList.remove("chat__input--disabled"),this.chatInput.removeAttribute("disabled"),this.chatInput.setAttribute("placeholder","Send message.")}},{key:"render",value:function(){var t=this;this.chatInput=(0,a["default"])({tagName:"input",className:"chat__input chat__input--disabled",attributes:{placeholder:"Login to chat.",disabled:"disabled"}}),this.chatInputWrapper=(0,a["default"])({tagName:"div",className:"chat__input-wrapper",childs:[this.chatInput]}),this.chatInput.addEventListener("keyup",function(e){
if(e.preventDefault(),13===e.keyCode){var n=e.target.value;n&&(e.target.value="",t.chat.command(n,function(e,n){if(e)throw e;if(n&&n.length)for(var r=0;r<n.length;r++)t.chatBody.renderMessage(n[r])}))}}),this.parent.appendChild(this.chatInputWrapper)}}]),t}();e["default"]=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),a=r(o),u=n(3),l=r(u),h=n(2),c=r(h),d=n(4),f=r(d),m={tooltipText:"Configuration",headerText:"Settings",disableDefaultAvatars:!1,disableDefaultColors:!1},p=function(){function t(e,n,r,s){i(this,t),this.parent=e,this.chat=n,this.chatInput=r,this.options=Object.assign({},m,s),this.toggleOptionsFlyout=this.toggleOptionsFlyout.bind(this),this.colorHandler=(0,f["default"])(this.colorHandler.bind(this),250),this.closeFlyoutOnBlur=this.closeFlyoutOnBlur.bind(this),this.showGifsHandler=this.showGifsHandler.bind(this),this.showTimestampsHandler=this.showTimestampsHandler.bind(this),this.render(),this.renderFlyout()}return s(t,[{key:"initUser",value:function(){this.enableOptionsButton(),this.renderColors(),this.getDefaultAvatars(),this.renderOptions()}},{key:"enableOptionsButton",value:function(){this.el.classList.remove("chat__options-button--disabled"),(0,c["default"])(this.el,"click",this.toggleOptionsFlyout)}},{key:"getDefaultAvatars",value:function(){this.chat.getDefaultAvatars(function(t,e){return t?void console.log(t):(this.defaultAvatars=e.avatars,void this.renderAvatars())}.bind(this))}},{key:"render",value:function(){this.tooltip=(0,a["default"])({tagName:"span",className:"chat__tooltip",text:this.options.tooltipText}),this.el=(0,a["default"])({tagName:"button",className:"chat__options-button chat__options-button--disabled",childs:[this.tooltip]}),this.parent.appendChild(this.el)}},{key:"renderFlyout",value:function(){this.flyout=(0,a["default"])({tagName:"div",className:"chat__flyout"}),this.parent.parentElement.appendChild(this.flyout)}},{key:"renderOptions",value:function(){var t=(0,a["default"])({tagName:"div",className:"chat__options-switch-slider"}),e=(0,a["default"])({tagName:"div",className:"chat__options-switch-name",text:"Show Animated Gifs"}),n=(0,a["default"])({tagName:"input",className:"chat__options-switch-checkbox",attributes:{type:"checkbox",id:"showGifs"},events:{change:this.showGifsHandler}});this.chat._me.showGifs&&(n.checked=!0);var r=(0,a["default"])({tagName:"label",className:"chat__options-switch",childs:[t],attributes:{"for":"showGifs"}}),i=(0,a["default"])({tagName:"div",className:"chat__options-switch-container",childs:[n,r,e]}),s=(0,a["default"])({tagName:"div",className:"chat__options-switch-slider"}),o=(0,a["default"])({tagName:"div",className:"chat__options-switch-name",text:"Show Timestamps"}),u=(0,a["default"])({tagName:"input",className:"chat__options-switch-checkbox",attributes:{type:"checkbox",id:"showTimestamps"},events:{change:this.showTimestampsHandler}});this.chat._me.showTimestamps&&(u.checked=!0);var l=(0,a["default"])({tagName:"label",className:"chat__options-switch",childs:[s],attributes:{"for":"showTimestamps"}}),h=(0,a["default"])({tagName:"div",className:"chat__options-switch-container",childs:[u,l,o]});this.flyout.appendChild(h),this.flyout.appendChild(i)}},{key:"showGifsHandler",value:function(t){var e={};e.showGifs=t.target.checked,this.chat.patchUser(this.chat._username,e,function(t,e){t&&console.log(t),console.log(e)})}},{key:"showTimestampsHandler",value:function(t){var e={};e.showTimestamps=t.target.checked,this.chat.patchUser(this.chat._username,e,function(t,e){t&&console.log(t),console.log(e)})}},{key:"renderAvatars",value:function(){for(var t=0;t<this.defaultAvatars.length;t++){var e=this.defaultAvatars[t],n=e.link===this.chat._me.avatar,r=(0,a["default"])({tagName:"div",className:"chat__default-avatar "+(n?"chat__default-avatar--selected":""),attributes:{style:"background-image: url("+e.link+"); background-color: "+(this.chat._me.color||"#E0BB47")},events:{click:this.setDefaultAvatar.bind(this,e)}}),i=(0,a["default"])({tagName:"div",className:"chat__grid-col-1-5",childs:[r]});this.colorsContainer.appendChild(i)}}},{key:"renderColors",value:function(){var t=[],e=(0,a["default"])({tagName:"input",className:"chat__color",attributes:{type:"color",value:this.chat._me.color},events:{change:this.colorHandler}}),n=(0,a["default"])({tagName:"label",className:"chat__color-label",childs:[e]}),r=(0,a["default"])({tagName:"div",className:"chat__grid-col-1-5",childs:[n]});t.push(r);for(var i=["#1abc9c","#3498db","#9b59b6","#e67e22"],s=0;s<i.length;s++){var o=(0,a["default"])({tagName:"div",className:"chat__default-color",attributes:{style:"background-color: "+i[s]},events:{click:this.setDefaultColor.bind(this,i[s])}}),u=(0,a["default"])({tagName:"div",className:"chat__grid-col-1-5",childs:[o]});t.push(u)}this.colorsContainer=(0,a["default"])({tagName:"div",className:"chat__colors-container chat__grid",childs:t}),this.flyout.appendChild(this.colorsContainer)}},{key:"setDefaultAvatar",value:function(t){this.chat.setDefaultUserAvatar(this.chat._username,t.id,function(e,n){e&&console.log(e);for(var r=document.querySelectorAll(".chat__default-avatar"),i=0;i<r.length;i++){var s=r[i].style.backgroundImage.slice(5,-2);s===t.link?r[i].classList.add("chat__default-avatar--selected"):r[i].classList.remove("chat__default-avatar--selected")}}.bind(this))}},{key:"setDefaultColor",value:function(t){var e={color:t};this.chat.patchUser(this.chat._username,e,function(e,n){e&&console.log(e);for(var r=document.querySelectorAll(".chat__default-avatar"),i=0;i<r.length;i++)r[i].style.backgroundColor=t}.bind(this))}},{key:"colorHandler",value:function(t){var e={color:t.target.value};this.chat.patchUser(this.chat._username,e,function(e,n){e&&console.log(e);for(var r=document.querySelectorAll(".chat__default-avatar"),i=0;i<r.length;i++)r[i].style.backgroundColor=t.target.value}.bind(this))}},{key:"closeFlyoutOnBlur",value:function(t){(0,l["default"])(t,this.flyout,this.el)&&(this._blurEvent(),this._blurEvent=null,this.flyout.classList.remove("chat__flyout--visible"))}},{key:"toggleOptionsFlyout",value:function(t){this.flyout.classList.toggle("chat__flyout--visible"),this._blurEvent||(this._blurEvent=(0,c["default"])(document,"click",this.closeFlyoutOnBlur))}}]),t}();e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),u=r(a),l=n(3),h=r(l),c=n(2),d=r(c),f={tooltipText:"Users List",rosterOptions:{limit:100,role:""}},m=function(){function t(e,n,r,o){i(this,t),this.parent=e,this.chat=n,this.chatBody=r,this.options=s({},f,o),this.toggleRosterFlyout=this.toggleRosterFlyout.bind(this),this.closeFlyoutOnBlur=this.closeFlyoutOnBlur.bind(this),this.updateRoster=this.updateRoster.bind(this),this.cleanUpdateRoster=this.cleanUpdateRoster.bind(this),this.handleRadioChange=this.handleRadioChange.bind(this),this.loadMoreHandler=this.loadMoreHandler.bind(this),this.render(),this.renderFlyout(),this.roster=this.chat.getRoster(this.options.rosterOptions)}return o(t,[{key:"render",value:function(){this.tooltip=(0,u["default"])({tagName:"span",className:"chat__tooltip",text:this.options.tooltipText}),this.el=(0,u["default"])({tagName:"button",className:"chat__roster-button",childs:[this.tooltip],events:{click:this.toggleRosterFlyout}}),this.parent.appendChild(this.el)}},{key:"renderFlyout",value:function(){this.rosterRadioUser=(0,u["default"])({tagName:"input",className:"chat__radio",attributes:{type:"radio",name:"rosterSort",value:"",checked:"checked",id:"rosterSortUser"},events:{change:this.handleRadioChange}}),this.rosterRadioModerator=(0,u["default"])({tagName:"input",className:"chat__radio",attributes:{type:"radio",name:"rosterSort",value:"moderator",id:"rosterSortModerator"},events:{change:this.handleRadioChange}}),this.rosterRadioUserLabel=(0,u["default"])({tagName:"label",className:"chat__radio-label",text:"Everyone",attributes:{"for":"rosterSortUser"}}),this.rosterRadioModeratorLabel=(0,u["default"])({tagName:"label",className:"chat__radio-label",text:"Moderators",attributes:{"for":"rosterSortModerator"}}),this.rosterRadioSlider=(0,u["default"])({tagName:"div",className:"chat__radio-slider"}),this.rosterRadioWrapper=(0,u["default"])({tagName:"div",className:"chat__radio-wrapper",childs:[this.rosterRadioUser,this.rosterRadioModerator,this.rosterRadioUserLabel,this.rosterRadioModeratorLabel,this.rosterRadioSlider]}),this.rosterRadioContainer=(0,u["default"])({tagName:"div",className:"chat__radio-container chat__radio-container--sort",childs:[this.rosterRadioWrapper]}),this.rosterLoadMore=(0,u["default"])({tagName:"button",className:"chat__roster-load-more",text:"Load More",events:{click:this.loadMoreHandler}}),this.rosterContainer=(0,u["default"])({tagName:"div",className:"chat__roster-container"}),this.rosterScrollContainer=(0,u["default"])({tagName:"div",className:"chat__roster-scroll",childs:[this.rosterContainer,this.rosterLoadMore]}),this.flyout=(0,u["default"])({tagName:"div",className:"chat__flyout chat__flyout--full",childs:[this.rosterRadioContainer,this.rosterScrollContainer]}),this.parent.parentElement.appendChild(this.flyout)}},{key:"handleRadioChange",value:function(t){var e=this.options.rosterOptions;e.role=t.target.value,this.roster._options=e,this.roster.update(this.cleanUpdateRoster)}},{key:"loadMoreHandler",value:function(){this.roster.next(this.updateRoster)}},{key:"cleanUpdateRoster",value:function(t,e){for(;this.rosterContainer.firstChild;)this.rosterContainer.removeChild(this.rosterContainer.firstChild);this.updateRoster(t,e)}},{key:"updateRoster",value:function(t,e){if(t)return void console.log("ERR:"+t);for(var n=0;n<e.length;n++){var r=[];if("user"!==e[n].role){var i=(0,u["default"])({tagName:"span",className:"chat__roster-role",text:e[n].role,attributes:{style:"background:"+e[n].roleColor}});r.push(i)}var s=(0,u["default"])({tagName:"span",className:"chat__roster-actor",text:e[n].username});if(r.push(s),e[n].username!==this.chat._username){var o=(0,u["default"])({tagName:"div",className:"chat__tooltip chat__tooltip--action",text:"Mute User"}),a=(0,u["default"])({tagName:"button",className:"chat__action chat__action--mute",childs:[o],events:{click:this.chatBody.muteActionHandler.bind(this,e[n].username)}}),l=(0,u["default"])({tagName:"div",className:"chat__tooltip chat__tooltip--action",text:"Ignore User"}),h=(0,u["default"])({tagName:"button",className:"chat__action chat__action--ignore",childs:[l],events:{click:this.chatBody.ignoreActionHandler.bind(this,e[n].username)}}),c=(0,u["default"])({tagName:"div",className:"chat__tooltip chat__tooltip--action",text:"IP Ban User"}),d=(0,u["default"])({tagName:"button",className:"chat__action chat__action--ban",childs:[c],events:{click:this.chatBody.banActionHandler.bind(this,e[n].username)}}),f=(0,u["default"])({tagName:"div",className:"chat__roster-actions",childs:[d,a,h]});r.push(f)}var m=(0,u["default"])({tagName:"div",className:"chat__roster-actor-container",childs:r});this.rosterContainer.appendChild(m)}return this.roster._nextParams?void this.rosterLoadMore.classList.remove("chat__roster-load-more--disable"):void this.rosterLoadMore.classList.add("chat__roster-load-more--disable")}},{key:"closeFlyoutOnBlur",value:function(t){(0,h["default"])(t,this.flyout,this.el)&&(this._blurEvent(),this._blurEvent=null,this.flyout.classList.remove("chat__flyout--visible"))}},{key:"toggleRosterFlyout",value:function(t){this.roster.update(this.cleanUpdateRoster),this.flyout.classList.toggle("chat__flyout--visible"),this._blurEvent||(this._blurEvent=(0,d["default"])(document,"click",this.closeFlyoutOnBlur))}}]),t}();e["default"]=m},function(t,e){/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/
"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?!function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,r=arguments.length;for(n=0;n<r;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}():!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",r=t.Element[n],i=Object,s=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},u=function(t,e){if(""===e)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(t,e)},l=function(t){for(var e=s.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],r=0,i=n.length;r<i;r++)this.push(n[r]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},h=l[n]=[],c=function(){return new l(this)};if(a[n]=Error[n],h.item=function(t){return this[t]||null},h.contains=function(t){return t+="",u(this,t)!==-1},h.add=function(){var t,e=arguments,n=0,r=e.length,i=!1;do t=e[n]+"",u(this,t)===-1&&(this.push(t),i=!0);while(++n<r);i&&this._updateClassName()},h.remove=function(){var t,e,n=arguments,r=0,i=n.length,s=!1;do for(t=n[r]+"",e=u(this,t);e!==-1;)this.splice(e,1),s=!0,e=u(this,t);while(++r<i);s&&this._updateClassName()},h.toggle=function(t,e){t+="";var n=this.contains(t),r=n?e!==!0&&"remove":e!==!1&&"add";return r&&this[r](t),e===!0||e===!1?e:!n},h.toString=function(){return this.join(" ")},i.defineProperty){var d={get:c,enumerable:!0,configurable:!0};try{i.defineProperty(r,e,d)}catch(f){f.number===-2146823252&&(d.enumerable=!1,i.defineProperty(r,e,d))}}else i[n].__defineGetter__&&r.__defineGetter__(e,c)}}(window.self))},function(t,e){},function(t,e){(function(e){function n(t,e,n){function r(e){var n=p,r=_;return p=_=void 0,x=e,y=t.apply(r,n)}function s(t){return x=t,g=setTimeout(h,e),S?r(t):y}function o(t){var n=t-b,r=t-x,i=e-n;return O?k(i,v-r):i}function l(t){var n=t-b,r=t-x;return void 0===b||n>=e||n<0||O&&r>=v}function h(){var t=E();return l(t)?c(t):void(g=setTimeout(h,o(t)))}function c(t){return g=void 0,T&&p?r(t):(p=_=void 0,y)}function d(){void 0!==g&&clearTimeout(g),x=0,p=b=_=g=void 0}function f(){return void 0===g?y:c(E())}function m(){var t=E(),n=l(t);if(p=arguments,_=this,b=t,n){if(void 0===g)return s(b);if(O)return g=setTimeout(h,e),r(b)}return void 0===g&&(g=setTimeout(h,e)),y}var p,_,v,y,g,b,x=0,S=!1,O=!1,T=!0;if("function"!=typeof t)throw new TypeError(u);return e=a(e)||0,i(n)&&(S=!!n.leading,O="maxWait"in n,v=O?w(a(n.maxWait)||0,e):v,T="trailing"in n?!!n.trailing:T),m.cancel=d,m.flush=f,m}function r(t,e,r){var s=!0,o=!0;if("function"!=typeof t)throw new TypeError(u);return i(r)&&(s="leading"in r?!!r.leading:s,o="trailing"in r?!!r.trailing:o),n(t,e,{leading:s,maxWait:e,trailing:o})}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return!!t&&"object"==typeof t}function o(t){return"symbol"==typeof t||s(t)&&b.call(t)==h}function a(t){if("number"==typeof t)return t;if(o(t))return l;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(c,"");var n=f.test(t);return n||m.test(t)?p(t.slice(2),n?2:8):d.test(t)?l:+t}var u="Expected a function",l=NaN,h="[object Symbol]",c=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,m=/^0o[0-7]+$/i,p=parseInt,_="object"==typeof e&&e&&e.Object===Object&&e,v="object"==typeof self&&self&&self.Object===Object&&self,y=_||v||Function("return this")(),g=Object.prototype,b=g.toString,w=Math.max,k=Math.min,E=function(){return y.Date.now()};t.exports=r}).call(e,function(){return this}())},function(t,e,n){(function(t){!function(e,n){t.exports=n()}(this,function(){"use strict";function e(){return mr.apply(null,arguments)}function n(t){mr=t}function r(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function i(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t){var e;for(e in t)return!1;return!0}function o(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function a(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function u(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l(t,e){for(var n in e)u(e,n)&&(t[n]=e[n]);return u(e,"toString")&&(t.toString=e.toString),u(e,"valueOf")&&(t.valueOf=e.valueOf),t}function h(t,e,n,r){return ve(t,e,n,r,!0).utc()}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function d(t){return null==t._pf&&(t._pf=c()),t._pf}function f(t){if(null==t._isValid){var e=d(t),n=pr.call(e.parsedDateParts,function(t){return null!=t}),r=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(r=r&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return r;t._isValid=r}return t._isValid}function m(t){var e=h(NaN);return null!=t?l(d(e),t):d(e).userInvalidated=!0,e}function p(t){return void 0===t}function _(t,e){var n,r,i;if(p(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),p(e._i)||(t._i=e._i),p(e._f)||(t._f=e._f),p(e._l)||(t._l=e._l),p(e._strict)||(t._strict=e._strict),p(e._tzm)||(t._tzm=e._tzm),p(e._isUTC)||(t._isUTC=e._isUTC),p(e._offset)||(t._offset=e._offset),p(e._pf)||(t._pf=d(e)),p(e._locale)||(t._locale=e._locale),_r.length>0)for(n in _r)r=_r[n],i=e[r],p(i)||(t[r]=i);return t}function v(t){_(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),vr===!1&&(vr=!0,e.updateOffset(this),vr=!1)}function y(t){return t instanceof v||null!=t&&null!=t._isAMomentObject}function g(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function b(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=g(e)),n}function w(t,e,n){var r,i=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),o=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&b(t[r])!==b(e[r]))&&o++;return o+s}function k(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function E(t,n){var r=!0;return l(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),r){for(var i,s=[],o=0;o<arguments.length;o++){if(i="","object"==typeof arguments[o]){i+="\n["+o+"] ";for(var a in arguments[0])i+=a+": "+arguments[0][a]+", ";i=i.slice(0,-2)}else i=arguments[o];s.push(i)}k(t+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function x(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),yr[t]||(k(n),yr[t]=!0)}function S(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function O(t){var e,n;for(n in t)e=t[n],S(e)?this[n]=e:this["_"+n]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function T(t,e){var n,r=l({},t);for(n in e)u(e,n)&&(i(t[n])&&i(e[n])?(r[n]={},l(r[n],t[n]),l(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)u(t,n)&&!u(e,n)&&i(t[n])&&(r[n]=l({},r[n]));return r}function M(t){null!=t&&this.set(t)}function N(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return S(r)?r.call(e,n):r}function R(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function D(){return this._invalidDate}function C(t){return this._ordinal.replace("%d",t)}function P(t,e,n,r){var i=this._relativeTime[n];return S(i)?i(t,e,n,r):i.replace(/%d/i,t)}function L(t,e){var n=this._relativeTime[t>0?"future":"past"];return S(n)?n(e):n.replace(/%s/i,e)}function A(t,e){var n=t.toLowerCase();Tr[n]=Tr[n+"s"]=Tr[e]=t}function j(t){return"string"==typeof t?Tr[t]||Tr[t.toLowerCase()]:void 0}function Y(t){var e,n,r={};for(n in t)u(t,n)&&(e=j(n),e&&(r[e]=t[n]));return r}function H(t,e){Mr[t]=e}function U(t){var e=[];for(var n in t)e.push({unit:n,priority:Mr[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}function I(t,n){return function(r){return null!=r?(B(this,t,r),e.updateOffset(this,n),this):F(this,t)}}function F(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function B(t,e,n){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](n)}function q(t){return t=j(t),S(this[t])?this[t]():this}function W(t,e){if("object"==typeof t){t=Y(t);for(var n=U(t),r=0;r<n.length;r++)this[n[r].unit](t[n[r].unit])}else if(t=j(t),S(this[t]))return this[t](e);return this}function G(t,e,n){var r=""+Math.abs(t),i=e-r.length,s=t>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function z(t,e,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),t&&(Cr[t]=i),e&&(Cr[e[0]]=function(){return G(i.apply(this,arguments),e[1],e[2])}),n&&(Cr[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function V(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Z(t){var e,n,r=t.match(Nr);for(e=0,n=r.length;e<n;e++)Cr[r[e]]?r[e]=Cr[r[e]]:r[e]=V(r[e]);return function(e){var i,s="";for(i=0;i<n;i++)s+=r[i]instanceof Function?r[i].call(e,t):r[i];return s}}function $(t,e){return t.isValid()?(e=J(e,t.localeData()),Dr[e]=Dr[e]||Z(e),Dr[e](t)):t.localeData().invalidDate()}function J(t,e){function n(t){return e.longDateFormat(t)||t}var r=5;for(Rr.lastIndex=0;r>=0&&Rr.test(t);)t=t.replace(Rr,n),Rr.lastIndex=0,r-=1;return t}function X(t,e,n){Jr[t]=S(e)?e:function(t,r){return t&&n?n:e}}function Q(t,e){return u(Jr,t)?Jr[t](e._strict,e._locale):new RegExp(K(t))}function K(t){return tt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,r,i){return e||n||r||i}))}function tt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function et(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(r=function(t,n){n[e]=b(t)}),n=0;n<t.length;n++)Xr[t[n]]=r}function nt(t,e){et(t,function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)})}function rt(t,e,n){null!=e&&u(Xr,t)&&Xr[t](e,n._a,n,t)}function it(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function st(t,e){return t?r(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||ai).test(e)?"format":"standalone"][t.month()]:this._months}function ot(t,e){return t?r(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[ai.test(e)?"format":"standalone"][t.month()]:this._monthsShort}function at(t,e,n){var r,i,s,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=h([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?"MMM"===e?(i=br.call(this._shortMonthsParse,o),i!==-1?i:null):(i=br.call(this._longMonthsParse,o),i!==-1?i:null):"MMM"===e?(i=br.call(this._shortMonthsParse,o),i!==-1?i:(i=br.call(this._longMonthsParse,o),i!==-1?i:null)):(i=br.call(this._longMonthsParse,o),i!==-1?i:(i=br.call(this._shortMonthsParse,o),i!==-1?i:null))}function ut(t,e,n){var r,i,s;if(this._monthsParseExact)return at.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=h([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function lt(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=b(e);else if(e=t.localeData().monthsParse(e),"number"!=typeof e)return t;return n=Math.min(t.date(),it(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function ht(t){return null!=t?(lt(this,t),e.updateOffset(this,!0),this):F(this,"Month")}function ct(){return it(this.year(),this.month())}function dt(t){return this._monthsParseExact?(u(this,"_monthsRegex")||mt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(u(this,"_monthsShortRegex")||(this._monthsShortRegex=hi),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function ft(t){return this._monthsParseExact?(u(this,"_monthsRegex")||mt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(u(this,"_monthsRegex")||(this._monthsRegex=ci),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function mt(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],s=[];for(e=0;e<12;e++)n=h([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),s.push(this.months(n,"")),s.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),s.sort(t),e=0;e<12;e++)r[e]=tt(r[e]),i[e]=tt(i[e]);for(e=0;e<24;e++)s[e]=tt(s[e]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function pt(t){return _t(t)?366:365}function _t(t){return t%4===0&&t%100!==0||t%400===0}function vt(){return _t(this.year())}function yt(t,e,n,r,i,s,o){var a=new Date(t,e,n,r,i,s,o);return t<100&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}function gt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function bt(t,e,n){var r=7+e-n,i=(7+gt(t,0,r).getUTCDay()-e)%7;return-i+r-1}function wt(t,e,n,r,i){var s,o,a=(7+n-r)%7,u=bt(t,r,i),l=1+7*(e-1)+a+u;return l<=0?(s=t-1,o=pt(s)+l):l>pt(t)?(s=t+1,o=l-pt(t)):(s=t,o=l),{year:s,dayOfYear:o}}function kt(t,e,n){var r,i,s=bt(t.year(),e,n),o=Math.floor((t.dayOfYear()-s-1)/7)+1;return o<1?(i=t.year()-1,r=o+Et(i,e,n)):o>Et(t.year(),e,n)?(r=o-Et(t.year(),e,n),i=t.year()+1):(i=t.year(),r=o),{week:r,year:i}}function Et(t,e,n){var r=bt(t,e,n),i=bt(t+1,e,n);return(pt(t)-r+i)/7}function xt(t){return kt(t,this._week.dow,this._week.doy).week}function St(){return this._week.dow}function Ot(){return this._week.doy}function Tt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Mt(t){var e=kt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Nt(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Rt(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Dt(t,e){return t?r(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:this._weekdays}function Ct(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Pt(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Lt(t,e,n){var r,i,s,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=h([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?"dddd"===e?(i=br.call(this._weekdaysParse,o),i!==-1?i:null):"ddd"===e?(i=br.call(this._shortWeekdaysParse,o),i!==-1?i:null):(i=br.call(this._minWeekdaysParse,o),i!==-1?i:null):"dddd"===e?(i=br.call(this._weekdaysParse,o),i!==-1?i:(i=br.call(this._shortWeekdaysParse,o),i!==-1?i:(i=br.call(this._minWeekdaysParse,o),i!==-1?i:null))):"ddd"===e?(i=br.call(this._shortWeekdaysParse,o),i!==-1?i:(i=br.call(this._weekdaysParse,o),i!==-1?i:(i=br.call(this._minWeekdaysParse,o),i!==-1?i:null))):(i=br.call(this._minWeekdaysParse,o),i!==-1?i:(i=br.call(this._weekdaysParse,o),i!==-1?i:(i=br.call(this._shortWeekdaysParse,o),i!==-1?i:null)))}function At(t,e,n){var r,i,s;if(this._weekdaysParseExact)return Lt.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=h([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function jt(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Nt(t,this.localeData()),this.add(t-e,"d")):e}function Yt(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Ht(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Rt(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Ut(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Bt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(u(this,"_weekdaysRegex")||(this._weekdaysRegex=vi),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function It(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Bt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=yi),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ft(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Bt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=gi),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Bt(){function t(t,e){return e.length-t.length}var e,n,r,i,s,o=[],a=[],u=[],l=[];for(e=0;e<7;e++)n=h([2e3,1]).day(e),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),s=this.weekdays(n,""),o.push(r),a.push(i),u.push(s),l.push(r),l.push(i),l.push(s);for(o.sort(t),a.sort(t),u.sort(t),l.sort(t),e=0;e<7;e++)a[e]=tt(a[e]),u[e]=tt(u[e]),l[e]=tt(l[e]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function qt(){return this.hours()%12||12}function Wt(){return this.hours()||24}function Gt(t,e){z(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function zt(t,e){return e._meridiemParse}function Vt(t){return"p"===(t+"").toLowerCase().charAt(0)}function Zt(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function $t(t){return t?t.toLowerCase().replace("_","-"):t}function Jt(t){for(var e,n,r,i,s=0;s<t.length;){for(i=$t(t[s]).split("-"),e=i.length,n=$t(t[s+1]),n=n?n.split("-"):null;e>0;){if(r=Xt(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&w(i,n,!0)>=e-1)break;e--}s++}return null}function Xt(e){var n=null;if(!xi[e]&&"undefined"!=typeof t&&t&&t.require)try{n=bi._abbr,t.require("./locale/"+e),Qt(n)}catch(r){}return xi[e]}function Qt(t,e){var n;return t&&(n=p(e)?ee(t):Kt(t,e),n&&(bi=n)),bi._abbr}function Kt(t,e){if(null!==e){var n=Ei;return e.abbr=t,null!=xi[t]?(x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=xi[t]._config):null!=e.parentLocale&&(null!=xi[e.parentLocale]?n=xi[e.parentLocale]._config:x("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),xi[t]=new M(T(n,e)),Qt(t),xi[t]}return delete xi[t],null}function te(t,e){if(null!=e){var n,r=Ei;null!=xi[t]&&(r=xi[t]._config),e=T(r,e),n=new M(e),n.parentLocale=xi[t],xi[t]=n,Qt(t)}else null!=xi[t]&&(null!=xi[t].parentLocale?xi[t]=xi[t].parentLocale:null!=xi[t]&&delete xi[t]);return xi[t]}function ee(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return bi;if(!r(t)){if(e=Xt(t))return e;t=[t]}return Jt(t)}function ne(){return gr(xi)}function re(t){var e,n=t._a;return n&&d(t).overflow===-2&&(e=n[Kr]<0||n[Kr]>11?Kr:n[ti]<1||n[ti]>it(n[Qr],n[Kr])?ti:n[ei]<0||n[ei]>24||24===n[ei]&&(0!==n[ni]||0!==n[ri]||0!==n[ii])?ei:n[ni]<0||n[ni]>59?ni:n[ri]<0||n[ri]>59?ri:n[ii]<0||n[ii]>999?ii:-1,d(t)._overflowDayOfYear&&(e<Qr||e>ti)&&(e=ti),d(t)._overflowWeeks&&e===-1&&(e=si),d(t)._overflowWeekday&&e===-1&&(e=oi),d(t).overflow=e),t}function ie(t){var e,n,r,i,s,o,a=t._i,u=Si.exec(a)||Oi.exec(a);if(u){for(d(t).iso=!0,e=0,n=Mi.length;e<n;e++)if(Mi[e][1].exec(u[1])){i=Mi[e][0],r=Mi[e][2]!==!1;break}if(null==i)return void(t._isValid=!1);if(u[3]){for(e=0,n=Ni.length;e<n;e++)if(Ni[e][1].exec(u[3])){s=(u[2]||" ")+Ni[e][0];break}if(null==s)return void(t._isValid=!1)}if(!r&&null!=s)return void(t._isValid=!1);if(u[4]){if(!Ti.exec(u[4]))return void(t._isValid=!1);o="Z"}t._f=i+(s||"")+(o||""),he(t)}else t._isValid=!1}function se(t){var n=Ri.exec(t._i);return null!==n?void(t._d=new Date((+n[1]))):(ie(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function oe(t,e,n){return null!=t?t:null!=e?e:n}function ae(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function ue(t){var e,n,r,i,s=[];if(!t._d){for(r=ae(t),t._w&&null==t._a[ti]&&null==t._a[Kr]&&le(t),t._dayOfYear&&(i=oe(t._a[Qr],r[Qr]),t._dayOfYear>pt(i)&&(d(t)._overflowDayOfYear=!0),n=gt(i,0,t._dayOfYear),t._a[Kr]=n.getUTCMonth(),t._a[ti]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=r[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[ei]&&0===t._a[ni]&&0===t._a[ri]&&0===t._a[ii]&&(t._nextDay=!0,t._a[ei]=0),t._d=(t._useUTC?gt:yt).apply(null,s),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[ei]=24)}}function le(t){var e,n,r,i,s,o,a,u;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(s=1,o=4,n=oe(e.GG,t._a[Qr],kt(ye(),1,4).year),r=oe(e.W,1),i=oe(e.E,1),(i<1||i>7)&&(u=!0)):(s=t._locale._week.dow,o=t._locale._week.doy,n=oe(e.gg,t._a[Qr],kt(ye(),s,o).year),r=oe(e.w,1),null!=e.d?(i=e.d,(i<0||i>6)&&(u=!0)):null!=e.e?(i=e.e+s,(e.e<0||e.e>6)&&(u=!0)):i=s),r<1||r>Et(n,s,o)?d(t)._overflowWeeks=!0:null!=u?d(t)._overflowWeekday=!0:(a=wt(n,r,i,s,o),t._a[Qr]=a.year,t._dayOfYear=a.dayOfYear)}function he(t){if(t._f===e.ISO_8601)return void ie(t);t._a=[],d(t).empty=!0;var n,r,i,s,o,a=""+t._i,u=a.length,l=0;for(i=J(t._f,t._locale).match(Nr)||[],n=0;n<i.length;n++)s=i[n],r=(a.match(Q(s,t))||[])[0],r&&(o=a.substr(0,a.indexOf(r)),o.length>0&&d(t).unusedInput.push(o),a=a.slice(a.indexOf(r)+r.length),l+=r.length),Cr[s]?(r?d(t).empty=!1:d(t).unusedTokens.push(s),rt(s,r,t)):t._strict&&!r&&d(t).unusedTokens.push(s);d(t).charsLeftOver=u-l,a.length>0&&d(t).unusedInput.push(a),t._a[ei]<=12&&d(t).bigHour===!0&&t._a[ei]>0&&(d(t).bigHour=void 0),d(t).parsedDateParts=t._a.slice(0),d(t).meridiem=t._meridiem,t._a[ei]=ce(t._locale,t._a[ei],t._meridiem),ue(t),re(t)}function ce(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(r=t.isPM(n),r&&e<12&&(e+=12),r||12!==e||(e=0),e):e}function de(t){var e,n,r,i,s;if(0===t._f.length)return d(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)s=0,e=_({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],he(e),f(e)&&(s+=d(e).charsLeftOver,s+=10*d(e).unusedTokens.length,d(e).score=s,(null==r||s<r)&&(r=s,n=e));l(t,n||e)}function fe(t){if(!t._d){var e=Y(t._i);t._a=a([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),ue(t)}}function me(t){var e=new v(re(pe(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function pe(t){var e=t._i,n=t._f;return t._locale=t._locale||ee(t._l),null===e||void 0===n&&""===e?m({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),y(e)?new v(re(e)):(r(n)?de(t):o(e)?t._d=e:n?he(t):_e(t),f(t)||(t._d=null),t))}function _e(t){var n=t._i;void 0===n?t._d=new Date(e.now()):o(n)?t._d=new Date(n.valueOf()):"string"==typeof n?se(t):r(n)?(t._a=a(n.slice(0),function(t){return parseInt(t,10)}),ue(t)):"object"==typeof n?fe(t):"number"==typeof n?t._d=new Date(n):e.createFromInputFallback(t)}function ve(t,e,n,o,a){var u={};return"boolean"==typeof n&&(o=n,n=void 0),(i(t)&&s(t)||r(t)&&0===t.length)&&(t=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=a,u._l=n,u._i=t,u._f=e,u._strict=o,me(u)}function ye(t,e,n,r){return ve(t,e,n,r,!1)}function ge(t,e){var n,i;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return ye();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}function be(){var t=[].slice.call(arguments,0);return ge("isBefore",t)}function we(){var t=[].slice.call(arguments,0);return ge("isAfter",t)}function ke(t){var e=Y(t),n=e.year||0,r=e.quarter||0,i=e.month||0,s=e.week||0,o=e.day||0,a=e.hour||0,u=e.minute||0,l=e.second||0,h=e.millisecond||0;this._milliseconds=+h+1e3*l+6e4*u+1e3*a*60*60,this._days=+o+7*s,this._months=+i+3*r+12*n,this._data={},this._locale=ee(),this._bubble()}function Ee(t){return t instanceof ke}function xe(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Se(t,e){z(t,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+G(~~(t/60),2)+e+G(~~t%60,2)})}function Oe(t,e){var n=(e||"").match(t)||[],r=n[n.length-1]||[],i=(r+"").match(Li)||["-",0,0],s=+(60*i[1])+b(i[2]);return"+"===i[0]?s:-s}function Te(t,n){var r,i;return n._isUTC?(r=n.clone(),i=(y(t)||o(t)?t.valueOf():ye(t).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),e.updateOffset(r,!1),r):ye(t).local()}function Me(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Ne(t,n){var r,i=this._offset||0;return this.isValid()?null!=t?("string"==typeof t?t=Oe(Vr,t):Math.abs(t)<16&&(t=60*t),!this._isUTC&&n&&(r=Me(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==t&&(!n||this._changeInProgress?Ge(this,Ie(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:Me(this):null!=t?this:NaN}function Re(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function De(t){return this.utcOffset(0,t)}function Ce(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Me(this),"m")),this}function Pe(){if(this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var t=Oe(zr,this._i);0===t?this.utcOffset(0,!0):this.utcOffset(Oe(zr,this._i))}return this}function Le(t){return!!this.isValid()&&(t=t?ye(t).utcOffset():0,(this.utcOffset()-t)%60===0)}function Ae(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function je(){if(!p(this._isDSTShifted))return this._isDSTShifted;var t={};if(_(t,this),t=pe(t),t._a){var e=t._isUTC?h(t._a):ye(t._a);this._isDSTShifted=this.isValid()&&w(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ye(){return!!this.isValid()&&!this._isUTC}function He(){return!!this.isValid()&&this._isUTC}function Ue(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Ie(t,e){var n,r,i,s=t,o=null;return Ee(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(s={},e?s[e]=t:s.milliseconds=t):(o=Ai.exec(t))?(n="-"===o[1]?-1:1,s={y:0,d:b(o[ti])*n,h:b(o[ei])*n,m:b(o[ni])*n,s:b(o[ri])*n,ms:b(xe(1e3*o[ii]))*n}):(o=ji.exec(t))?(n="-"===o[1]?-1:1,s={y:Fe(o[2],n),M:Fe(o[3],n),w:Fe(o[4],n),d:Fe(o[5],n),h:Fe(o[6],n),m:Fe(o[7],n),s:Fe(o[8],n)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(i=qe(ye(s.from),ye(s.to)),s={},s.ms=i.milliseconds,s.M=i.months),r=new ke(s),Ee(t)&&u(t,"_locale")&&(r._locale=t._locale),r}function Fe(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Be(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function qe(t,e){var n;return t.isValid()&&e.isValid()?(e=Te(e,t),t.isBefore(e)?n=Be(t,e):(n=Be(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function We(t,e){return function(n,r){var i,s;return null===r||isNaN(+r)||(x(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),n="string"==typeof n?+n:n,i=Ie(n,r),Ge(this,i,t),this}}function Ge(t,n,r,i){var s=n._milliseconds,o=xe(n._days),a=xe(n._months);t.isValid()&&(i=null==i||i,s&&t._d.setTime(t._d.valueOf()+s*r),o&&B(t,"Date",F(t,"Date")+o*r),a&&lt(t,F(t,"Month")+a*r),i&&e.updateOffset(t,o||a))}function ze(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Ve(t,n){var r=t||ye(),i=Te(r,this).startOf("day"),s=e.calendarFormat(this,i)||"sameElse",o=n&&(S(n[s])?n[s].call(this,r):n[s]);return this.format(o||this.localeData().calendar(s,this,ye(r)))}function Ze(){return new v(this)}function $e(t,e){var n=y(t)?t:ye(t);return!(!this.isValid()||!n.isValid())&&(e=j(p(e)?"millisecond":e),"millisecond"===e?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())}function Je(t,e){var n=y(t)?t:ye(t);return!(!this.isValid()||!n.isValid())&&(e=j(p(e)?"millisecond":e),"millisecond"===e?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())}function Xe(t,e,n,r){return r=r||"()",("("===r[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===r[1]?this.isBefore(e,n):!this.isAfter(e,n))}function Qe(t,e){var n,r=y(t)?t:ye(t);return!(!this.isValid()||!r.isValid())&&(e=j(e||"millisecond"),"millisecond"===e?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))}function Ke(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function tn(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function en(t,e,n){var r,i,s,o;return this.isValid()?(r=Te(t,this),r.isValid()?(i=6e4*(r.utcOffset()-this.utcOffset()),e=j(e),"year"===e||"month"===e||"quarter"===e?(o=nn(this,r),"quarter"===e?o/=3:"year"===e&&(o/=12)):(s=this-r,o="second"===e?s/1e3:"minute"===e?s/6e4:"hour"===e?s/36e5:"day"===e?(s-i)/864e5:"week"===e?(s-i)/6048e5:s),n?o:g(o)):NaN):NaN}function nn(t,e){var n,r,i=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(i,"months");
return e-s<0?(n=t.clone().add(i-1,"months"),r=(e-s)/(s-n)):(n=t.clone().add(i+1,"months"),r=(e-s)/(n-s)),-(i+r)||0}function rn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function sn(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?S(Date.prototype.toISOString)?this.toDate().toISOString():$(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):$(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function on(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=$(this,t);return this.localeData().postformat(n)}function an(t,e){return this.isValid()&&(y(t)&&t.isValid()||ye(t).isValid())?Ie({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function un(t){return this.from(ye(),t)}function ln(t,e){return this.isValid()&&(y(t)&&t.isValid()||ye(t).isValid())?Ie({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function hn(t){return this.to(ye(),t)}function cn(t){var e;return void 0===t?this._locale._abbr:(e=ee(t),null!=e&&(this._locale=e),this)}function dn(){return this._locale}function fn(t){switch(t=j(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function mn(t){return t=j(t),void 0===t||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function pn(){return this._d.valueOf()-6e4*(this._offset||0)}function _n(){return Math.floor(this.valueOf()/1e3)}function vn(){return new Date(this.valueOf())}function yn(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function gn(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function bn(){return this.isValid()?this.toISOString():null}function wn(){return f(this)}function kn(){return l({},d(this))}function En(){return d(this).overflow}function xn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Sn(t,e){z(0,[t,t.length],0,e)}function On(t){return Rn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Tn(t){return Rn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Mn(){return Et(this.year(),1,4)}function Nn(){var t=this.localeData()._week;return Et(this.year(),t.dow,t.doy)}function Rn(t,e,n,r,i){var s;return null==t?kt(this,r,i).year:(s=Et(t,r,i),e>s&&(e=s),Dn.call(this,t,e,n,r,i))}function Dn(t,e,n,r,i){var s=wt(t,e,n,r,i),o=gt(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Cn(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Pn(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function Ln(t,e){e[ii]=b(1e3*("0."+t))}function An(){return this._isUTC?"UTC":""}function jn(){return this._isUTC?"Coordinated Universal Time":""}function Yn(t){return ye(1e3*t)}function Hn(){return ye.apply(null,arguments).parseZone()}function Un(t){return t}function In(t,e,n,r){var i=ee(),s=h().set(r,e);return i[n](s,t)}function Fn(t,e,n){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return In(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=In(t,r,n,"month");return i}function Bn(t,e,n,r){"boolean"==typeof t?("number"==typeof e&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,"number"==typeof e&&(n=e,e=void 0),e=e||"");var i=ee(),s=t?i._week.dow:0;if(null!=n)return In(e,(n+s)%7,r,"day");var o,a=[];for(o=0;o<7;o++)a[o]=In(e,(o+s)%7,r,"day");return a}function qn(t,e){return Fn(t,e,"months")}function Wn(t,e){return Fn(t,e,"monthsShort")}function Gn(t,e,n){return Bn(t,e,n,"weekdays")}function zn(t,e,n){return Bn(t,e,n,"weekdaysShort")}function Vn(t,e,n){return Bn(t,e,n,"weekdaysMin")}function Zn(){var t=this._data;return this._milliseconds=Zi(this._milliseconds),this._days=Zi(this._days),this._months=Zi(this._months),t.milliseconds=Zi(t.milliseconds),t.seconds=Zi(t.seconds),t.minutes=Zi(t.minutes),t.hours=Zi(t.hours),t.months=Zi(t.months),t.years=Zi(t.years),this}function $n(t,e,n,r){var i=Ie(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function Jn(t,e){return $n(this,t,e,1)}function Xn(t,e){return $n(this,t,e,-1)}function Qn(t){return t<0?Math.floor(t):Math.ceil(t)}function Kn(){var t,e,n,r,i,s=this._milliseconds,o=this._days,a=this._months,u=this._data;return s>=0&&o>=0&&a>=0||s<=0&&o<=0&&a<=0||(s+=864e5*Qn(er(a)+o),o=0,a=0),u.milliseconds=s%1e3,t=g(s/1e3),u.seconds=t%60,e=g(t/60),u.minutes=e%60,n=g(e/60),u.hours=n%24,o+=g(n/24),i=g(tr(o)),a+=i,o-=Qn(er(i)),r=g(a/12),a%=12,u.days=o,u.months=a,u.years=r,this}function tr(t){return 4800*t/146097}function er(t){return 146097*t/4800}function nr(t){var e,n,r=this._milliseconds;if(t=j(t),"month"===t||"year"===t)return e=this._days+r/864e5,n=this._months+tr(e),"month"===t?n:n/12;switch(e=this._days+Math.round(er(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}}function rr(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12)}function ir(t){return function(){return this.as(t)}}function sr(t){return t=j(t),this[t+"s"]()}function or(t){return function(){return this._data[t]}}function ar(){return g(this.days()/7)}function ur(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function lr(t,e,n){var r=Ie(t).abs(),i=hs(r.as("s")),s=hs(r.as("m")),o=hs(r.as("h")),a=hs(r.as("d")),u=hs(r.as("M")),l=hs(r.as("y")),h=i<cs.s&&["s",i]||s<=1&&["m"]||s<cs.m&&["mm",s]||o<=1&&["h"]||o<cs.h&&["hh",o]||a<=1&&["d"]||a<cs.d&&["dd",a]||u<=1&&["M"]||u<cs.M&&["MM",u]||l<=1&&["y"]||["yy",l];return h[2]=e,h[3]=+t>0,h[4]=n,ur.apply(null,h)}function hr(t){return void 0===t?hs:"function"==typeof t&&(hs=t,!0)}function cr(t,e){return void 0!==cs[t]&&(void 0===e?cs[t]:(cs[t]=e,!0))}function dr(t){var e=this.localeData(),n=lr(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function fr(){var t,e,n,r=ds(this._milliseconds)/1e3,i=ds(this._days),s=ds(this._months);t=g(r/60),e=g(t/60),r%=60,t%=60,n=g(s/12),s%=12;var o=n,a=s,u=i,l=e,h=t,c=r,d=this.asSeconds();return d?(d<0?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(u?u+"D":"")+(l||h||c?"T":"")+(l?l+"H":"")+(h?h+"M":"")+(c?c+"S":""):"P0D"}var mr,pr;pr=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};var _r=e.momentProperties=[],vr=!1,yr={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var gr;gr=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)u(t,e)&&n.push(e);return n};var br,wr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},kr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Er="Invalid date",xr="%d",Sr=/\d{1,2}/,Or={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Tr={},Mr={},Nr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Rr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Dr={},Cr={},Pr=/\d/,Lr=/\d\d/,Ar=/\d{3}/,jr=/\d{4}/,Yr=/[+-]?\d{6}/,Hr=/\d\d?/,Ur=/\d\d\d\d?/,Ir=/\d\d\d\d\d\d?/,Fr=/\d{1,3}/,Br=/\d{1,4}/,qr=/[+-]?\d{1,6}/,Wr=/\d+/,Gr=/[+-]?\d+/,zr=/Z|[+-]\d\d:?\d\d/gi,Vr=/Z|[+-]\d\d(?::?\d\d)?/gi,Zr=/[+-]?\d+(\.\d{1,3})?/,$r=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Jr={},Xr={},Qr=0,Kr=1,ti=2,ei=3,ni=4,ri=5,ii=6,si=7,oi=8;br=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},z("M",["MM",2],"Mo",function(){return this.month()+1}),z("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),z("MMMM",0,0,function(t){return this.localeData().months(this,t)}),A("month","M"),H("month",8),X("M",Hr),X("MM",Hr,Lr),X("MMM",function(t,e){return e.monthsShortRegex(t)}),X("MMMM",function(t,e){return e.monthsRegex(t)}),et(["M","MM"],function(t,e){e[Kr]=b(t)-1}),et(["MMM","MMMM"],function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[Kr]=i:d(n).invalidMonth=t});var ai=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,ui="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),li="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),hi=$r,ci=$r;z("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),z(0,["YY",2],0,function(){return this.year()%100}),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,!0],0,"year"),A("year","y"),H("year",1),X("Y",Gr),X("YY",Hr,Lr),X("YYYY",Br,jr),X("YYYYY",qr,Yr),X("YYYYYY",qr,Yr),et(["YYYYY","YYYYYY"],Qr),et("YYYY",function(t,n){n[Qr]=2===t.length?e.parseTwoDigitYear(t):b(t)}),et("YY",function(t,n){n[Qr]=e.parseTwoDigitYear(t)}),et("Y",function(t,e){e[Qr]=parseInt(t,10)}),e.parseTwoDigitYear=function(t){return b(t)+(b(t)>68?1900:2e3)};var di=I("FullYear",!0);z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),H("week",5),H("isoWeek",5),X("w",Hr),X("ww",Hr,Lr),X("W",Hr),X("WW",Hr,Lr),nt(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=b(t)});var fi={dow:0,doy:6};z("d",0,"do","day"),z("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),z("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),z("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),H("day",11),H("weekday",11),H("isoWeekday",11),X("d",Hr),X("e",Hr),X("E",Hr),X("dd",function(t,e){return e.weekdaysMinRegex(t)}),X("ddd",function(t,e){return e.weekdaysShortRegex(t)}),X("dddd",function(t,e){return e.weekdaysRegex(t)}),nt(["dd","ddd","dddd"],function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:d(n).invalidWeekday=t}),nt(["d","e","E"],function(t,e,n,r){e[r]=b(t)});var mi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),pi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),_i="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),vi=$r,yi=$r,gi=$r;z("H",["HH",2],0,"hour"),z("h",["hh",2],0,qt),z("k",["kk",2],0,Wt),z("hmm",0,0,function(){return""+qt.apply(this)+G(this.minutes(),2)}),z("hmmss",0,0,function(){return""+qt.apply(this)+G(this.minutes(),2)+G(this.seconds(),2)}),z("Hmm",0,0,function(){return""+this.hours()+G(this.minutes(),2)}),z("Hmmss",0,0,function(){return""+this.hours()+G(this.minutes(),2)+G(this.seconds(),2)}),Gt("a",!0),Gt("A",!1),A("hour","h"),H("hour",13),X("a",zt),X("A",zt),X("H",Hr),X("h",Hr),X("HH",Hr,Lr),X("hh",Hr,Lr),X("hmm",Ur),X("hmmss",Ir),X("Hmm",Ur),X("Hmmss",Ir),et(["H","HH"],ei),et(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),et(["h","hh"],function(t,e,n){e[ei]=b(t),d(n).bigHour=!0}),et("hmm",function(t,e,n){var r=t.length-2;e[ei]=b(t.substr(0,r)),e[ni]=b(t.substr(r)),d(n).bigHour=!0}),et("hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[ei]=b(t.substr(0,r)),e[ni]=b(t.substr(r,2)),e[ri]=b(t.substr(i)),d(n).bigHour=!0}),et("Hmm",function(t,e,n){var r=t.length-2;e[ei]=b(t.substr(0,r)),e[ni]=b(t.substr(r))}),et("Hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[ei]=b(t.substr(0,r)),e[ni]=b(t.substr(r,2)),e[ri]=b(t.substr(i))});var bi,wi=/[ap]\.?m?\.?/i,ki=I("Hours",!0),Ei={calendar:wr,longDateFormat:kr,invalidDate:Er,ordinal:xr,ordinalParse:Sr,relativeTime:Or,months:ui,monthsShort:li,week:fi,weekdays:mi,weekdaysMin:_i,weekdaysShort:pi,meridiemParse:wi},xi={},Si=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Oi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ti=/Z|[+-]\d\d(?::?\d\d)?/,Mi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ni=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ri=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=E("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),e.ISO_8601=function(){};var Di=E("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ye.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:m()}),Ci=E("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ye.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:m()}),Pi=function(){return Date.now?Date.now():+new Date};Se("Z",":"),Se("ZZ",""),X("Z",Vr),X("ZZ",Vr),et(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Oe(Vr,t)});var Li=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Ai=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,ji=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ie.fn=ke.prototype;var Yi=We(1,"add"),Hi=We(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ui=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});z(0,["gg",2],0,function(){return this.weekYear()%100}),z(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Sn("gggg","weekYear"),Sn("ggggg","weekYear"),Sn("GGGG","isoWeekYear"),Sn("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),H("weekYear",1),H("isoWeekYear",1),X("G",Gr),X("g",Gr),X("GG",Hr,Lr),X("gg",Hr,Lr),X("GGGG",Br,jr),X("gggg",Br,jr),X("GGGGG",qr,Yr),X("ggggg",qr,Yr),nt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=b(t)}),nt(["gg","GG"],function(t,n,r,i){n[i]=e.parseTwoDigitYear(t)}),z("Q",0,"Qo","quarter"),A("quarter","Q"),H("quarter",7),X("Q",Pr),et("Q",function(t,e){e[Kr]=3*(b(t)-1)}),z("D",["DD",2],"Do","date"),A("date","D"),H("date",9),X("D",Hr),X("DD",Hr,Lr),X("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),et(["D","DD"],ti),et("Do",function(t,e){e[ti]=b(t.match(Hr)[0],10)});var Ii=I("Date",!0);z("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),H("dayOfYear",4),X("DDD",Fr),X("DDDD",Ar),et(["DDD","DDDD"],function(t,e,n){n._dayOfYear=b(t)}),z("m",["mm",2],0,"minute"),A("minute","m"),H("minute",14),X("m",Hr),X("mm",Hr,Lr),et(["m","mm"],ni);var Fi=I("Minutes",!1);z("s",["ss",2],0,"second"),A("second","s"),H("second",15),X("s",Hr),X("ss",Hr,Lr),et(["s","ss"],ri);var Bi=I("Seconds",!1);z("S",0,0,function(){return~~(this.millisecond()/100)}),z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,function(){return 10*this.millisecond()}),z(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),z(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),z(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),z(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),z(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),H("millisecond",16),X("S",Fr,Pr),X("SS",Fr,Lr),X("SSS",Fr,Ar);var qi;for(qi="SSSS";qi.length<=9;qi+="S")X(qi,Wr);for(qi="S";qi.length<=9;qi+="S")et(qi,Ln);var Wi=I("Milliseconds",!1);z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var Gi=v.prototype;Gi.add=Yi,Gi.calendar=Ve,Gi.clone=Ze,Gi.diff=en,Gi.endOf=mn,Gi.format=on,Gi.from=an,Gi.fromNow=un,Gi.to=ln,Gi.toNow=hn,Gi.get=q,Gi.invalidAt=En,Gi.isAfter=$e,Gi.isBefore=Je,Gi.isBetween=Xe,Gi.isSame=Qe,Gi.isSameOrAfter=Ke,Gi.isSameOrBefore=tn,Gi.isValid=wn,Gi.lang=Ui,Gi.locale=cn,Gi.localeData=dn,Gi.max=Ci,Gi.min=Di,Gi.parsingFlags=kn,Gi.set=W,Gi.startOf=fn,Gi.subtract=Hi,Gi.toArray=yn,Gi.toObject=gn,Gi.toDate=vn,Gi.toISOString=sn,Gi.toJSON=bn,Gi.toString=rn,Gi.unix=_n,Gi.valueOf=pn,Gi.creationData=xn,Gi.year=di,Gi.isLeapYear=vt,Gi.weekYear=On,Gi.isoWeekYear=Tn,Gi.quarter=Gi.quarters=Cn,Gi.month=ht,Gi.daysInMonth=ct,Gi.week=Gi.weeks=Tt,Gi.isoWeek=Gi.isoWeeks=Mt,Gi.weeksInYear=Nn,Gi.isoWeeksInYear=Mn,Gi.date=Ii,Gi.day=Gi.days=jt,Gi.weekday=Yt,Gi.isoWeekday=Ht,Gi.dayOfYear=Pn,Gi.hour=Gi.hours=ki,Gi.minute=Gi.minutes=Fi,Gi.second=Gi.seconds=Bi,Gi.millisecond=Gi.milliseconds=Wi,Gi.utcOffset=Ne,Gi.utc=De,Gi.local=Ce,Gi.parseZone=Pe,Gi.hasAlignedHourOffset=Le,Gi.isDST=Ae,Gi.isLocal=Ye,Gi.isUtcOffset=He,Gi.isUtc=Ue,Gi.isUTC=Ue,Gi.zoneAbbr=An,Gi.zoneName=jn,Gi.dates=E("dates accessor is deprecated. Use date instead.",Ii),Gi.months=E("months accessor is deprecated. Use month instead",ht),Gi.years=E("years accessor is deprecated. Use year instead",di),Gi.zone=E("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Re),Gi.isDSTShifted=E("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",je);var zi=Gi,Vi=M.prototype;Vi.calendar=N,Vi.longDateFormat=R,Vi.invalidDate=D,Vi.ordinal=C,Vi.preparse=Un,Vi.postformat=Un,Vi.relativeTime=P,Vi.pastFuture=L,Vi.set=O,Vi.months=st,Vi.monthsShort=ot,Vi.monthsParse=ut,Vi.monthsRegex=ft,Vi.monthsShortRegex=dt,Vi.week=xt,Vi.firstDayOfYear=Ot,Vi.firstDayOfWeek=St,Vi.weekdays=Dt,Vi.weekdaysMin=Pt,Vi.weekdaysShort=Ct,Vi.weekdaysParse=At,Vi.weekdaysRegex=Ut,Vi.weekdaysShortRegex=It,Vi.weekdaysMinRegex=Ft,Vi.isPM=Vt,Vi.meridiem=Zt,Qt("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===b(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),e.lang=E("moment.lang is deprecated. Use moment.locale instead.",Qt),e.langData=E("moment.langData is deprecated. Use moment.localeData instead.",ee);var Zi=Math.abs,$i=ir("ms"),Ji=ir("s"),Xi=ir("m"),Qi=ir("h"),Ki=ir("d"),ts=ir("w"),es=ir("M"),ns=ir("y"),rs=or("milliseconds"),is=or("seconds"),ss=or("minutes"),os=or("hours"),as=or("days"),us=or("months"),ls=or("years"),hs=Math.round,cs={s:45,m:45,h:22,d:26,M:11},ds=Math.abs,fs=ke.prototype;fs.abs=Zn,fs.add=Jn,fs.subtract=Xn,fs.as=nr,fs.asMilliseconds=$i,fs.asSeconds=Ji,fs.asMinutes=Xi,fs.asHours=Qi,fs.asDays=Ki,fs.asWeeks=ts,fs.asMonths=es,fs.asYears=ns,fs.valueOf=rr,fs._bubble=Kn,fs.get=sr,fs.milliseconds=rs,fs.seconds=is,fs.minutes=ss,fs.hours=os,fs.days=as,fs.weeks=ar,fs.months=us,fs.years=ls,fs.humanize=dr,fs.toISOString=fr,fs.toString=fr,fs.toJSON=fr,fs.locale=cn,fs.localeData=dn,fs.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",fr),fs.lang=Ui,z("X",0,0,"unix"),z("x",0,0,"valueOf"),X("x",Gr),X("X",Zr),et("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),et("x",function(t,e,n){n._d=new Date(b(t))}),e.version="2.15.0",n(ye),e.fn=zi,e.min=be,e.max=we,e.now=Pi,e.utc=h,e.unix=Yn,e.months=qn,e.isDate=o,e.locale=Qt,e.invalid=m,e.duration=Ie,e.isMoment=y,e.weekdays=Gn,e.parseZone=Hn,e.localeData=ee,e.isDuration=Ee,e.monthsShort=Wn,e.weekdaysMin=Vn,e.defineLocale=Kt,e.updateLocale=te,e.locales=ne,e.weekdaysShort=zn,e.normalizeUnits=j,e.relativeTimeRounding=hr,e.relativeTimeThreshold=cr,e.calendarFormat=ze,e.prototype=zi;var ms=e;return ms})}).call(e,n(17)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}])});
},{}]},{},[1]);
