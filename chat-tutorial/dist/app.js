(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _chat = require('@livelyvideo/chat');

var _chat2 = _interopRequireDefault(_chat);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
Set up the chat instance

Params:
	- html element
	-
	user: users username, should be unique to the user
	room: room name
	apiHost: lively chat api
	websocketHost: lively ws api
	url: the company's auth url, which should access livelyvideo to create an access token for the user
**/
var chat = void 0;
function createChat(user, el) {
	if (chat) {
		chat.destroy();
	}
	chat = new _chat2.default(el, {
		user: user,
		room: 'blt',
		apiHost: 'https://qa.livelyvideo.tv',
		websocketHost: 'wss://ws-qa.livelyvideo.tv',
		authUrl: 'https://qa.livelyvideo.tv/auth/v1/lively'
	});
}

document.querySelector('#pickuser').onsubmit = function (e) {
	e.preventDefault();
	createChat(e.target.querySelector('[name=username]').value, document.querySelector('.chat'));
	e.target.setAttribute('disabled', true);
	e.target.querySelector('[name=username]').value = '';
};

},{"@livelyvideo/chat":2}],2:[function(require,module,exports){
(function (global){
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.LivelyChat=t()}}(function(){var define,module,exports;return function t(e,n,r){function s(o,a){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return s(n?n:t)},h,h.exports,t,e,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.LivelyAuthClient=e():t.LivelyAuthClient=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var s=n[r]={exports:{},id:r,loaded:!1};return t[r].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=n(2),h=r(l),c=n(3),d=r(c),f=n(43),m=r(f),p=n(46),_=r(p),v=n(47),y=r(v),g=n(48),b=r(g),w=n(49),k=r(w),E=n(50),x=r(E),O=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(!t)throw new Error("chat configuration is required");if(!t.room)throw new Error("chat room is required");if(!t.apiHost)throw new Error("chat REST API server host is required");if(0!==t.apiHost.indexOf("https://")&&0!==t.apiHost.indexOf("http://")&&0!==t.apiHost.indexOf("//"))throw new Error("chat REST API server host must start with ws://, wss:// or //");if(!t.websocketHost)throw new Error("chat websocket server host is required");var o=null;if(0===t.websocketHost.indexOf("wss://"))o=!0;else if(0===t.websocketHost.indexOf("ws://"))o=!1;else if(0!==t.websocketHost.indexOf("//"))throw new Error("chat websocket server host must start with ws://, wss:// or //");var a=t.apiHost+"/chat/v1/rooms/"+t.room+"/command",u=t.apiHost+"/chat/v1/manifests/say/rooms/"+t.room+"/version",l=t.websocketHost+"/chat/ws/v1/rooms/"+t.room,c="/chat/http/v1/rooms/"+t.room;if(r._rosterUrl=t.apiHost+"/chat/v1/rooms/"+t.room+"/roster",r._changeroleUrl=t.apiHost+"/chat/v1/rooms/"+t.room+"/changeroles",r._routeStart=t.apiHost+"/chat/v1",n){if(!n.url)throw new Error("authorization configuration url is required");r._auth=new h["default"]("chat",n.url,n.options)}var f=new y["default"](u);if(r._parser=f,r._auth&&(r._http=new x["default"](r._auth),r._command=new _["default"](r._auth,a)),window.WebSocket)r._socketInterface=new d["default"](l,r._auth);else{var p="";p=o===!0?"https://"+t.websocketHost.slice(6)+c:o===!1?"http://"+t.websocketHost.slice(5)+c:""+t.websocketHost+c,r._socketInterface=new m["default"](p,r._auth)}return r._socketInterface.on("error",function(t){r.emit("error",t)}),r._socketInterface.on("ready",function(){r.emit("ready")}),r._historyEmitted=!1,r._socketInterface.on("unauthorized",function(){if(r._historyEmitted)return void r.emit("me",null);var t=function(){r.emit("me",null)},e=window.setTimeout(function(){t(),t=null},3e3);r.once("history",function(){t&&t(),window.clearTimeout(e)})}),r._socketInterface.on("disconnect",function(){r._historyEmitted=!1,r.emit("disconnect")}),r._socketInterface.on("message",function(t){f.parseMessage(t,r._emitCommand.bind(r))}),r._sayDedupe=[],r._me=null,r._room=null,r}return o(e,t),a(e,[{key:"getDefaultAvatars",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this._httpCheckAuth(),this._http.execGet(this._routeStart+"/avatars",t)}},{key:"setDefaultUserAvatar",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execPatch(this._routeStart+"/users/"+t+"/avatar",{"default":e},n)}},{key:"getUserEmoticons",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._httpCheckAuth(),this._http.execGet(this._routeStart+"/users/"+t+"/emoticons",e)}},{key:"getAllEmoticons",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execGet(this._routeStart+"/rooms/"+t+"/users/"+e+"/emoticons/all",n)}},{key:"postUserEmoticon",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execPost(this._routeStart+"/users/"+t+"/emoticons",e,n)}},{key:"deleteUserEmoticon",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execDelete(this._routeStart+"/users/"+t+"/emoticons/"+e,n)}},{key:"getUserAvatar",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._httpCheckAuth(),this._http.execGet(this._routeStart+"/users/"+t+"/avatar",e)}},{key:"putUserAvatar",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execPut(this._routeStart+"/users/"+t+"/avatar",e,n)}},{key:"getUser",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._httpCheckAuth(),this._http.execGet(this._routeStart+"/users/"+t,e)}},{key:"patchUser",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execPatch(this._routeStart+"/users/"+t,e,n)}},{key:"getRoomUser",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execGet(this._routeStart+"/rooms/"+t+"/users/"+e,n)}},{key:"patchRoomUser",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};this._httpCheckAuth(),this._http.execPatch(this._routeStart+"/rooms/"+t+"/users/"+e,n,r)}},{key:"getRoom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._httpCheckAuth(),this._http.execGet(this._routeStart+"/rooms/"+t,e)}},{key:"patchRoom",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._httpCheckAuth(),this._http.execPatch(this._routeStart+"/rooms/"+t,e,n)}},{key:"getChangeroles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._auth)throw new Error("Changeroles calls require authentication");var e=Object.assign({},{limit:100,role:""},t);return new k["default"](this._auth,this._changeroleUrl,e)}},{key:"getRoster",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._auth)throw new Error("Roster calls require authentication");var e=Object.assign({},{limit:100,role:""},t);return new b["default"](this._auth,this._rosterUrl,e)}},{key:"command",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!this._auth)throw new Error("Command calls require authentication");this._command.run(t,function(t,r){if(t)return void n(t);for(var s=r.length-1;s>=0;s--)r[s].data&&r[s].data&&r[s].data.command&&(e._parser.parseMessage(r[s].data.command,e._emitCommand.bind(e)),r.splice(0,1));n(null,r)})}},{key:"destroy",value:function(){this._auth.destroy(),this._socketInterface.destroy()}},{key:"_emitCommand",value:function(t,e,n){if(t)return void this.emit("error",t);switch(e){case"SAY":this._emitSay(n);break;case"ME":this._me=n,this.emit("me",n);break;case"ROOM":this._room=n,this.emit("room",n);break;case"MESSAGE":this.emit("message",n);break;case"HISTORY":this.emit("history",n),this._historyEmitted=!0;break;case"DELETE":this.emit("delete",n)}}},{key:"_emitSay",value:function(t){for(var e=this._sayDedupe.length-1;e>=0;e--)if(this._sayDedupe[e]===t.id)return;this._me&&this._me.ignore&&-1!==this._me.ignore.indexOf(t.actor.id)&&(t.ignore=!0),this._sayDedupe.length>50&&this._sayDedupe.splice(0,1),this._sayDedupe.push(t.id),this.emit("chat",t)}},{key:"_httpCheckAuth",value:function(){if(!this._auth)throw new Error("Http calls require authentication")}}]),e}(u.EventEmitter);e["default"]=O},function(t){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function i(t){return void 0===t}t.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var e,r,o,a,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(r=this._events[t],i(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(s(r))for(a=Array.prototype.slice.call(arguments,1),l=r.slice(),o=l.length,u=0;o>u;u++)l[u].apply(this,a);return!0},e.prototype.addListener=function(t,r){var o;if(!n(r))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(r.listener)?r.listener:r),this._events[t]?s(this._events[t])?this._events[t].push(r):this._events[t]=[this._events[t],r]:this._events[t]=r,s(this._events[t])&&!this._events[t].warned&&(o=i(this._maxListeners)?e.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,e){function r(){this.removeListener(t,r),s||(s=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var s=!1;return r.listener=e,this.on(t,r),this},e.prototype.removeListener=function(t,e){var r,i,o,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(r)){for(a=o;a-->0;)if(r[a]===e||r[a].listener&&r[a].listener===e){i=a;break}if(0>i)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},e.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},e.listenerCount=function(t,e){return t.listenerCount(e)}},function(module,exports,__webpack_require__){!function(t,e){module.exports=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var s=n[r]={exports:{},id:r,loaded:!1};return t[r].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n	value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _events = __webpack_require__(1);\n\n__webpack_require__(2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar defaultOptions = {\n	timeout: 5000,\n	headers: {}\n};\n\nvar defaultHeaders = {\n	Accept: 'application/json'\n};\n\n/**\n * @class Lively Video authorization client\n */\n\nvar Authorization = function (_EventEmitter) {\n	_inherits(Authorization, _EventEmitter);\n\n	/**\n  * @constructs Authorization\n  * @param {string} scope - Scope of the authorization\n  * @param {string} url - Url of your company's authorization endpoint. The expected response is {'token': 'unique token', 'expire': 'RFC3339 expiration time'}\n  * @param {Config} [options] - Configurable options for the Authorization class\n  * @param {string} [options.timeout=5000] - Authenticated request timeout in milliseconds. Timed out errors will return an Error('authorization: timeout')\n  * @param {Object} [options.headers] - Additional headers to use for the request\n  * @throws Will throw an error if no scope or no url is provided\n  */\n	function Authorization(scope, url) {\n		var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n		_classCallCheck(this, Authorization);\n\n		var _this = _possibleConstructorReturn(this, (Authorization.__proto__ || Object.getPrototypeOf(Authorization)).call(this));\n\n		if (!scope) {\n			throw new Error('scope is required');\n		}\n\n		if (!url) {\n			throw new Error('authorization server url is required');\n		}\n\n		// require parameters\n		_this._options = Object.assign({}, defaultOptions, options);\n\n		if (url.indexOf('?') === -1) {\n			_this._url = url + '?scope=' + scope;\n		} else {\n			_this._url = url + '&scope=' + scope;\n		}\n\n		// internal\n		_this._stopped = false;\n		_this._fatalError = null;\n		_this._token = null;\n		_this._retries = [0, // immediate\n		200, // 200ms\n		1000, // 1s\n		3000 // 3s\n		];\n		_this._retry = 0;\n		_this._autorefresh = null;\n\n		_this._headers = Object.assign({}, defaultHeaders, options.headers);\n		_this._retryRequest();\n		return _this;\n	}\n\n	_createClass(Authorization, [{\n		key: 'destroy',\n		value: function destroy() {\n			this._stopped = true;\n		}\n\n		/**\n   * This callback will execute a request which requires the auth token.\n   * @callback cbRequest\n   * @param {Error} e - Returns a timeout error (Error('authorization: timeout')) or a fatal error\n   * @param {string} token - The authorization bearer token to use in Lively Video API requests\n   */\n\n		/**\n   * Execute a request which requires an authorization token when the token is available\n   * @param {cbRequest} cb - The callback that executes the request.\n   */\n\n	}, {\n		key: 'request',\n		value: function request() {\n			var _this2 = this;\n\n			var cb = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n			if (this._fatalError) {\n				cb(this._fatalError);\n				return;\n			}\n\n			if (this._token !== null) {\n				cb(null, this._token);\n				return;\n			}\n\n			var done = false;\n			var pass = function pass() {\n				if (!done) {\n					done = true;\n					cb(null, _this2._token);\n				}\n			};\n\n			var timeout = function timeout() {\n				if (!done) {\n					done = true;\n					cb(new Error('authorization: timeout'));\n				}\n			};\n\n			var t = setTimeout(function () {\n				_this2.removeListener('ready', pass);\n				timeout();\n			}, this._options.timeout);\n\n			this.once('ready', function () {\n				clearTimeout(t);\n				pass();\n			});\n		}\n\n		/**\n   * Should be called if a Lively Video endpoint returned an 401 error. A new request will be issued to the authorization server's endpoint to get a new token.\n   */\n\n	}, {\n		key: 'refreshToken',\n		value: function refreshToken() {\n			var _this3 = this;\n\n			if (this._token !== null) {\n				if (this._autorefresh !== null) {\n					clearTimeout(this._autorefresh);\n					this._autorefresh = null;\n				}\n				this._token = null;\n				(function () {\n					_this3._retryRequest();\n				})();\n			}\n		}\n\n		/**\n   * Make a request or retry after the current retry number's delay\n   * @ignore\n   */\n\n	}, {\n		key: '_retryRequest',\n		value: function _retryRequest() {\n			var _this4 = this;\n\n			var retry = this._retries[this._retry];\n			if (retry) {\n				setTimeout(function () {\n					_this4._makeRequest();\n				}, retry);\n				return;\n			}\n			this._makeRequest();\n		}\n\n		/**\n   * Make a request to the authorization server.\n   * @ignore\n   */\n\n	}, {\n		key: '_makeRequest',\n		value: function _makeRequest() {\n			var _this5 = this;\n\n			fetch(this._url, {\n				credentials: 'same-origin',\n				headers: this._headers\n			}).then(function (response) {\n				if (response.status >= 200 && response.status < 300) {\n					return response.json();\n				}\n				if (response.status === 401) {\n					var e = new Error('authorization: unauthorized');\n					e.fatal = true;\n					throw e;\n				}\n				if (response.status === 403) {\n					var _e = new Error('authorization: forbidden');\n					_e.fatal = true;\n					throw _e;\n				}\n				throw new Error('authorization: non-200 response code from auth server');\n			}).then(function (json) {\n				_this5._token = json.token;\n				_this5._retry = 0;\n				_this5.emit('ready', {\n					token: json.token\n				});\n\n				// re-request a minute before expiration\n				var retryAfter = new Date(json.expire).getTime() - Date.now() - 60 * 1000;\n				_this5._autorefresh = setTimeout(function () {\n					_this5._autorefresh = null;\n					if (!_this5._stopped) {\n						_this5._retryRequest();\n					}\n				}, retryAfter);\n			}).catch(function (e) {\n				_this5._token = null;\n\n				if (e.fatal) {\n					_this5._fatalError = e;\n					return;\n				}\n\n				_this5._retryRequest();\n				if (_this5._retry < _this5._retries.length - 1) {\n					_this5._retry++;\n				}\n			});\n		}\n	}]);\n\n	return Authorization;\n}(_events.EventEmitter);\n\nexports.default = Authorization;\nmodule.exports = exports['default'];\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.js\n// module id = 0\n// module chunks = 0\n//# sourceURL=webpack:///./src/index.js?")},function(module,exports){eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/events/events.js\n// module id = 1\n// module chunks = 0\n//# sourceURL=webpack:///./~/events/events.js?")},function(module,exports){eval("(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = (xhr.getAllResponseHeaders() || '').trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/whatwg-fetch/fetch.js\n// module id = 2\n// module chunks = 0\n//# sourceURL=webpack:///./~/whatwg-fetch/fetch.js?");

}])})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(4),l=r(u),h=n(1),c={MSG:"msg",FIN:"fin"},d={MSG:"msg",ERR:"err",FIN:"fin",ACK:"ack"},f={DEFAULT:"/",AUTH:"/auth"},m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(!t)throw new Error("url is required for chat");return r._auth=n,r._socket=new l["default"](t,"livelyWebsocket",{automaticOpen:!1,reconnectOnError:!0,reconnectOnCleanClose:!0,randomRatio:!1}),r._retries=[0,200,1e3,2e3],r._retry=0,r.ready=!1,r.authed=!1,r._socket.onopen=function(){r._auth&&r._authenticate()},r._socket.onclose=function(t){r.emit("disconnect"),r.ready=!1,r.authed=!1,1003===t.code&&(r._socket._options.reconnectOnCleanClose=!1,r._socket._options.reconnectOnError=!1,r._socket.close(),r.emit("error",new Error("Requested room does not exist")))},r._socket.onmessage=function(t){r._onmessage(t)},r._socket.open(),r}return o(e,t),a(e,[{key:"destroy",value:function(){this._socket._options.reconnectOnCleanClose=!1,this._socket._options.reconnectOnError=!1,this._socket.close()}},{key:"_authenticate",value:function(){var t=this;this._auth.request(function(e,n){return e?void t.emit("error",e):(t._send(t._socket,c.MSG,f.AUTH,n),void t.once("_authed",function(e){return e?void t.emit("unauthorized"):void 0}))})}},{key:"_send",value:function(t,e,n,r){if(t&&t.readyState===t.OPEN){var s=e+" "+n+" "+r;this._socket.send(s)}}},{key:"_onmessage",value:function(t){var e=t.data;if(e){var n=e.indexOf(" "),r=e.indexOf(" ",n+1),s=e.slice(0,n),i=e.slice(n+1,r),o=e.slice(r+1);if(s===d.MSG){var a=void 0;try{a=JSON.parse(o)}catch(u){return void this.emit("error",u)}return void this.emit("message",a)}return this.ready||s!==d.ACK||i!==f.DEFAULT||(this.emit("ready"),this.ready=!0,this._auth||this.emit("unauthorized")),this.authed||s!==d.FIN?s===d.ERR?void this.emit("error",new Error(o)):void 0:void(i===f.AUTH&&(this.emit("_authed"),this.authed=!0))}}}]),e}(h.EventEmitter);e["default"]=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){return Math.random()*(e-t)+t}Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=r(i),a=n(42),u=r(a),l={debug:!1,automaticOpen:!0,reconnectOnError:!1,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3,maxReconnectAttempts:null,randomRatio:3,binaryType:"blob",reconnectOnCleanClose:!1},h=function c(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];u["default"](this,c),this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.open=function(){var t=e._socket=new WebSocket(e._url,e._protocols);t.binaryType=e._options.binaryType,e._options.maxReconnectAttempts&&e._options.maxReconnectAttempts<e._reconnectAttempts||(e._syncState(),t.onmessage=e._onmessage.bind(e),t.onopen=e._onopen.bind(e),t.onclose=e._onclose.bind(e),t.onerror=e._onerror.bind(e))},this.send=function(t){e._socket&&e._socket.readyState===WebSocket.OPEN&&0===e._messageQueue.length?e._socket.send(t):e._messageQueue.push(t)},this.close=function(t,n){"undefined"==typeof t&&(t=1e3),e._socket&&e._socket.close(t,n)},this._onmessage=function(t){e.onmessage&&e.onmessage(t)},this._onopen=function(t){e._syncState(),e._flushQueue(),e._reconnectAttempts=0,e.onopen&&e.onopen(t)},this._onclose=function(t){e._syncState(),e._debug("WebSocket: connection is broken",t),e.onclose&&e.onclose(t),e._tryReconnect(t)},this._onerror=function(t){e._socket.close(),e._debug("WebSocket: error",t),e.onerror&&e.onerror(t),e._options.reconnectOnError&&e._tryReconnect(t)},this._tryReconnect=function(t){(!t.wasClean||e._options.reconnectOnCleanClose)&&setTimeout(function(){(e.readyState===e.CLOSING||e.readyState===e.CLOSED)&&(e._reconnectAttempts++,e.open())},e._getTimeout())},this._flushQueue=function(){for(;0!==e._messageQueue.length;){var t=e._messageQueue.shift();e._socket.send(t)}},this._getTimeout=function(){var t=e._options.reconnectInterval*Math.pow(e._options.reconnectDecay,e._reconnectAttempts);return t=t>e._options.maxReconnectInterval?e._options.maxReconnectInterval:t,e._options.randomRatio?s(t/e._options.randomRatio,t):t},this._syncState=function(){e.readyState=e._socket.readyState},this._url=t,this._protocols=n,this._options=o["default"]({},l,r),this._messageQueue=[],this._reconnectAttempts=0,this.readyState=this.CONNECTING,this._debug="function"==typeof this._options.debug?this._options.debug:this._options.debug?console.log.bind(console):function(){},r.automaticOpen&&this.open()};e["default"]=h,t.exports=e["default"]},function(t,e,n){t.exports={"default":n(6),__esModule:!0}},function(t,e,n){n(7),t.exports=n(10).Object.assign},function(t,e,n){var r=n(8);r(r.S+r.F,"Object",{assign:n(23)})},function(t,e,n){var r=n(9),s=n(10),i=n(11),o=n(13),a="prototype",u=function(t,e,n){var l,h,c,d=t&u.F,f=t&u.G,m=t&u.S,p=t&u.P,_=t&u.B,v=t&u.W,y=f?s:s[e]||(s[e]={}),g=y[a],b=f?r:m?r[e]:(r[e]||{})[a];f&&(n=e);for(l in n)h=!d&&b&&void 0!==b[l],h&&l in y||(c=h?b[l]:n[l],y[l]=f&&"function"!=typeof b[l]?n[l]:_&&h?i(c,r):v&&b[l]==c?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[a]=t[a],e}(c):p&&"function"==typeof c?i(Function.call,c):c,p&&((y.virtual||(y.virtual={}))[l]=c,t&u.R&&g&&!g[l]&&o(g,l,c)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)},function(t,e,n){var r=n(12);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,s){return t.call(e,n,r,s)}}return function(){return t.apply(e,arguments)}}},function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(14),s=n(22);t.exports=n(18)?function(t,e,n){return r.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(15),s=n(17),i=n(21),o=Object.defineProperty;e.f=n(18)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),s)try{return o(t,e,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(16);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(18)&&!n(19)(function(){return 7!=Object.defineProperty(n(20)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(19)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(16),s=n(9).document,i=r(s)&&r(s.createElement);t.exports=function(t){return i?s.createElement(t):{}}},function(t,e,n){var r=n(16);t.exports=function(t,e){if(!r(t))return t;var n,s;if(e&&"function"==typeof(n=t.toString)&&!r(s=n.call(t)))return s;if("function"==typeof(n=t.valueOf)&&!r(s=n.call(t)))return s;if(!e&&"function"==typeof(n=t.toString)&&!r(s=n.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var r=n(24),s=n(39),i=n(40),o=n(41),a=n(28),u=Object.assign;t.exports=!u||n(19)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t){for(var e=o(t),n=arguments.length,u=1,l=s.f,h=i.f;n>u;)for(var c,d=a(arguments[u++]),f=l?r(d).concat(l(d)):r(d),m=f.length,p=0;m>p;)h.call(d,c=f[p++])&&(e[c]=d[c]);return e}:u},function(t,e,n){var r=n(25),s=n(38);t.exports=Object.keys||function(t){return r(t,s)}},function(t,e,n){var r=n(26),s=n(27),i=n(31)(!1),o=n(35)("IE_PROTO");t.exports=function(t,e){var n,a=s(t),u=0,l=[];for(n in a)n!=o&&r(a,n)&&l.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~i(l,n)||l.push(n));return l}},function(t){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,e,n){var r=n(28),s=n(30);t.exports=function(t){return r(s(t))}},function(t,e,n){var r=n(29);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(27),s=n(32),i=n(34);t.exports=function(t){return function(e,n,o){var a,u=r(e),l=s(u.length),h=i(o,l);if(t&&n!=n){for(;l>h;)if(a=u[h++],a!=a)return!0}else for(;l>h;h++)if((t||h in u)&&u[h]===n)return t||h||0;return!t&&-1}}},function(t,e,n){var r=n(33),s=Math.min;t.exports=function(t){return t>0?s(r(t),9007199254740991):0}},function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},function(t,e,n){var r=n(33),s=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),0>t?s(t+e,0):i(t,e)}},function(t,e,n){var r=n(36)("keys"),s=n(37);t.exports=function(t){return r[t]||(r[t]=s(t))}},function(t,e,n){var r=n(9),s="__core-js_shared__",i=r[s]||(r[s]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t){var e=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}},function(t){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(30);t.exports=function(t){return Object(r(t))}},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(44);var u=n(1),l=n(45),h=r(l),c=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(r._auth=n,!t)throw new Error("url is required for a command");return r._url=t,r._stopped=!0,r._connectionID=h["default"](),r._isConnected=!1,r._retry=0,r._retries=[0,300,1e3],r._run(),r}return o(e,t),a(e,[{key:"destroy",value:function(){this._stopped=!0}},{key:"_retryRun",value:function(t){var e=this;return t?(this._retry=0,void this._run()):(this._retry<this._retries.length-1&&this._retry++,void setTimeout(function(){e._run()},this._retries[this._retry]))}},{key:"_run",value:function(){var t=this;return this._auth?void this._auth.request(function(e,n){return e?void t._disconnected(e):void t._request(n)}):void this._request()}},{key:"_request",value:function(t){var e=this,n={Accept:"application/json","Content-Type":"application/json"};t&&(n.Authorization="Bearer "+t),fetch(this._url+"?cid="+this._connectionID,{method:"GET",headers:n}).then(function(t){if(200===t.status)return t.json();if(401===t.status){e._auth.refreshToken();var n=new Error("chat: unauthorized");throw n.retry=!0,n}if(503===t.status){var r=new Error("chat: server unavailable");throw r.retry=!0,r}if(404===t.status)throw new Error("Room does not exist");if(403===t.status)throw e.emit("unauthorized"),new Error("chat: forbidden");if(409===t.status){e._connectionID=h["default"]();var s=new Error("chat: connection id conflict");throw s.ignore=!0,s.retry=!0,s}throw new Error("non 200 response")}).then(function(t){e._connected();for(var n=0;n<t.length;n++)e.emit("message",t[n]);e._stopped||e._retryRun(!0)})["catch"](function(t){e._disconnected(t),t.retry&&(e._stopped||e._retryRun())})}},{key:"_disconnected",value:function(t){t&&(t.ignore||this.emit("error",t)),this._isConnected&&(this.emit("disconnect"),this._isConnected=!1)}},{key:"_connected",value:function(){this._isConnected||(this.emit("ready"),this._isConnected=!0)}}]),e}(u.EventEmitter);e["default"]=c},function(){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return p.iterable&&(e[Symbol.iterator]=function(){return e}),e}function s(t){this.map={},t instanceof s?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function o(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function a(t){var e=new FileReader;return e.readAsArrayBuffer(t),o(e)}function u(t){var e=new FileReader;return e.readAsText(t),o(e)}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(p.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(p.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(p.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(t){if(!p.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob?(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(a)},this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=i(this);return t?t:Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function c(t,e){e=e||{};var n=e.body;if(c.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",(e.headers||!this.headers)&&(this.headers=new s(e.headers)),this.method=h(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),s=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(s))}}),e}function f(t){var e=new s,n=(t.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),s=n.join(":").trim();e.append(r,s)}),e}function m(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof s?e.headers:new s(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var p={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};s.prototype.append=function(t,r){t=e(t),r=n(r);var s=this.map[t];s||(s=[],this.map[t]=s),s.push(r)},s.prototype["delete"]=function(t){delete this.map[e(t)]},s.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},s.prototype.getAll=function(t){return this.map[e(t)]||[]},s.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},s.prototype.set=function(t,r){this.map[e(t)]=[n(r)]},s.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)},s.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},s.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},s.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},p.iterable&&(s.prototype[Symbol.iterator]=s.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this)},l.call(c.prototype),l.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var v=[301,302,303,307,308];m.redirect=function(t,e){if(-1===v.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.Headers=s,t.Request=c,t.Response=m,t.fetch=function(t,e){return new Promise(function(n,r){function s(){return"responseURL"in o?o.responseURL:/^X-Request-URL:/m.test(o.getAllResponseHeaders())?o.getResponseHeader("X-Request-URL"):void 0}var i;i=c.prototype.isPrototypeOf(t)&&!e?t:new c(t,e);var o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:f(o),url:s()},e="response"in o?o.response:o.responseText;n(new m(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&p.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var n=new Array(16),r=function(){for(var t,e=0;16>e;e++)0===(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n},s=function(t,e){var n=e||0,r=i;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]},i=[],o={},a=0;256>a;a++)i[a]=(a+256).toString(16).substr(1),o[i[a]]=a;var u=function(){var t=r();return t[6]=15&t[6]|64,t[8]=63&t[8]|128,s(t)};e["default"]=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(44);var i=function(){function t(e,n){if(r(this,t),!e)throw new Error("auth is required for a command");if(this._auth=e,!n)throw new Error("url is required for a command");this._url=n,this._retries=[0,300,1e3]}return s(t,[{key:"run",value:function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!t)return void r(new Error("command is required for a command"));var s=-1,e=function i(){n._auth.request(function(e,o){return e?void r(e):void fetch(n._url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o},body:JSON.stringify({command:t})}).then(function(t){if(t.status>=200&&t.status<300)return 204===t.status?null:t.json();if(401===t.status){n._auth.refreshToken();var e=new Error("chat: unauthorized");throw e.retry=!0,e}if(503===t.status){var r=new Error("chat: server unavailable");throw r.retry=!0,r}if(403===t.status)throw new Error("chat: forbidden");if(t.status>=400&&t.status<500)return t.json();throw new Error("chat: non-200 response code from chat server")}).then(function(t){return t&&t.messages?void r(null,t.messages):void r()})["catch"](function(t){if(t.retry&&s<n._retries.length-1){s++;var e=n._retries[s];return e?void setTimeout(i,e):void i()}r(t)})})};e()}}]),t}();e["default"]=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(44);var i={INDEX:"index",TYPE:"type",NESTED_ITEMS:"nestedItems"},o={KEY:"key",VARS:"vars"},a={NESTED_DATA_ARRAY:"nestedDataArray",NESTED_ARRAY:"nestedArray",NESTED_OBJECT:"nestedObject",TEMPLATE:"template",INT_ARRAY:"intArray",STRING_ARRAY:"stringArray",STRING:"string",INT:"int",BOOL:"bool"},u={emoticons:"emoticon",links:"link",mentions:"mention",tags:"tag"},l=function(){function t(e){if(r(this,t),!e)throw new Error("url is required for parser");this._baseUrl=e,this._manifests={},this._buffer={},this._fetchingManifests={}}return s(t,[{key:"parseMessage",value:function(t,e){var n=this;t&&t instanceof Array&&!(t.length<2)||e(new Error("Invalid data format"));var r=t[0],s=t[1];this._parseMessage(r,s,function(t,s){return t?void e(t):("HISTORY"===r&&s.messages.length&&s.messages.forEach(function(t,e){n._parseMessage("SAY",t,function(t,n){t||(s.messages[e]=n)})}),void e(null,r,s))})}},{key:"_addManifest",value:function(t){this._manifests[t.version]=t}},{key:"_parseMessage",value:function(t,e,n){var r=this,s=e[0],i=void 0;return this._manifests[s]?this._manifests[s].manifests[t]?(i=this._parse(s,this._manifests[s].manifests[t],e),void n(null,i)):void n(new Error("manifest does not have "+t+" command")):(this._buffer[s]?this._buffer[s].push([e,t,n]):this._buffer[s]=[[e,t,n]],void(this._fetchingManifests[s]!==!0&&(this._fetchingManifests[s]=!0,fetch(this._baseUrl+"/"+s).then(function(t){if(200!==t.status)throw new Error("chat: non-200 response code from chat server");return t.json()}).then(function(t){for(r._addManifest(t);r._buffer[t.version].length>0;){var e=r._buffer[t.version].shift();i=r._parse(t.version,t.manifests[e[1]],e[0]),e[2](null,i)}})["catch"](function(t){r._buffer[s]=[],n(t)}))))}},{key:"_parse",value:function(t,e,n){for(var r=this,s={},l=Object.keys(e),h=function(h){var c=l[h],d=e[c],f=n[d[i.INDEX]];if(null===f)return s[c]=null,"continue";var m=void 0;switch(d[i.TYPE]){case a.NESTED_ARRAY:m=[];for(var p=0;p<f.length;p++)m.push(r._parse(t,d[i.NESTED_ITEMS],f[p]));break;case a.NESTED_OBJECT:m=r._parse(t,d[i.NESTED_ITEMS],f);break;case a.TEMPLATE:m=r._parseTemplate(t,f[d[i.NESTED_ITEMS][o.KEY].index],f[d[i.NESTED_ITEMS][o.VARS].index]);break;default:m=f}m&&m instanceof Array&&m.forEach(function(t){var e=t;e.positions&&e.positions instanceof Array&&e.positions.forEach(function(t){u[c]&&(e.type=u[c],s.positions||(s.positions={}),s.positions[t]=e)})}),s[c]=m},c=0;c<l.length;c++){{h(c)}}return s}},{key:"_parseTemplate",value:function(t,e,n){var r=new h(this._manifests[t].templates[e],n);return r.getParsed()}}]),t}(),h=function(){function t(e,n){return r(this,t),this._parsed="",n&&0!==n.length?void(e&&0!==e.length&&(this._parsed="",this._varPos=0,this._curr="",this._template=e,this._templateLength=e.length,this._vars=n,this._next=this._startState.bind(this),this._pos=0,this._skipNext=!1)):void(this._parsed=e)}return s(t,[{key:"getParsed",value:function(){if(this._parsed)return this._parsed;for(var t=0;t<this._templateLength;t++)this._skipNext?this._skipNext=!1:(this._pos=t,this._curr=this._template[t],this._next=this._next().bind(this));return this._parsed}},{key:"_startDelim",value:function(){return this._pos>=this._templateLength-1?!1:"{"===this._curr&&"{"===this._template[this._pos+1]?(this._skipNext=!0,!0):!1}},{key:"_endDelim",value:function(){return this._pos>=this._templateLength-1?!1:"}"===this._curr&&"}"===this._template[this._pos+1]?(this._skipNext=!0,!0):!1}},{key:"_startState",value:function(){return this._startDelim()?this._midState:(this._parsed+=this._curr,this._startState)}},{key:"_midState",value:function(){return"n"===this._curr?this._endState:(this._parsed=this._parsed+"{{"+this._curr,this._startState)}},{key:"_endState",value:function(){return this._endDelim()?(this._parsed+=this._vars[this._varPos],this._varPos++):this._parsed+=this._curr,this._startState}}]),t}();e["default"]=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(44);var i=function(){function t(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r(this,t),!e)throw new Error("auth is required for a roster request");if(this._auth=e,!n)throw new Error("url is required for a roster request");this._url=n,this._nextParams="",this._options=s,this._retries=[0,300,1e3]}return s(t,[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=this._url+"?";this._options.limit&&(e=e+"limit="+this._options.limit+"&"),this._options.role&&(e=e+"role="+this._options.role+"&"),this._request(e,t)}},{key:"next",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(this._nextParams){var e=this._url+"?"+this._nextParams;return void this._request(e,t)}t(null,[])}},{key:"_request",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=-1,s=function i(){e._auth.request(function(s,o){return s?void n(s):void fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o}}).then(function(t){if(200===t.status)return t.json();if(401===t.status){var e=new Error("chat: unauthorized");throw e.retry=!0,e}if(503===t.status){var n=new Error("chat: server unavailable");throw n.retry=!0,n}if(403===t.status)throw new Error("chat: forbidden");throw new Error("chat: non-200 response code from chat server")}).then(function(t){e._nextParams=t&&t._links&&t._links.next&&t._links.next.href?t._links.next.href.split("?")[1]:"",n(null,t.users)})["catch"](function(t){if(t.retry&&r<e._retries.length-1){r++;var s=e._retries[r];return s?void setTimeout(i,s):void i()}n(t)})})};s()}}]),t}();e["default"]=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(44);var i=function(){function t(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r(this,t),!e)throw new Error("auth is required for a changerole request");if(this._auth=e,!n)throw new Error("url is required for a changerole request");this._url=n,this._nextParams="",this._options=s,this._retries=[0,300,1e3]}return s(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=this._url+"?";this._options.limit&&(e=e+"limit="+this._options.limit+"&"),this._request(e,t)}},{key:"next",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(this._nextParams){var e=this._url+"?"+this._nextParams;return void this._request(e,t)}t(null,[])}},{key:"_request",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=-1,s=function i(){e._auth.request(function(s,o){return s?void n(s):void fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o}}).then(function(t){if(200===t.status)return t.json();if(401===t.status){var e=new Error("chat: unauthorized");throw e.retry=!0,e}if(503===t.status){var n=new Error("chat: server unavailable");throw n.retry=!0,n}if(403===t.status)throw new Error("chat: forbidden");throw new Error("chat: non-200 response code from chat server")}).then(function(t){e._nextParams=t&&t._links&&t._links.next&&t._links.next.href?t._links.next.href.split("?")[1]:"",n(null,t.changeroles)})["catch"](function(t){if(t.retry&&r<e._retries.length-1){r++;var s=e._retries[r];return s?void setTimeout(i,s):void i()}n(t)})})};s()}}]),t}();e["default"]=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(44);var i=function(){function t(e){if(r(this,t),!e)throw new Error("auth is required for an http request");

this._auth=e,this._retries=[0,300,1e3]}return s(t,[{key:"execGet",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!t)throw new Error("url is required for an http request");this._execute("GET",t,null,e)}},{key:"execPut",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!t)throw new Error("url is required for an http request");this._execute("PUT",t,e,n)}},{key:"execPost",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!t)throw new Error("url is required for an http request");this._execute("POST",t,e,n)}},{key:"execPatch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!t)throw new Error("url is required for an http request");this._execute("PATCH",t,e,n)}},{key:"execDelete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!t)throw new Error("url is required for an http request");this._execute("DELETE",t,e)}},{key:"_execute",value:function(t,e,n){var r=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i={method:t,headers:{Accept:"application/json","Content-Type":"application/json"}};n&&(i.body=JSON.stringify(n));var o=-1,a=function u(){r._auth.request(function(t,n){return t?void s(t):(i.headers.Authorization="Bearer "+n,void fetch(e,i).then(function(t){if(t.status>=200&&t.status<300)return t.json();if(401===t.status){var e=new Error("chat: unauthorized");throw e.retry=!0,e}if(503===t.status){var n=new Error("chat: server unavailable");throw n.retry=!0,n}if(403===t.status)throw new Error("chat: forbidden");throw new Error("chat: non-200 response code from chat server")}).then(function(t){s(null,t)})["catch"](function(t){if(t.retry&&o<r._retries.length-1){o++;var e=r._retries[o];return e?void setTimeout(u,e):void u()}s(t)}))})};a()}}]),t}();e["default"]=i}])})},{}],2:[function(){"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?!function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,r=arguments.length;for(n=0;r>n;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}():!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",r=t.Element[n],s=Object,i=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},u=function(t,e){if(""===e)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(t,e)},l=function(t){for(var e=i.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],r=0,s=n.length;s>r;r++)this.push(n[r]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},h=l[n]=[],c=function(){return new l(this)};if(a[n]=Error[n],h.item=function(t){return this[t]||null},h.contains=function(t){return t+="",-1!==u(this,t)},h.add=function(){var t,e=arguments,n=0,r=e.length,s=!1;do t=e[n]+"",-1===u(this,t)&&(this.push(t),s=!0);while(++n<r);s&&this._updateClassName()},h.remove=function(){var t,e,n=arguments,r=0,s=n.length,i=!1;do for(t=n[r]+"",e=u(this,t);-1!==e;)this.splice(e,1),i=!0,e=u(this,t);while(++r<s);i&&this._updateClassName()},h.toggle=function(t,e){t+="";var n=this.contains(t),r=n?e!==!0&&"remove":e!==!1&&"add";return r&&this[r](t),e===!0||e===!1?e:!n},h.toString=function(){return this.join(" ")},s.defineProperty){var d={get:c,enumerable:!0,configurable:!0};try{s.defineProperty(r,e,d)}catch(f){-2146823252===f.number&&(d.enumerable=!1,s.defineProperty(r,e,d))}}else s[n].__defineGetter__&&r.__defineGetter__(e,c)}}(window.self))},{}],3:[function(t,e){(function(t){function n(t,e,n){function r(e){var n=p,r=_;return p=_=void 0,x=e,y=t.apply(r,n)}function i(t){return x=t,g=setTimeout(h,e),O?r(t):y}function o(t){var n=t-b,r=t-x,s=e-n;return S?k(s,v-r):s}function l(t){var n=t-b,r=t-x;return void 0===b||n>=e||0>n||S&&r>=v}function h(){var t=E();return l(t)?c(t):void(g=setTimeout(h,o(t)))}function c(t){return g=void 0,T&&p?r(t):(p=_=void 0,y)}function d(){void 0!==g&&clearTimeout(g),x=0,p=b=_=g=void 0}function f(){return void 0===g?y:c(E())}function m(){var t=E(),n=l(t);if(p=arguments,_=this,b=t,n){if(void 0===g)return i(b);if(S)return g=setTimeout(h,e),r(b)}return void 0===g&&(g=setTimeout(h,e)),y}var p,_,v,y,g,b,x=0,O=!1,S=!1,T=!0;if("function"!=typeof t)throw new TypeError(u);return e=a(e)||0,s(n)&&(O=!!n.leading,S="maxWait"in n,v=S?w(a(n.maxWait)||0,e):v,T="trailing"in n?!!n.trailing:T),m.cancel=d,m.flush=f,m}function r(t,e,r){var i=!0,o=!0;if("function"!=typeof t)throw new TypeError(u);return s(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),n(t,e,{leading:i,maxWait:e,trailing:o})}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function i(t){return!!t&&"object"==typeof t}function o(t){return"symbol"==typeof t||i(t)&&b.call(t)==h}function a(t){if("number"==typeof t)return t;if(o(t))return l;if(s(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=s(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(c,"");var n=f.test(t);return n||m.test(t)?p(t.slice(2),n?2:8):d.test(t)?l:+t}var u="Expected a function",l=0/0,h="[object Symbol]",c=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,m=/^0o[0-7]+$/i,p=parseInt,_="object"==typeof t&&t&&t.Object===Object&&t,v="object"==typeof self&&self&&self.Object===Object&&self,y=_||v||Function("return this")(),g=Object.prototype,b=g.toString,w=Math.max,k=Math.min,E=function(){return y.Date.now()};e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,e,n){!function(t,r){"object"==typeof n&&"undefined"!=typeof e?e.exports=r():"function"==typeof define&&define.amd?define(r):t.moment=r()}(this,function(){"use strict";function n(){return pr.apply(null,arguments)}function r(t){pr=t}function s(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function i(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function o(t){var e;for(e in t)return!1;return!0}function a(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function u(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h(t,e){for(var n in e)l(e,n)&&(t[n]=e[n]);return l(e,"toString")&&(t.toString=e.toString),l(e,"valueOf")&&(t.valueOf=e.valueOf),t}function c(t,e,n,r){return ye(t,e,n,r,!0).utc()}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function f(t){return null==t._pf&&(t._pf=d()),t._pf}function m(t){if(null==t._isValid){var e=f(t),n=_r.call(e.parsedDateParts,function(t){return null!=t}),r=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(r=r&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return r;t._isValid=r}return t._isValid}function p(t){var e=c(0/0);return null!=t?h(f(e),t):f(e).userInvalidated=!0,e}function _(t){return void 0===t}function v(t,e){var n,r,s;if(_(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),_(e._i)||(t._i=e._i),_(e._f)||(t._f=e._f),_(e._l)||(t._l=e._l),_(e._strict)||(t._strict=e._strict),_(e._tzm)||(t._tzm=e._tzm),_(e._isUTC)||(t._isUTC=e._isUTC),_(e._offset)||(t._offset=e._offset),_(e._pf)||(t._pf=f(e)),_(e._locale)||(t._locale=e._locale),vr.length>0)for(n in vr)r=vr[n],s=e[r],_(s)||(t[r]=s);return t}function y(t){v(this,t),this._d=new Date(null!=t._d?t._d.getTime():0/0),yr===!1&&(yr=!0,n.updateOffset(this),yr=!1)}function g(t){return t instanceof y||null!=t&&null!=t._isAMomentObject}function b(t){return 0>t?Math.ceil(t)||0:Math.floor(t)}function w(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=b(e)),n}function k(t,e,n){var r,s=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),o=0;for(r=0;s>r;r++)(n&&t[r]!==e[r]||!n&&w(t[r])!==w(e[r]))&&o++;return o+i}function E(t){n.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function x(t,e){var r=!0;return h(function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,t),r){for(var s,i=[],o=0;o<arguments.length;o++){if(s="","object"==typeof arguments[o]){s+="\n["+o+"] ";for(var a in arguments[0])s+=a+": "+arguments[0][a]+", ";s=s.slice(0,-2)}else s=arguments[o];i.push(s)}E(t+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),r=!1}return e.apply(this,arguments)},e)}function O(t,e){null!=n.deprecationHandler&&n.deprecationHandler(t,e),gr[t]||(E(e),gr[t]=!0)}function S(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function T(t){var e,n;for(n in t)e=t[n],S(e)?this[n]=e:this["_"+n]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function M(t,e){var n,r=h({},t);for(n in e)l(e,n)&&(i(t[n])&&i(e[n])?(r[n]={},h(r[n],t[n]),h(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)l(t,n)&&!l(e,n)&&i(t[n])&&(r[n]=h({},r[n]));return r}function R(t){null!=t&&this.set(t)}function D(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return S(r)?r.call(e,n):r}function C(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function N(){return this._invalidDate}function P(t){return this._ordinal.replace("%d",t)}function j(t,e,n,r){var s=this._relativeTime[n];return S(s)?s(t,e,n,r):s.replace(/%d/i,t)}function L(t,e){var n=this._relativeTime[t>0?"future":"past"];return S(n)?n(e):n.replace(/%s/i,e)}function A(t,e){var n=t.toLowerCase();Mr[n]=Mr[n+"s"]=Mr[e]=t}function Y(t){return"string"==typeof t?Mr[t]||Mr[t.toLowerCase()]:void 0}function H(t){var e,n,r={};for(n in t)l(t,n)&&(e=Y(n),e&&(r[e]=t[n]));return r}function F(t,e){Rr[t]=e}function U(t){var e=[];for(var n in t)e.push({unit:n,priority:Rr[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}function I(t,e){return function(r){return null!=r?(q(this,t,r),n.updateOffset(this,e),this):B(this,t)}}function B(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():0/0}function q(t,e,n){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](n)}function W(t){return t=Y(t),S(this[t])?this[t]():this}function G(t,e){if("object"==typeof t){t=H(t);for(var n=U(t),r=0;r<n.length;r++)this[n[r].unit](t[n[r].unit])}else if(t=Y(t),S(this[t]))return this[t](e);return this}function z(t,e,n){var r=""+Math.abs(t),s=e-r.length,i=t>=0;return(i?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+r}function V(t,e,n,r){var s=r;"string"==typeof r&&(s=function(){return this[r]()}),t&&(Pr[t]=s),e&&(Pr[e[0]]=function(){return z(s.apply(this,arguments),e[1],e[2])}),n&&(Pr[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)})}function Z(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Q(t){var e,n,r=t.match(Dr);for(e=0,n=r.length;n>e;e++)r[e]=Pr[r[e]]?Pr[r[e]]:Z(r[e]);return function(e){var s,i="";for(s=0;n>s;s++)i+=r[s]instanceof Function?r[s].call(e,t):r[s];return i}}function $(t,e){return t.isValid()?(e=J(e,t.localeData()),Nr[e]=Nr[e]||Q(e),Nr[e](t)):t.localeData().invalidDate()}function J(t,e){function n(t){return e.longDateFormat(t)||t}var r=5;for(Cr.lastIndex=0;r>=0&&Cr.test(t);)t=t.replace(Cr,n),Cr.lastIndex=0,r-=1;return t}function X(t,e,n){Jr[t]=S(e)?e:function(t){return t&&n?n:e}}function K(t,e){return l(Jr,t)?Jr[t](e._strict,e._locale):new RegExp(tt(t))}function tt(t){return et(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,r,s){return e||n||r||s}))}function et(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function nt(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(r=function(t,n){n[e]=w(t)}),n=0;n<t.length;n++)Xr[t[n]]=r}function rt(t,e){nt(t,function(t,n,r,s){r._w=r._w||{},e(t,r._w,r,s)})}function st(t,e,n){null!=e&&l(Xr,t)&&Xr[t](e,n._a,n,t)}function it(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function ot(t,e){return t?s(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||us).test(e)?"format":"standalone"][t.month()]:this._months}function at(t,e){return t?s(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[us.test(e)?"format":"standalone"][t.month()]:this._monthsShort}function ut(t,e,n){var r,s,i,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;12>r;++r)i=c([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===e?(s=wr.call(this._shortMonthsParse,o),-1!==s?s:null):(s=wr.call(this._longMonthsParse,o),-1!==s?s:null):"MMM"===e?(s=wr.call(this._shortMonthsParse,o),-1!==s?s:(s=wr.call(this._longMonthsParse,o),-1!==s?s:null)):(s=wr.call(this._longMonthsParse,o),-1!==s?s:(s=wr.call(this._shortMonthsParse,o),-1!==s?s:null))}function lt(t,e,n){var r,s,i;if(this._monthsParseExact)return ut.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(s=c([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function ht(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=w(e);else if(e=t.localeData().monthsParse(e),"number"!=typeof e)return t;return n=Math.min(t.date(),it(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function ct(t){return null!=t?(ht(this,t),n.updateOffset(this,!0),this):B(this,"Month")}function dt(){return it(this.year(),this.month())}function ft(t){return this._monthsParseExact?(l(this,"_monthsRegex")||pt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=cs),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function mt(t){return this._monthsParseExact?(l(this,"_monthsRegex")||pt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=ds),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function pt(){function t(t,e){return e.length-t.length}var e,n,r=[],s=[],i=[];for(e=0;12>e;e++)n=c([2e3,e]),r.push(this.monthsShort(n,"")),s.push(this.months(n,"")),i.push(this.months(n,"")),i.push(this.monthsShort(n,""));for(r.sort(t),s.sort(t),i.sort(t),e=0;12>e;e++)r[e]=et(r[e]),s[e]=et(s[e]);for(e=0;24>e;e++)i[e]=et(i[e]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function _t(t){return vt(t)?366:365}function vt(t){return t%4===0&&t%100!==0||t%400===0}function yt(){return vt(this.year())}function gt(t,e,n,r,s,i,o){var a=new Date(t,e,n,r,s,i,o);return 100>t&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}function bt(t){var e=new Date(Date.UTC.apply(null,arguments));return 100>t&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function wt(t,e,n){var r=7+e-n,s=(7+bt(t,0,r).getUTCDay()-e)%7;return-s+r-1}function kt(t,e,n,r,s){var i,o,a=(7+n-r)%7,u=wt(t,r,s),l=1+7*(e-1)+a+u;return 0>=l?(i=t-1,o=_t(i)+l):l>_t(t)?(i=t+1,o=l-_t(t)):(i=t,o=l),{year:i,dayOfYear:o}}function Et(t,e,n){var r,s,i=wt(t.year(),e,n),o=Math.floor((t.dayOfYear()-i-1)/7)+1;return 1>o?(s=t.year()-1,r=o+xt(s,e,n)):o>xt(t.year(),e,n)?(r=o-xt(t.year(),e,n),s=t.year()+1):(s=t.year(),r=o),{week:r,year:s}}function xt(t,e,n){var r=wt(t,e,n),s=wt(t+1,e,n);return(_t(t)-r+s)/7}function Ot(t){return Et(t,this._week.dow,this._week.doy).week}function St(){return this._week.dow}function Tt(){return this._week.doy}function Mt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Rt(t){var e=Et(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Dt(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Ct(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Nt(t,e){return t?s(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:this._weekdays}function Pt(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function jt(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Lt(t,e,n){var r,s,i,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;7>r;++r)i=c([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===e?(s=wr.call(this._weekdaysParse,o),-1!==s?s:null):"ddd"===e?(s=wr.call(this._shortWeekdaysParse,o),-1!==s?s:null):(s=wr.call(this._minWeekdaysParse,o),-1!==s?s:null):"dddd"===e?(s=wr.call(this._weekdaysParse,o),-1!==s?s:(s=wr.call(this._shortWeekdaysParse,o),-1!==s?s:(s=wr.call(this._minWeekdaysParse,o),-1!==s?s:null))):"ddd"===e?(s=wr.call(this._shortWeekdaysParse,o),-1!==s?s:(s=wr.call(this._weekdaysParse,o),-1!==s?s:(s=wr.call(this._minWeekdaysParse,o),-1!==s?s:null))):(s=wr.call(this._minWeekdaysParse,o),-1!==s?s:(s=wr.call(this._weekdaysParse,o),-1!==s?s:(s=wr.call(this._shortWeekdaysParse,o),-1!==s?s:null)))}function At(t,e,n){var r,s,i;if(this._weekdaysParseExact)return Lt.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;7>r;r++){if(s=c([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(s,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(s,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(s,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function Yt(t){if(!this.isValid())return null!=t?this:0/0;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Dt(t,this.localeData()),this.add(t-e,"d")):e}function Ht(t){if(!this.isValid())return null!=t?this:0/0;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Ft(t){if(!this.isValid())return null!=t?this:0/0;if(null!=t){var e=Ct(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Ut(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||qt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=ys),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function It(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||qt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=gs),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Bt(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||qt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=bs),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function qt(){function t(t,e){return e.length-t.length}var e,n,r,s,i,o=[],a=[],u=[],l=[];for(e=0;7>e;e++)n=c([2e3,1]).day(e),r=this.weekdaysMin(n,""),s=this.weekdaysShort(n,""),i=this.weekdays(n,""),o.push(r),a.push(s),u.push(i),l.push(r),l.push(s),l.push(i);for(o.sort(t),a.sort(t),u.sort(t),l.sort(t),e=0;7>e;e++)a[e]=et(a[e]),u[e]=et(u[e]),l[e]=et(l[e]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Wt(){return this.hours()%12||12}function Gt(){return this.hours()||24}function zt(t,e){V(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Vt(t,e){return e._meridiemParse}function Zt(t){return"p"===(t+"").toLowerCase().charAt(0)}function Qt(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function $t(t){return t?t.toLowerCase().replace("_","-"):t}function Jt(t){for(var e,n,r,s,i=0;i<t.length;){for(s=$t(t[i]).split("-"),e=s.length,n=$t(t[i+1]),n=n?n.split("-"):null;e>0;){if(r=Xt(s.slice(0,e).join("-")))return r;if(n&&n.length>=e&&k(s,n,!0)>=e-1)break;e--}i++}return null}function Xt(n){var r=null;if(!Os[n]&&"undefined"!=typeof e&&e&&e.exports)try{r=ws._abbr,t("./locale/"+n),Kt(r)}catch(s){}return Os[n]}function Kt(t,e){var n;return t&&(n=_(e)?ne(t):te(t,e),n&&(ws=n)),ws._abbr}function te(t,e){if(null!==e){var n=xs;return e.abbr=t,null!=Os[t]?(O("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Os[t]._config):null!=e.parentLocale&&(null!=Os[e.parentLocale]?n=Os[e.parentLocale]._config:O("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),Os[t]=new R(M(n,e)),Kt(t),Os[t]}return delete Os[t],null}function ee(t,e){if(null!=e){var n,r=xs;null!=Os[t]&&(r=Os[t]._config),e=M(r,e),n=new R(e),n.parentLocale=Os[t],Os[t]=n,Kt(t)}else null!=Os[t]&&(null!=Os[t].parentLocale?Os[t]=Os[t].parentLocale:null!=Os[t]&&delete Os[t]);return Os[t]}function ne(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return ws;if(!s(t)){if(e=Xt(t))return e;t=[t]}return Jt(t)}function re(){return br(Os)}function se(t){var e,n=t._a;return n&&-2===f(t).overflow&&(e=n[ts]<0||n[ts]>11?ts:n[es]<1||n[es]>it(n[Kr],n[ts])?es:n[ns]<0||n[ns]>24||24===n[ns]&&(0!==n[rs]||0!==n[ss]||0!==n[is])?ns:n[rs]<0||n[rs]>59?rs:n[ss]<0||n[ss]>59?ss:n[is]<0||n[is]>999?is:-1,f(t)._overflowDayOfYear&&(Kr>e||e>es)&&(e=es),f(t)._overflowWeeks&&-1===e&&(e=os),f(t)._overflowWeekday&&-1===e&&(e=as),f(t).overflow=e),t}function ie(t){var e,n,r,s,i,o,a=t._i,u=Ss.exec(a)||Ts.exec(a);if(u){for(f(t).iso=!0,e=0,n=Rs.length;n>e;e++)if(Rs[e][1].exec(u[1])){s=Rs[e][0],r=Rs[e][2]!==!1;break}if(null==s)return void(t._isValid=!1);if(u[3]){for(e=0,n=Ds.length;n>e;e++)if(Ds[e][1].exec(u[3])){i=(u[2]||" ")+Ds[e][0];break}if(null==i)return void(t._isValid=!1)}if(!r&&null!=i)return void(t._isValid=!1);if(u[4]){if(!Ms.exec(u[4]))return void(t._isValid=!1);o="Z"}t._f=s+(i||"")+(o||""),ce(t)}else t._isValid=!1}function oe(t){var e=Cs.exec(t._i);return null!==e?void(t._d=new Date(+e[1])):(ie(t),void(t._isValid===!1&&(delete t._isValid,n.createFromInputFallback(t))))}function ae(t,e,n){return null!=t?t:null!=e?e:n}function ue(t){var e=new Date(n.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function le(t){var e,n,r,s,i=[];if(!t._d){for(r=ue(t),t._w&&null==t._a[es]&&null==t._a[ts]&&he(t),t._dayOfYear&&(s=ae(t._a[Kr],r[Kr]),t._dayOfYear>_t(s)&&(f(t)._overflowDayOfYear=!0),n=bt(s,0,t._dayOfYear),t._a[ts]=n.getUTCMonth(),t._a[es]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=i[e]=r[e];for(;7>e;e++)t._a[e]=i[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[ns]&&0===t._a[rs]&&0===t._a[ss]&&0===t._a[is]&&(t._nextDay=!0,t._a[ns]=0),t._d=(t._useUTC?bt:gt).apply(null,i),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[ns]=24)}}function he(t){var e,n,r,s,i,o,a,u;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(i=1,o=4,n=ae(e.GG,t._a[Kr],Et(ge(),1,4).year),r=ae(e.W,1),s=ae(e.E,1),(1>s||s>7)&&(u=!0)):(i=t._locale._week.dow,o=t._locale._week.doy,n=ae(e.gg,t._a[Kr],Et(ge(),i,o).year),r=ae(e.w,1),null!=e.d?(s=e.d,(0>s||s>6)&&(u=!0)):null!=e.e?(s=e.e+i,(e.e<0||e.e>6)&&(u=!0)):s=i),1>r||r>xt(n,i,o)?f(t)._overflowWeeks=!0:null!=u?f(t)._overflowWeekday=!0:(a=kt(n,r,s,i,o),t._a[Kr]=a.year,t._dayOfYear=a.dayOfYear)}function ce(t){if(t._f===n.ISO_8601)return void ie(t);t._a=[],f(t).empty=!0;var e,r,s,i,o,a=""+t._i,u=a.length,l=0;for(s=J(t._f,t._locale).match(Dr)||[],e=0;e<s.length;e++)i=s[e],r=(a.match(K(i,t))||[])[0],r&&(o=a.substr(0,a.indexOf(r)),o.length>0&&f(t).unusedInput.push(o),a=a.slice(a.indexOf(r)+r.length),l+=r.length),Pr[i]?(r?f(t).empty=!1:f(t).unusedTokens.push(i),st(i,r,t)):t._strict&&!r&&f(t).unusedTokens.push(i);f(t).charsLeftOver=u-l,a.length>0&&f(t).unusedInput.push(a),t._a[ns]<=12&&f(t).bigHour===!0&&t._a[ns]>0&&(f(t).bigHour=void 0),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[ns]=de(t._locale,t._a[ns],t._meridiem),le(t),se(t)}function de(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(r=t.isPM(n),r&&12>e&&(e+=12),r||12!==e||(e=0),e):e}function fe(t){var e,n,r,s,i;if(0===t._f.length)return f(t).invalidFormat=!0,void(t._d=new Date(0/0));for(s=0;s<t._f.length;s++)i=0,e=v({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[s],ce(e),m(e)&&(i+=f(e).charsLeftOver,i+=10*f(e).unusedTokens.length,f(e).score=i,(null==r||r>i)&&(r=i,n=e));h(t,n||e)}function me(t){if(!t._d){var e=H(t._i);t._a=u([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),le(t)}}function pe(t){var e=new y(se(_e(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function _e(t){var e=t._i,n=t._f;return t._locale=t._locale||ne(t._l),null===e||void 0===n&&""===e?p({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),g(e)?new y(se(e)):(s(n)?fe(t):a(e)?t._d=e:n?ce(t):ve(t),m(t)||(t._d=null),t))}function ve(t){var e=t._i;void 0===e?t._d=new Date(n.now()):a(e)?t._d=new Date(e.valueOf()):"string"==typeof e?oe(t):s(e)?(t._a=u(e.slice(0),function(t){return parseInt(t,10)}),le(t)):"object"==typeof e?me(t):"number"==typeof e?t._d=new Date(e):n.createFromInputFallback(t)}function ye(t,e,n,r,a){var u={};return"boolean"==typeof n&&(r=n,n=void 0),(i(t)&&o(t)||s(t)&&0===t.length)&&(t=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=a,u._l=n,u._i=t,u._f=e,u._strict=r,pe(u)}function ge(t,e,n,r){return ye(t,e,n,r,!1)}function be(t,e){var n,r;if(1===e.length&&s(e[0])&&(e=e[0]),!e.length)return ge();for(n=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](n))&&(n=e[r]);return n}function we(){var t=[].slice.call(arguments,0);return be("isBefore",t)}function ke(){var t=[].slice.call(arguments,0);return be("isAfter",t)}function Ee(t){var e=H(t),n=e.year||0,r=e.quarter||0,s=e.month||0,i=e.week||0,o=e.day||0,a=e.hour||0,u=e.minute||0,l=e.second||0,h=e.millisecond||0;this._milliseconds=+h+1e3*l+6e4*u+1e3*a*60*60,this._days=+o+7*i,this._months=+s+3*r+12*n,this._data={},this._locale=ne(),this._bubble()}function xe(t){return t instanceof Ee}function Oe(t){return 0>t?-1*Math.round(-1*t):Math.round(t)}function Se(t,e){V(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+z(~~(t/60),2)+e+z(~~t%60,2)})}function Te(t,e){var n=(e||"").match(t)||[],r=n[n.length-1]||[],s=(r+"").match(Ls)||["-",0,0],i=+(60*s[1])+w(s[2]);return"+"===s[0]?i:-i}function Me(t,e){var r,s;return e._isUTC?(r=e.clone(),s=(g(t)||a(t)?t.valueOf():ge(t).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+s),n.updateOffset(r,!1),r):ge(t).local()}function Re(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function De(t,e){var r,s=this._offset||0;return this.isValid()?null!=t?("string"==typeof t?t=Te(Zr,t):Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(r=Re(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),s!==t&&(!e||this._changeInProgress?ze(this,Ie(t-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?s:Re(this):null!=t?this:0/0}function Ce(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ne(t){return this.utcOffset(0,t)}function Pe(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Re(this),"m")),this}function je(){if(this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var t=Te(Vr,this._i);0===t?this.utcOffset(0,!0):this.utcOffset(Te(Vr,this._i))}return this}function Le(t){return this.isValid()?(t=t?ge(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Ae(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ye(){if(!_(this._isDSTShifted))return this._isDSTShifted;var t={};if(v(t,this),t=_e(t),t._a){var e=t._isUTC?c(t._a):ge(t._a);this._isDSTShifted=this.isValid()&&k(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function He(){return this.isValid()?!this._isUTC:!1}function Fe(){return this.isValid()?this._isUTC:!1}function Ue(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Ie(t,e){var n,r,s,i=t,o=null;return xe(t)?i={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(i={},e?i[e]=t:i.milliseconds=t):(o=As.exec(t))?(n="-"===o[1]?-1:1,i={y:0,d:w(o[es])*n,h:w(o[ns])*n,m:w(o[rs])*n,s:w(o[ss])*n,ms:w(Oe(1e3*o[is]))*n}):(o=Ys.exec(t))?(n="-"===o[1]?-1:1,i={y:Be(o[2],n),M:Be(o[3],n),w:Be(o[4],n),d:Be(o[5],n),h:Be(o[6],n),m:Be(o[7],n),s:Be(o[8],n)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(s=We(ge(i.from),ge(i.to)),i={},i.ms=s.milliseconds,i.M=s.months),r=new Ee(i),xe(t)&&l(t,"_locale")&&(r._locale=t._locale),r}function Be(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function qe(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function We(t,e){var n;return t.isValid()&&e.isValid()?(e=Me(e,t),t.isBefore(e)?n=qe(t,e):(n=qe(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Ge(t,e){return function(n,r){var s,i;return null===r||isNaN(+r)||(O(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),
i=n,n=r,r=i),n="string"==typeof n?+n:n,s=Ie(n,r),ze(this,s,t),this}}function ze(t,e,r,s){var i=e._milliseconds,o=Oe(e._days),a=Oe(e._months);t.isValid()&&(s=null==s?!0:s,i&&t._d.setTime(t._d.valueOf()+i*r),o&&q(t,"Date",B(t,"Date")+o*r),a&&ht(t,B(t,"Month")+a*r),s&&n.updateOffset(t,o||a))}function Ve(t,e){var n=t.diff(e,"days",!0);return-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse"}function Ze(t,e){var r=t||ge(),s=Me(r,this).startOf("day"),i=n.calendarFormat(this,s)||"sameElse",o=e&&(S(e[i])?e[i].call(this,r):e[i]);return this.format(o||this.localeData().calendar(i,this,ge(r)))}function Qe(){return new y(this)}function $e(t,e){var n=g(t)?t:ge(t);return this.isValid()&&n.isValid()?(e=Y(_(e)?"millisecond":e),"millisecond"===e?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function Je(t,e){var n=g(t)?t:ge(t);return this.isValid()&&n.isValid()?(e=Y(_(e)?"millisecond":e),"millisecond"===e?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function Xe(t,e,n,r){return r=r||"()",("("===r[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===r[1]?this.isBefore(e,n):!this.isAfter(e,n))}function Ke(t,e){var n,r=g(t)?t:ge(t);return this.isValid()&&r.isValid()?(e=Y(e||"millisecond"),"millisecond"===e?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf())):!1}function tn(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function en(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function nn(t,e,n){var r,s,i,o;return this.isValid()?(r=Me(t,this),r.isValid()?(s=6e4*(r.utcOffset()-this.utcOffset()),e=Y(e),"year"===e||"month"===e||"quarter"===e?(o=rn(this,r),"quarter"===e?o/=3:"year"===e&&(o/=12)):(i=this-r,o="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-s)/864e5:"week"===e?(i-s)/6048e5:i),n?o:b(o)):0/0):0/0}function rn(t,e){var n,r,s=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(s,"months");return 0>e-i?(n=t.clone().add(s-1,"months"),r=(e-i)/(i-n)):(n=t.clone().add(s+1,"months"),r=(e-i)/(n-i)),-(s+r)||0}function sn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function on(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?S(Date.prototype.toISOString)?this.toDate().toISOString():$(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):$(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function an(t){t||(t=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var e=$(this,t);return this.localeData().postformat(e)}function un(t,e){return this.isValid()&&(g(t)&&t.isValid()||ge(t).isValid())?Ie({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ln(t){return this.from(ge(),t)}function hn(t,e){return this.isValid()&&(g(t)&&t.isValid()||ge(t).isValid())?Ie({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function cn(t){return this.to(ge(),t)}function dn(t){var e;return void 0===t?this._locale._abbr:(e=ne(t),null!=e&&(this._locale=e),this)}function fn(){return this._locale}function mn(t){switch(t=Y(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function pn(t){return t=Y(t),void 0===t||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function _n(){return this._d.valueOf()-6e4*(this._offset||0)}function vn(){return Math.floor(this.valueOf()/1e3)}function yn(){return new Date(this.valueOf())}function gn(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function bn(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function wn(){return this.isValid()?this.toISOString():null}function kn(){return m(this)}function En(){return h({},f(this))}function xn(){return f(this).overflow}function On(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Sn(t,e){V(0,[t,t.length],0,e)}function Tn(t){return Cn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Mn(t){return Cn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Rn(){return xt(this.year(),1,4)}function Dn(){var t=this.localeData()._week;return xt(this.year(),t.dow,t.doy)}function Cn(t,e,n,r,s){var i;return null==t?Et(this,r,s).year:(i=xt(t,r,s),e>i&&(e=i),Nn.call(this,t,e,n,r,s))}function Nn(t,e,n,r,s){var i=kt(t,e,n,r,s),o=bt(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Pn(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function jn(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function Ln(t,e){e[is]=w(1e3*("0."+t))}function An(){return this._isUTC?"UTC":""}function Yn(){return this._isUTC?"Coordinated Universal Time":""}function Hn(t){return ge(1e3*t)}function Fn(){return ge.apply(null,arguments).parseZone()}function Un(t){return t}function In(t,e,n,r){var s=ne(),i=c().set(r,e);return s[n](i,t)}function Bn(t,e,n){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return In(t,e,n,"month");var r,s=[];for(r=0;12>r;r++)s[r]=In(t,r,n,"month");return s}function qn(t,e,n,r){"boolean"==typeof t?("number"==typeof e&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,"number"==typeof e&&(n=e,e=void 0),e=e||"");var s=ne(),i=t?s._week.dow:0;if(null!=n)return In(e,(n+i)%7,r,"day");var o,a=[];for(o=0;7>o;o++)a[o]=In(e,(o+i)%7,r,"day");return a}function Wn(t,e){return Bn(t,e,"months")}function Gn(t,e){return Bn(t,e,"monthsShort")}function zn(t,e,n){return qn(t,e,n,"weekdays")}function Vn(t,e,n){return qn(t,e,n,"weekdaysShort")}function Zn(t,e,n){return qn(t,e,n,"weekdaysMin")}function Qn(){var t=this._data;return this._milliseconds=Qs(this._milliseconds),this._days=Qs(this._days),this._months=Qs(this._months),t.milliseconds=Qs(t.milliseconds),t.seconds=Qs(t.seconds),t.minutes=Qs(t.minutes),t.hours=Qs(t.hours),t.months=Qs(t.months),t.years=Qs(t.years),this}function $n(t,e,n,r){var s=Ie(e,n);return t._milliseconds+=r*s._milliseconds,t._days+=r*s._days,t._months+=r*s._months,t._bubble()}function Jn(t,e){return $n(this,t,e,1)}function Xn(t,e){return $n(this,t,e,-1)}function Kn(t){return 0>t?Math.floor(t):Math.ceil(t)}function tr(){var t,e,n,r,s,i=this._milliseconds,o=this._days,a=this._months,u=this._data;return i>=0&&o>=0&&a>=0||0>=i&&0>=o&&0>=a||(i+=864e5*Kn(nr(a)+o),o=0,a=0),u.milliseconds=i%1e3,t=b(i/1e3),u.seconds=t%60,e=b(t/60),u.minutes=e%60,n=b(e/60),u.hours=n%24,o+=b(n/24),s=b(er(o)),a+=s,o-=Kn(nr(s)),r=b(a/12),a%=12,u.days=o,u.months=a,u.years=r,this}function er(t){return 4800*t/146097}function nr(t){return 146097*t/4800}function rr(t){var e,n,r=this._milliseconds;if(t=Y(t),"month"===t||"year"===t)return e=this._days+r/864e5,n=this._months+er(e),"month"===t?n:n/12;switch(e=this._days+Math.round(nr(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}}function sr(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12)}function ir(t){return function(){return this.as(t)}}function or(t){return t=Y(t),this[t+"s"]()}function ar(t){return function(){return this._data[t]}}function ur(){return b(this.days()/7)}function lr(t,e,n,r,s){return s.relativeTime(e||1,!!n,t,r)}function hr(t,e,n){var r=Ie(t).abs(),s=ci(r.as("s")),i=ci(r.as("m")),o=ci(r.as("h")),a=ci(r.as("d")),u=ci(r.as("M")),l=ci(r.as("y")),h=s<di.s&&["s",s]||1>=i&&["m"]||i<di.m&&["mm",i]||1>=o&&["h"]||o<di.h&&["hh",o]||1>=a&&["d"]||a<di.d&&["dd",a]||1>=u&&["M"]||u<di.M&&["MM",u]||1>=l&&["y"]||["yy",l];return h[2]=e,h[3]=+t>0,h[4]=n,lr.apply(null,h)}function cr(t){return void 0===t?ci:"function"==typeof t?(ci=t,!0):!1}function dr(t,e){return void 0===di[t]?!1:void 0===e?di[t]:(di[t]=e,!0)}function fr(t){var e=this.localeData(),n=hr(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function mr(){var t,e,n,r=fi(this._milliseconds)/1e3,s=fi(this._days),i=fi(this._months);t=b(r/60),e=b(t/60),r%=60,t%=60,n=b(i/12),i%=12;var o=n,a=i,u=s,l=e,h=t,c=r,d=this.asSeconds();return d?(0>d?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(u?u+"D":"")+(l||h||c?"T":"")+(l?l+"H":"")+(h?h+"M":"")+(c?c+"S":""):"P0D"}var pr,_r;_r=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,r=0;n>r;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};var vr=n.momentProperties=[],yr=!1,gr={};n.suppressDeprecationWarnings=!1,n.deprecationHandler=null;var br;br=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)l(t,e)&&n.push(e);return n};var wr,kr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Er={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},xr="Invalid date",Or="%d",Sr=/\d{1,2}/,Tr={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Mr={},Rr={},Dr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Cr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Nr={},Pr={},jr=/\d/,Lr=/\d\d/,Ar=/\d{3}/,Yr=/\d{4}/,Hr=/[+-]?\d{6}/,Fr=/\d\d?/,Ur=/\d\d\d\d?/,Ir=/\d\d\d\d\d\d?/,Br=/\d{1,3}/,qr=/\d{1,4}/,Wr=/[+-]?\d{1,6}/,Gr=/\d+/,zr=/[+-]?\d+/,Vr=/Z|[+-]\d\d:?\d\d/gi,Zr=/Z|[+-]\d\d(?::?\d\d)?/gi,Qr=/[+-]?\d+(\.\d{1,3})?/,$r=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Jr={},Xr={},Kr=0,ts=1,es=2,ns=3,rs=4,ss=5,is=6,os=7,as=8;wr=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},V("M",["MM",2],"Mo",function(){return this.month()+1}),V("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),V("MMMM",0,0,function(t){return this.localeData().months(this,t)}),A("month","M"),F("month",8),X("M",Fr),X("MM",Fr,Lr),X("MMM",function(t,e){return e.monthsShortRegex(t)}),X("MMMM",function(t,e){return e.monthsRegex(t)}),nt(["M","MM"],function(t,e){e[ts]=w(t)-1}),nt(["MMM","MMMM"],function(t,e,n,r){var s=n._locale.monthsParse(t,r,n._strict);null!=s?e[ts]=s:f(n).invalidMonth=t});var us=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ls="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),hs="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),cs=$r,ds=$r;V("Y",0,0,function(){var t=this.year();return 9999>=t?""+t:"+"+t}),V(0,["YY",2],0,function(){return this.year()%100}),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),A("year","y"),F("year",1),X("Y",zr),X("YY",Fr,Lr),X("YYYY",qr,Yr),X("YYYYY",Wr,Hr),X("YYYYYY",Wr,Hr),nt(["YYYYY","YYYYYY"],Kr),nt("YYYY",function(t,e){e[Kr]=2===t.length?n.parseTwoDigitYear(t):w(t)}),nt("YY",function(t,e){e[Kr]=n.parseTwoDigitYear(t)}),nt("Y",function(t,e){e[Kr]=parseInt(t,10)}),n.parseTwoDigitYear=function(t){return w(t)+(w(t)>68?1900:2e3)};var fs=I("FullYear",!0);V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),F("week",5),F("isoWeek",5),X("w",Fr),X("ww",Fr,Lr),X("W",Fr),X("WW",Fr,Lr),rt(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=w(t)});var ms={dow:0,doy:6};V("d",0,"do","day"),V("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),V("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),V("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),F("day",11),F("weekday",11),F("isoWeekday",11),X("d",Fr),X("e",Fr),X("E",Fr),X("dd",function(t,e){return e.weekdaysMinRegex(t)}),X("ddd",function(t,e){return e.weekdaysShortRegex(t)}),X("dddd",function(t,e){return e.weekdaysRegex(t)}),rt(["dd","ddd","dddd"],function(t,e,n,r){var s=n._locale.weekdaysParse(t,r,n._strict);null!=s?e.d=s:f(n).invalidWeekday=t}),rt(["d","e","E"],function(t,e,n,r){e[r]=w(t)});var ps="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),_s="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),vs="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ys=$r,gs=$r,bs=$r;V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Wt),V("k",["kk",2],0,Gt),V("hmm",0,0,function(){return""+Wt.apply(this)+z(this.minutes(),2)}),V("hmmss",0,0,function(){return""+Wt.apply(this)+z(this.minutes(),2)+z(this.seconds(),2)}),V("Hmm",0,0,function(){return""+this.hours()+z(this.minutes(),2)}),V("Hmmss",0,0,function(){return""+this.hours()+z(this.minutes(),2)+z(this.seconds(),2)}),zt("a",!0),zt("A",!1),A("hour","h"),F("hour",13),X("a",Vt),X("A",Vt),X("H",Fr),X("h",Fr),X("HH",Fr,Lr),X("hh",Fr,Lr),X("hmm",Ur),X("hmmss",Ir),X("Hmm",Ur),X("Hmmss",Ir),nt(["H","HH"],ns),nt(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),nt(["h","hh"],function(t,e,n){e[ns]=w(t),f(n).bigHour=!0}),nt("hmm",function(t,e,n){var r=t.length-2;e[ns]=w(t.substr(0,r)),e[rs]=w(t.substr(r)),f(n).bigHour=!0}),nt("hmmss",function(t,e,n){var r=t.length-4,s=t.length-2;e[ns]=w(t.substr(0,r)),e[rs]=w(t.substr(r,2)),e[ss]=w(t.substr(s)),f(n).bigHour=!0}),nt("Hmm",function(t,e){var n=t.length-2;e[ns]=w(t.substr(0,n)),e[rs]=w(t.substr(n))}),nt("Hmmss",function(t,e){var n=t.length-4,r=t.length-2;e[ns]=w(t.substr(0,n)),e[rs]=w(t.substr(n,2)),e[ss]=w(t.substr(r))});var ws,ks=/[ap]\.?m?\.?/i,Es=I("Hours",!0),xs={calendar:kr,longDateFormat:Er,invalidDate:xr,ordinal:Or,ordinalParse:Sr,relativeTime:Tr,months:ls,monthsShort:hs,week:ms,weekdays:ps,weekdaysMin:vs,weekdaysShort:_s,meridiemParse:ks},Os={},Ss=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ts=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ms=/Z|[+-]\d\d(?::?\d\d)?/,Rs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ds=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Cs=/^\/?Date\((\-?\d+)/i;n.createFromInputFallback=x("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),n.ISO_8601=function(){};var Ns=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ge.apply(null,arguments);return this.isValid()&&t.isValid()?this>t?this:t:p()}),Ps=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ge.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:p()}),js=function(){return Date.now?Date.now():+new Date};Se("Z",":"),Se("ZZ",""),X("Z",Zr),X("ZZ",Zr),nt(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Te(Zr,t)});var Ls=/([\+\-]|\d\d)/gi;n.updateOffset=function(){};var As=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ys=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ie.fn=Ee.prototype;var Hs=Ge(1,"add"),Fs=Ge(-1,"subtract");n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Us=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});V(0,["gg",2],0,function(){return this.weekYear()%100}),V(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Sn("gggg","weekYear"),Sn("ggggg","weekYear"),Sn("GGGG","isoWeekYear"),Sn("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),F("weekYear",1),F("isoWeekYear",1),X("G",zr),X("g",zr),X("GG",Fr,Lr),X("gg",Fr,Lr),X("GGGG",qr,Yr),X("gggg",qr,Yr),X("GGGGG",Wr,Hr),X("ggggg",Wr,Hr),rt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=w(t)}),rt(["gg","GG"],function(t,e,r,s){e[s]=n.parseTwoDigitYear(t)}),V("Q",0,"Qo","quarter"),A("quarter","Q"),F("quarter",7),X("Q",jr),nt("Q",function(t,e){e[ts]=3*(w(t)-1)}),V("D",["DD",2],"Do","date"),A("date","D"),F("date",9),X("D",Fr),X("DD",Fr,Lr),X("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),nt(["D","DD"],es),nt("Do",function(t,e){e[es]=w(t.match(Fr)[0],10)});var Is=I("Date",!0);V("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),F("dayOfYear",4),X("DDD",Br),X("DDDD",Ar),nt(["DDD","DDDD"],function(t,e,n){n._dayOfYear=w(t)}),V("m",["mm",2],0,"minute"),A("minute","m"),F("minute",14),X("m",Fr),X("mm",Fr,Lr),nt(["m","mm"],rs);var Bs=I("Minutes",!1);V("s",["ss",2],0,"second"),A("second","s"),F("second",15),X("s",Fr),X("ss",Fr,Lr),nt(["s","ss"],ss);var qs=I("Seconds",!1);V("S",0,0,function(){return~~(this.millisecond()/100)}),V(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,function(){return 10*this.millisecond()}),V(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),V(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),V(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),V(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),V(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),F("millisecond",16),X("S",Br,jr),X("SS",Br,Lr),X("SSS",Br,Ar);var Ws;for(Ws="SSSS";Ws.length<=9;Ws+="S")X(Ws,Gr);for(Ws="S";Ws.length<=9;Ws+="S")nt(Ws,Ln);var Gs=I("Milliseconds",!1);V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var zs=y.prototype;zs.add=Hs,zs.calendar=Ze,zs.clone=Qe,zs.diff=nn,zs.endOf=pn,zs.format=an,zs.from=un,zs.fromNow=ln,zs.to=hn,zs.toNow=cn,zs.get=W,zs.invalidAt=xn,zs.isAfter=$e,zs.isBefore=Je,zs.isBetween=Xe,zs.isSame=Ke,zs.isSameOrAfter=tn,zs.isSameOrBefore=en,zs.isValid=kn,zs.lang=Us,zs.locale=dn,zs.localeData=fn,zs.max=Ps,zs.min=Ns,zs.parsingFlags=En,zs.set=G,zs.startOf=mn,zs.subtract=Fs,zs.toArray=gn,zs.toObject=bn,zs.toDate=yn,zs.toISOString=on,zs.toJSON=wn,zs.toString=sn,zs.unix=vn,zs.valueOf=_n,zs.creationData=On,zs.year=fs,zs.isLeapYear=yt,zs.weekYear=Tn,zs.isoWeekYear=Mn,zs.quarter=zs.quarters=Pn,zs.month=ct,zs.daysInMonth=dt,zs.week=zs.weeks=Mt,zs.isoWeek=zs.isoWeeks=Rt,zs.weeksInYear=Dn,zs.isoWeeksInYear=Rn,zs.date=Is,zs.day=zs.days=Yt,zs.weekday=Ht,zs.isoWeekday=Ft,zs.dayOfYear=jn,zs.hour=zs.hours=Es,zs.minute=zs.minutes=Bs,zs.second=zs.seconds=qs,zs.millisecond=zs.milliseconds=Gs,zs.utcOffset=De,zs.utc=Ne,zs.local=Pe,zs.parseZone=je,zs.hasAlignedHourOffset=Le,zs.isDST=Ae,zs.isLocal=He,zs.isUtcOffset=Fe,zs.isUtc=Ue,zs.isUTC=Ue,zs.zoneAbbr=An,zs.zoneName=Yn,zs.dates=x("dates accessor is deprecated. Use date instead.",Is),zs.months=x("months accessor is deprecated. Use month instead",ct),zs.years=x("years accessor is deprecated. Use year instead",fs),zs.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ce),zs.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ye);var Vs=zs,Zs=R.prototype;Zs.calendar=D,Zs.longDateFormat=C,Zs.invalidDate=N,Zs.ordinal=P,Zs.preparse=Un,Zs.postformat=Un,Zs.relativeTime=j,Zs.pastFuture=L,Zs.set=T,Zs.months=ot,Zs.monthsShort=at,Zs.monthsParse=lt,Zs.monthsRegex=mt,Zs.monthsShortRegex=ft,Zs.week=Ot,Zs.firstDayOfYear=Tt,Zs.firstDayOfWeek=St,Zs.weekdays=Nt,Zs.weekdaysMin=jt,Zs.weekdaysShort=Pt,Zs.weekdaysParse=At,Zs.weekdaysRegex=Ut,Zs.weekdaysShortRegex=It,Zs.weekdaysMinRegex=Bt,Zs.isPM=Zt,Zs.meridiem=Qt,Kt("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===w(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),n.lang=x("moment.lang is deprecated. Use moment.locale instead.",Kt),n.langData=x("moment.langData is deprecated. Use moment.localeData instead.",ne);var Qs=Math.abs,$s=ir("ms"),Js=ir("s"),Xs=ir("m"),Ks=ir("h"),ti=ir("d"),ei=ir("w"),ni=ir("M"),ri=ir("y"),si=ar("milliseconds"),ii=ar("seconds"),oi=ar("minutes"),ai=ar("hours"),ui=ar("days"),li=ar("months"),hi=ar("years"),ci=Math.round,di={s:45,m:45,h:22,d:26,M:11},fi=Math.abs,mi=Ee.prototype;mi.abs=Qn,mi.add=Jn,mi.subtract=Xn,mi.as=rr,mi.asMilliseconds=$s,mi.asSeconds=Js,mi.asMinutes=Xs,mi.asHours=Ks,mi.asDays=ti,mi.asWeeks=ei,mi.asMonths=ni,mi.asYears=ri,mi.valueOf=sr,mi._bubble=tr,mi.get=or,mi.milliseconds=si,mi.seconds=ii,mi.minutes=oi,mi.hours=ai,mi.days=ui,mi.weeks=ur,mi.months=li,mi.years=hi,mi.humanize=fr,mi.toISOString=mr,mi.toString=mr,mi.toJSON=mr,mi.locale=dn,mi.localeData=fn,mi.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",mr),mi.lang=Us,V("X",0,0,"unix"),V("x",0,0,"valueOf"),X("x",zr),X("X",Qr),nt("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),nt("x",function(t,e,n){n._d=new Date(w(t))}),n.version="2.15.2",r(ge),n.fn=Vs,n.min=we,n.max=ke,n.now=js,n.utc=c,n.unix=Hn,n.months=Wn,n.isDate=a,n.locale=Kt,n.invalid=p,n.duration=Ie,n.isMoment=g,n.weekdays=zn,n.parseZone=Fn,n.localeData=ne,n.isDuration=xe,n.monthsShort=Gn,n.weekdaysMin=Zn,n.defineLocale=te,n.updateLocale=ee,n.locales=re,n.weekdaysShort=Vn,n.normalizeUnits=Y,n.relativeTimeRounding=cr,n.relativeTimeThreshold=dr,n.calendarFormat=Ve,n.prototype=Vs;var pi=n;return pi})},{}],5:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("../utils/createElement.js"),a=r(o),u=t("../utils/isBlurred.js"),l=r(u),h=t("../utils/addEvent.js"),c=r(h),d=[{name:"rateLimitDuration",value:1,text:"1s"},{name:"rateLimitDuration",value:5,text:"5s"},{name:"rateLimitDuration",value:30,text:"30s"},{name:"rateLimitDuration",value:60,text:"1m"},{name:"rateLimitDuration",value:300,text:"5m"},{name:"rateLimitDuration",value:900,text:"15m"}],f=[{name:"rateLimitMax",value:1,text:"1 chat"},{name:"rateLimitMax",value:5,text:"5 chats"},{name:"rateLimitMax",value:10,text:"10 chats"}],m=[{name:"mode",value:"user",text:"Everyone"},{name:"mode",value:"moderator",text:"Moderators"},{name:"mode",value:"owner",text:"Owner"}],p=function(){function t(e,n,r,i){s(this,t),this.parent=e,this.chat=n,this.chatBody=r,this.options=i,this.toggleFlyout=this.toggleFlyout.bind(this),this.closeFlyoutOnBlur=this.closeFlyoutOnBlur.bind(this),this.handleRadioChange=this.handleRadioChange.bind(this),this.render(),this.renderFlyout()}return i(t,[{key:"init",value:function(){this.renderRadios()}},{key:"render",value:function(){this.tooltip=a["default"]({tagName:"span",className:"chat__tooltip",text:"Room Settings"}),this.el=a["default"]({tagName:"button",className:"chat__admin-button",childs:[this.tooltip],events:{click:this.toggleFlyout}}),this.parent.appendChild(this.el)}},{key:"renderFlyout",value:function(){this.flyout=a["default"]({tagName:"div",className:"chat__flyout"}),this.parent.parentElement.appendChild(this.flyout)}},{key:"renderRadios",value:function(){var t=a["default"]({tagName:"div",className:"chat__info chat__info--mode",text:"Chat Mode"});this.flyout.appendChild(t),this.radioRenderer(m);var e=a["default"]({tagName:"div",className:"chat__description chat__description--mode",text:"The current mode of the room specifying which users can chat"});this.flyout.appendChild(e);var n=a["default"]({tagName:"div",className:"chat__info",text:"Chat Rate Limit"});this.flyout.appendChild(n),this.radioRenderer(f);var r=a["default"]({tagName:"div",className:"chat__description",text:"Max amount of chats allowed during..."});this.flyout.appendChild(r),this.radioRenderer(d);var s=a["default"]({tagName:"div",className:"chat__description",text:"Duration of max allowed chats."});this.flyout.appendChild(s)}},{key:"radioRenderer",value:function(t){for(var e=[],n=0;n<t.length;n++){var r=a["default"]({tagName:"input",className:"chat__radio",attributes:{type:"radio",name:t[n].name,value:t[n].value,id:t[n].name+n},events:{change:this.handleRadioChange}});this.chat._room[t[n].name]===t[n].value&&(r.checked="checked"),e.push(r);var s=a["default"]({tagName:"label",className:"chat__radio-label chat__radio-label--"+t.length,text:t[n].text,attributes:{"for":t[n].name+n}});e.push(s)}var i=a["default"]({tagName:"div",className:"chat__radio-slider chat__radio-slider--"+t.length});e.push(i);var o=a["default"]({tagName:"div",className:"chat__radio-wrapper",childs:e}),u=a["default"]({tagName:"div",className:"chat__radio-container chat__radio-container--restricted chat__radio-container--"+t[0].name,childs:[o]});this.flyout.appendChild(u)}},{key:"handleRadioChange",value:function(t){var e={};e[t.target.name]=isNaN(t.target.value)?t.target.value:parseInt(t.target.value,10),this.chat.patchRoom(this.chat._roomname,e,function(t){t&&console.log("ERR: "+t)})}},{key:"closeFlyoutOnBlur",value:function(t){l["default"](t,this.flyout,this.el)&&(this._blurEvent(),this._blurEvent=null,this.flyout.classList.remove("chat__flyout--visible"))}},{key:"toggleFlyout",value:function(){this.flyout.classList.toggle("chat__flyout--visible"),this._blurEvent||(this._blurEvent=c["default"](document,"click",this.closeFlyoutOnBlur))}}]),t}();n["default"]=p},{"../utils/addEvent.js":15,"../utils/createElement.js":16,"../utils/isBlurred.js":18}],6:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("moment"),u=(r(a),t("lodash.throttle")),l=(r(u),t("../utils/createElement.js")),h=r(l),c=t("../utils/debounce.js"),d=(r(c),{chunkLimit:20,chunkSize:10}),f=function(){function t(e,n,r){var o=this;s(this,t),this.parentEl=e,this.chat=n,this.options=i({},d,r),this._scrollLocked=!0,this._previousChatProcessorData=!1,this._speedometerArray=[],this._currentChunk=this.buildChunkElement(),this._currentChunkSize=0,this._chunkQueue=[],this._chunkArray=[],this._chunkArray.push(this._currentChunk),this._chunkOverflow=0,this.scrollPaused=!1,this.scrollToggle=this.scrollToggle.bind(this),this._chunkProcessInterval=setInterval(function(){o.chunkProcessor()},200),this.render()}return o(t,[{key:"chunkProcessor",value:function(){this.speedometer();for(var t=document.createDocumentFragment();this._chunkQueue.length&&this._currentChunkSize!==this.options.chunkSize;){var e=this._chunkQueue.shift();t.appendChild(e),this._currentChunkSize++}if(this._currentChunk.appendChild(t),this._currentChunk.parentElement||this.chatBody.appendChild(this._currentChunk),this._currentChunkSize===this.options.chunkSize&&(this._currentChunk=this.buildChunkElement(),this._chunkArray.push(this._currentChunk),this._currentChunkSize=0),this._chunkQueue.length&&this._chunkOverflow!==2*this.options.chunkLimit)return this._chunkOverflow++,void this.chunkProcessor();this._chunkOverflow=0,this._chunkArray.length===2*this.options.chunkLimit&&(this._chunkQueue=[]);for(var n=this.scrollPaused?100:this.options.chunkLimit;this._chunkArray.length>n;){var r=this._chunkArray.shift();this.chatBody.removeChild(r)}this.scrollPaused||this.scrollBottom()}},{key:"chatProcessor",value:function(t){if(!t.ignore){var e=this.buildLineElement(),n=this.writeLineElement(e,t);this._chunkQueue.push(n),this._previousChatProcessorData=t}}},{key:"speedometer",value:function(){if(this._speedometerArray.push(this._chunkQueue.length),21===this._speedometerArray.length){this._speedometerArray.shift();for(var t=0,e=0;e<this._speedometerArray.length;e++)t+=this._speedometerArray[e];if(t>5)return void(this.options.chunkLimit=5);if(t>2.5)return void(this.options.chunkLimit=10);this.options.chunkLimit=20}}},{key:"render",value:function(){this.chatBody=h["default"]({tagName:"div",className:"chat__body"}),this.chatBodyContainer=h["default"]({tagName:"div",className:"chat__body-container",childs:[this.chatBody]}),this.chatBodyScrollButton=h["default"]({tagName:"div",className:"chat__body-scroll"}),this.chatBodyScrollButton.addEventListener("click",this.scrollToggle),this.parentEl.appendChild(this.chatBodyContainer),this.parentEl.appendChild(this.chatBodyScrollButton)}},{key:"buildChunkElement",value:function(){return this._chunkElement?this._chunkElement.cloneNode():(this._chunkElement=h["default"]({tagName:"div",className:"chat__chunk"}),this._chunkElement.cloneNode(!0))}},{key:"buildLineElement",value:function(){if(this._lineElement)return this._lineElement.cloneNode(!0);var t=[],e=h["default"]({tagName:"div",className:"chat__avatar"});t.push(e);var n=h["default"]({tagName:"span",className:"chat__line-role"});t.push(n);var r=h["default"]({tagName:"span",className:"chat__username"});t.push(r);var s=h["default"]({tagName:"span",className:"chat__line-timestamp"});t.push(s);var i=h["default"]({tagName:"div",className:"chat__line-content"});t.push(i);var o=h["default"]({tagName:"button",className:"chat__action chat__action--delete",attributes:{"data-tooltip":"Delete Chat"}});t.push(o);var a=h["default"]({tagName:"button",className:"chat__action chat__action--more",attributes:{"data-tooltip":"More Actions"}});return t.push(a),this._lineElement=h["default"]({tagName:"div",className:"chat__line",childs:t}),this._lineElement.cloneNode(!0)}},{key:"writeLineElement",value:function(t,e){var n=t.childNodes;return t.setAttribute("data-username",e.actor.username),t.setAttribute("data-id",e.id),n[0].setAttribute("style","background-color: "+e.actor.color+"; background-image: url("+e.actor.avatar+");"),n[1].className="chat__line-role chat__line-role--"+e.actor.role,n[1].textContent=e.actor.role,n[2].setAttribute("style","color: "+e.actor.color),n[2].textContent=e.actor.username,n[3].textContent=this.formatDate(e.timestamp),n[4].innerHTML=this.createMessageText(e),t}},{key:"formatDate",value:function(t){var e=new Date(1e3*t),n="0"+e.getMinutes(),r=e.getHours();return r%=12,r=r?r:12,r+":"+n.substr(-2)}},{
key:"renderChat",value:function(t){this.chatProcessor(t)}},{key:"createMessageText",value:function(t){var e="<div class='chat__text'>",n=t.message,r=t.positions,s=0;for(var i in r){i=parseInt(i,10);var o=n.slice(s,i),a=n.slice(i,i+r[i].length);switch(s=i+r[i].length,o.length&&(e+=o),r[i].type){case"emoticon":e+="<span class='chat__line-emoticon-wrap' data-pattern='"+a+"'><img class='chat__line-emoticon' src='"+r[i].url+"'/></span>";break;case"mention":var u=this.chat._username===r[i].url?"chat__line-mention chat__line-mention--me":"chat__line-mention";e+="<a class='"+u+"' href='/"+r[i].url+"' target='_blank'>"+a+"</a>";break;case"tag":e+="<a class='chat__line-tag' href='/tag/"+r[i].text+"' target='_blank'>"+a+"</a>";break;default:e+="<a class='chat__line-link' href='"+r[i].href+"' target='_blank'>"+a+"</a>"}}return s<n.length&&(e+=n.slice(s)),e+="</div>"}},{key:"renderMessage",value:function(){}},{key:"scrollToggle",value:function(){return console.log(this.scrollPaused),this.scrollPaused?(this.scrollPaused=!1,void this.chatBodyScrollButton.classList.remove("chat__body-scroll--paused")):(this.scrollPaused=!0,void this.chatBodyScrollButton.classList.add("chat__body-scroll--paused"))}},{key:"scrollBottom",value:function(){this.chatBody.scrollTop=this.chatBody.scrollHeight}},{key:"removeChatsByUsername",value:function(t){for(var e=[],n=0;n<this._chatElements.length;n++)this._chatElements[n].getAttribute("data-username")===t&&(this._chatElements[n].parentElement.removeChild(this._chatElements[n]),e.push(n));for(var r=0;r<e.length;r++)this._chatElements.splice(e[r],1)}}]),t}();n["default"]=f},{"../utils/createElement.js":16,"../utils/debounce.js":17,"lodash.throttle":3,moment:4}],7:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("../utils/createElement.js"),a=r(o),u=function(){function t(e){s(this,t),this.parent=e,this.render()}return i(t,[{key:"render",value:function(){this.el=a["default"]({tagName:"div",className:"chat__controls"}),this.parent.appendChild(this.el)}}]),t}();n["default"]=u},{"../utils/createElement.js":16}],8:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("../utils/createElement.js"),a=r(o),u=t("../utils/isBlurred.js"),l=r(u),h=t("../utils/addEvent.js"),c=r(h),d=function(){function t(e,n,r,i){s(this,t),this.parent=e,this.chat=n,this.chatInput=r,this.options=i,this.toggleFlyout=this.toggleFlyout.bind(this),this.closeFlyoutOnBlur=this.closeFlyoutOnBlur.bind(this),this.render()}return i(t,[{key:"initUser",value:function(){this.getEmoticons()}},{key:"getEmoticons",value:function(){var t=this;this.chat.getAllEmoticons(this.chat._roomname,this.chat._username,function(e,n){e&&console.log(e),t.emoticons=n.emoticons,t.enableEmoticonButton(),t.renderEmoticonFlyout()})}},{key:"render",value:function(){this.tooltip=a["default"]({tagName:"span",className:"chat__tooltip",text:"Add Emoticon"}),this.el=a["default"]({tagName:"button",className:"chat__emoticon-button chat__emoticon-button--disabled",childs:[this.tooltip]}),this.parent.appendChild(this.el)}},{key:"enableEmoticonButton",value:function(){this.el.addEventListener("click",this.toggleFlyout),this.el.classList.remove("chat__emoticon-button--disabled")}},{key:"renderEmoticonFlyout",value:function(){var t=this;this.flyout=a["default"]({tagName:"div",className:"chat__emoticon-flyout"}),Object.keys(this.emoticons).map(function(e){var n=t.emoticons[e],r=a["default"]({tagName:"button",className:"chat__emoticon-selector",attributes:{style:"background-image: url("+n.source+")",title:n.pattern}}),s=a["default"]({tagName:"span",className:"chat__emoticon-selector-container",childs:[r]}),i=t.selectEmoticon.bind(t,n.pattern);return s.addEventListener("click",i),t.flyout.appendChild(s)}),this.parent.appendChild(this.flyout);var e=a["default"]({tagName:"a",className:"chat__attribution-link",text:"EmojiOne",attributes:{href:"http://emojione.com"}}),n=a["default"]({tagName:"div",className:"chat__attribution",text:"Emoji provided free by ",childs:[e]});this.flyout.appendChild(n)}},{key:"selectEmoticon",value:function(t){this.chatInput.chatInput.value=""+this.chatInput.chatInput.value+t+" ",this.chatInput.chatInput.focus(),this.flyout.classList.remove("chat__emoticon-flyout--visible")}},{key:"closeFlyoutOnBlur",value:function(t){l["default"](t,this.flyout,this.el)&&(this._blurEvent(),this._blurEvent=null,this.flyout.classList.remove("chat__emoticon-flyout--visible"))}},{key:"toggleFlyout",value:function(){this.flyout.classList.toggle("chat__emoticon-flyout--visible"),this._blurEvent||(this._blurEvent=c["default"](document,"click",this.closeFlyoutOnBlur))}}]),t}();n["default"]=d},{"../utils/addEvent.js":15,"../utils/createElement.js":16,"../utils/isBlurred.js":18}],9:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("../utils/createElement.js"),a=r(o),u=function(){function t(e,n){s(this,t),this.parent=e,this.options=n,this.render()}return i(t,[{key:"render",value:function(){this.chatHeaderTitle=a["default"]({tagName:"h1",className:"chat__header-title",text:""+this.options.room}),this.el=a["default"]({tagName:"div",className:"chat__header",childs:[this.chatHeaderTitle]}),this.parent.appendChild(this.el)}}]),t}();n["default"]=u},{"../utils/createElement.js":16}],10:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("../utils/createElement.js"),a=r(o),u=t("../utils/isBlurred.js"),l=r(u),h=t("../utils/addEvent.js"),c=r(h),d=function(){function t(e,n,r){s(this,t),this.parent=e,this.chat=n,this.options=r,this.toggleFlyout=this.toggleFlyout.bind(this),this.closeFlyoutOnBlur=this.closeFlyoutOnBlur.bind(this),this.render(),this.renderFlyout()}return i(t,[{key:"render",value:function(){this.tooltip=a["default"]({tagName:"span",className:"chat__tooltip",text:"Help"}),this.el=a["default"]({tagName:"button",className:"chat__help-button",childs:[this.tooltip],events:{click:this.toggleFlyout}}),this.parent.appendChild(this.el)}},{key:"renderFlyout",value:function(){this.flyout=a["default"]({tagName:"div",className:"chat__flyout"}),this.parent.parentElement.appendChild(this.flyout)}},{key:"closeFlyoutOnBlur",value:function(t){l["default"](t,this.flyout,this.el)&&(this._blurEvent(),this._blurEvent=null,this.flyout.classList.remove("chat__flyout--visible"))}},{key:"toggleFlyout",value:function(){this.flyout.classList.toggle("chat__flyout--visible"),this._blurEvent||(this._blurEvent=c["default"](document,"click",this.closeFlyoutOnBlur))}}]),t}();n["default"]=d},{"../utils/addEvent.js":15,"../utils/createElement.js":16,"../utils/isBlurred.js":18}],11:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("../utils/createElement.js"),a=r(o),u={chatLimit:250},l=function(){function t(e,n,r,i){s(this,t),this.parent=e,this.chat=n,this.chatBody=r,this.options=Object.assign({},u,i),this.render()}return i(t,[{key:"initUser",value:function(){this.chatInput.classList.remove("chat__input--disabled"),this.chatInput.removeAttribute("disabled"),this.chatInput.setAttribute("placeholder","Send message")}},{key:"render",value:function(){var t=this;this.chatInput=a["default"]({tagName:"input",className:"chat__input chat__input--disabled",attributes:{placeholder:"Login to chat.",disabled:"disabled"}}),this.chatInputWrapper=a["default"]({tagName:"div",className:"chat__input-wrapper",childs:[this.chatInput]}),this.chatInput.addEventListener("keyup",function(e){if(e.preventDefault(),13===e.keyCode){var n=e.target.value;if(null!==n.match(/^\s+$/))return void(e.target.value="");n&&(e.target.value="",t.chat.command(n,function(e,n){if(e)throw e;if(n&&n.length)for(var r=0;r<n.length;r++)t.chatBody.renderMessage(n[r])}))}}),this.parent.appendChild(this.chatInputWrapper)}}]),t}();n["default"]=l},{"../utils/createElement.js":16}],12:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("../utils/createElement.js"),a=r(o),u=t("../utils/isBlurred.js"),l=r(u),h=t("../utils/addEvent.js"),c=r(h),d=t("../utils/debounce.js"),f=r(d),m={tooltipText:"Configuration",headerText:"Settings",disableDefaultAvatars:!1,disableDefaultColors:!1},p=function(){function t(e,n,r,i){s(this,t),this.parent=e,this.chat=n,this.chatInput=r,this.options=Object.assign({},m,i),this.toggleOptionsFlyout=this.toggleOptionsFlyout.bind(this),this.colorHandler=f["default"](this.colorHandler.bind(this),250),this.closeFlyoutOnBlur=this.closeFlyoutOnBlur.bind(this),this.showGifsHandler=this.showGifsHandler.bind(this),this.showTimestampsHandler=this.showTimestampsHandler.bind(this),this.render(),this.renderFlyout()}return i(t,[{key:"initUser",value:function(){this.enableOptionsButton(),this.renderColors(),this.getDefaultAvatars(),this.renderOptions()}},{key:"enableOptionsButton",value:function(){this.el.classList.remove("chat__options-button--disabled"),c["default"](this.el,"click",this.toggleOptionsFlyout)}},{key:"getDefaultAvatars",value:function(){var t=this;this.chat.getDefaultAvatars(function(e,n){return e?void console.log(e):(t.defaultAvatars=n.avatars,void t.renderAvatars())})}},{key:"render",value:function(){this.tooltip=a["default"]({tagName:"span",className:"chat__tooltip",text:this.options.tooltipText}),this.el=a["default"]({tagName:"button",className:"chat__options-button chat__options-button--disabled",childs:[this.tooltip]}),this.parent.appendChild(this.el)}},{key:"renderFlyout",value:function(){this.flyout=a["default"]({tagName:"div",className:"chat__flyout"}),this.parent.parentElement.appendChild(this.flyout)}},{key:"renderOptions",value:function(){var t=a["default"]({tagName:"div",className:"chat__options-switch-slider"}),e=a["default"]({tagName:"div",className:"chat__options-switch-name",text:"Show Animated Gifs"}),n=a["default"]({tagName:"input",className:"chat__options-switch-checkbox",attributes:{type:"checkbox",id:"showGifs"},events:{change:this.showGifsHandler}});this.chat._me.showGifs&&(n.checked=!0);var r=a["default"]({tagName:"label",className:"chat__options-switch",childs:[t],attributes:{"for":"showGifs"}}),s=a["default"]({tagName:"div",className:"chat__options-switch-container",childs:[n,r,e]}),i=a["default"]({tagName:"div",className:"chat__options-switch-slider"}),o=a["default"]({tagName:"div",className:"chat__options-switch-name",text:"Show Timestamps"}),u=a["default"]({tagName:"input",className:"chat__options-switch-checkbox",attributes:{type:"checkbox",id:"showTimestamps"},events:{change:this.showTimestampsHandler}});this.chat._me.showTimestamps&&(u.checked=!0);var l=a["default"]({tagName:"label",className:"chat__options-switch",childs:[i],attributes:{"for":"showTimestamps"}}),h=a["default"]({tagName:"div",className:"chat__options-switch-container",childs:[u,l,o]});this.flyout.appendChild(h),this.flyout.appendChild(s)}},{key:"showGifsHandler",value:function(t){var e={};e.showGifs=t.target.checked,this.chat.patchUser(this.chat._username,e,function(t,e){return t?void console.log(t):void console.log(e)})}},{key:"showTimestampsHandler",value:function(t){var e={};e.showTimestamps=t.target.checked,this.chat.patchUser(this.chat._username,e,function(t,e){return t?void console.log(t):void console.log(e)})}},{key:"renderAvatars",value:function(){for(var t=0;t<this.defaultAvatars.length;t++){var e=this.defaultAvatars[t],n=e.link===this.chat._me.avatar,r=a["default"]({tagName:"div",className:"chat__default-avatar "+(n?"chat__default-avatar--selected":""),attributes:{style:"background-image: url("+e.link+"); background-color: "+(this.chat._me.color||"#E0BB47")},events:{click:this.setDefaultAvatar.bind(this,e)}}),s=a["default"]({tagName:"div",className:"chat__grid-col-1-5",childs:[r]});this.colorsContainer.appendChild(s)}}},{key:"renderColors",value:function(){var t=[],e=a["default"]({tagName:"input",className:"chat__color",attributes:{type:"color",value:this.chat._me.color},events:{change:this.colorHandler}}),n=a["default"]({tagName:"label",className:"chat__color-label",childs:[e]}),r=a["default"]({tagName:"div",className:"chat__grid-col-1-5",childs:[n]});t.push(r);for(var s=["#1abc9c","#3498db","#9b59b6","#e67e22"],i=0;i<s.length;i++){var o=a["default"]({tagName:"div",className:"chat__default-color",attributes:{style:"background-color: "+s[i]},events:{click:this.setDefaultColor.bind(this,s[i])}}),u=a["default"]({tagName:"div",className:"chat__grid-col-1-5",childs:[o]});t.push(u)}this.colorsContainer=a["default"]({tagName:"div",className:"chat__colors-container chat__grid",childs:t}),this.flyout.appendChild(this.colorsContainer)}},{key:"setDefaultAvatar",value:function(t){this.chat.setDefaultUserAvatar(this.chat._username,t.id,function(e){if(e)return void console.log(e);for(var n=document.querySelectorAll(".chat__default-avatar"),r=0;r<n.length;r++){var s=n[r].style.backgroundImage.slice(5,-2);s===t.link?n[r].classList.add("chat__default-avatar--selected"):n[r].classList.remove("chat__default-avatar--selected")}})}},{key:"setDefaultColor",value:function(t){var e={color:t};this.chat.patchUser(this.chat._username,e,function(e){if(e)return void console.log(e);for(var n=document.querySelectorAll(".chat__default-avatar"),r=0;r<n.length;r++)n[r].style.backgroundColor=t})}},{key:"colorHandler",value:function(t){var e={color:t.target.value};this.chat.patchUser(this.chat._username,e,function(e){if(e)return void console.log(e);for(var n=document.querySelectorAll(".chat__default-avatar"),r=0;r<n.length;r++)n[r].style.backgroundColor=t.target.value})}},{key:"closeFlyoutOnBlur",value:function(t){l["default"](t,this.flyout,this.el)&&(this._blurEvent(),this._blurEvent=null,this.flyout.classList.remove("chat__flyout--visible"))}},{key:"toggleOptionsFlyout",value:function(){this.flyout.classList.toggle("chat__flyout--visible"),this._blurEvent||(this._blurEvent=c["default"](document,"click",this.closeFlyoutOnBlur))}}]),t}();n["default"]=p},{"../utils/addEvent.js":15,"../utils/createElement.js":16,"../utils/debounce.js":17,"../utils/isBlurred.js":18}],13:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("../utils/createElement.js"),u=r(a),l=t("../utils/isBlurred.js"),h=r(l),c=t("../utils/addEvent.js"),d=r(c),f={tooltipText:"Users List",rosterOptions:{limit:100,role:""}},m=function(){function t(e,n,r,o){s(this,t),this.parent=e,this.chat=n,this.chatBody=r,this.options=i({},f,o),this.toggleRosterFlyout=this.toggleRosterFlyout.bind(this),this.closeFlyoutOnBlur=this.closeFlyoutOnBlur.bind(this),this.updateRoster=this.updateRoster.bind(this),this.cleanUpdateRoster=this.cleanUpdateRoster.bind(this),this.handleRadioChange=this.handleRadioChange.bind(this),this.loadMoreHandler=this.loadMoreHandler.bind(this),this.render()}return o(t,[{key:"initUser",value:function(){this.renderFlyout(),this.roster=this.chat.getRoster(this.options.rosterOptions),this.enableRosterButton()}},{key:"enableRosterButton",value:function(){this.el.classList.remove("chat__roster-button--disabled"),d["default"](this.el,"click",this.toggleOptionsFlyout)}},{key:"render",value:function(){this.tooltip=u["default"]({tagName:"span",className:"chat__tooltip",text:this.options.tooltipText}),this.el=u["default"]({tagName:"button",className:"chat__roster-button chat__roster-button--disabled",childs:[this.tooltip],events:{click:this.toggleRosterFlyout}}),this.parent.appendChild(this.el)}},{key:"renderFlyout",value:function(){this.rosterRadioUser=u["default"]({tagName:"input",className:"chat__radio",attributes:{type:"radio",name:"rosterSort",value:"",checked:"checked",id:"rosterSortUser"},events:{change:this.handleRadioChange}}),this.rosterRadioModerator=u["default"]({tagName:"input",className:"chat__radio",attributes:{type:"radio",name:"rosterSort",value:"moderator",id:"rosterSortModerator"},events:{change:this.handleRadioChange}}),this.rosterRadioUserLabel=u["default"]({tagName:"label",className:"chat__radio-label",text:"Everyone",attributes:{"for":"rosterSortUser"}}),this.rosterRadioModeratorLabel=u["default"]({tagName:"label",className:"chat__radio-label",text:"Moderators",attributes:{"for":"rosterSortModerator"}}),this.rosterRadioSlider=u["default"]({tagName:"div",className:"chat__radio-slider"}),this.rosterRadioWrapper=u["default"]({tagName:"div",className:"chat__radio-wrapper",childs:[this.rosterRadioUser,this.rosterRadioModerator,this.rosterRadioUserLabel,this.rosterRadioModeratorLabel,this.rosterRadioSlider]}),this.rosterRadioContainer=u["default"]({tagName:"div",className:"chat__radio-container chat__radio-container--sort",childs:[this.rosterRadioWrapper]}),this.rosterLoadMore=u["default"]({tagName:"button",className:"chat__roster-load-more",text:"Load More",events:{click:this.loadMoreHandler}}),this.rosterContainer=u["default"]({tagName:"div",className:"chat__roster-container"}),this.rosterScrollContainer=u["default"]({tagName:"div",className:"chat__roster-scroll",childs:[this.rosterContainer,this.rosterLoadMore]}),this.flyout=u["default"]({tagName:"div",className:"chat__flyout chat__flyout--full",childs:[this.rosterRadioContainer,this.rosterScrollContainer]}),this.parent.parentElement.appendChild(this.flyout)}},{key:"handleRadioChange",value:function(t){var e=this.options.rosterOptions;e.role=t.target.value,this.roster._options=e,this.roster.update(this.cleanUpdateRoster)}},{key:"loadMoreHandler",value:function(){this.roster.next(this.updateRoster)}},{key:"cleanUpdateRoster",value:function(t,e){for(;this.rosterContainer.firstChild;)this.rosterContainer.removeChild(this.rosterContainer.firstChild);this.updateRoster(t,e)}},{key:"updateRoster",value:function(t,e){if(t)return void console.log("ERR:"+t);for(var n=0;n<e.length;n++){var r=[];if("user"!==e[n].role){var s=u["default"]({tagName:"span",className:"chat__roster-role",text:e[n].role,attributes:{style:"background:"+e[n].roleColor}});r.push(s)}var i=u["default"]({tagName:"span",className:"chat__roster-actor",text:e[n].username});if(r.push(i),e[n].username!==this.chat._username){var o=u["default"]({tagName:"div",className:"chat__tooltip chat__tooltip--action",text:"Mute User"}),a=u["default"]({tagName:"button",className:"chat__action chat__action--mute",childs:[o],events:{click:this.chatBody.muteActionHandler.bind(this,e[n].username)}}),l=u["default"]({tagName:"div",className:"chat__tooltip chat__tooltip--action",text:"Ignore User"}),h=u["default"]({tagName:"button",className:"chat__action chat__action--ignore",childs:[l],events:{click:this.chatBody.ignoreActionHandler.bind(this,e[n].username)}}),c=u["default"]({tagName:"div",className:"chat__tooltip chat__tooltip--action",text:"IP Ban User"}),d=u["default"]({tagName:"button",className:"chat__action chat__action--ban",childs:[c],events:{click:this.chatBody.banActionHandler.bind(this,e[n].username)}}),f=u["default"]({tagName:"div",className:"chat__roster-actions",childs:[d,a,h]});r.push(f)}var m=u["default"]({tagName:"div",className:"chat__roster-actor-container",childs:r});this.rosterContainer.appendChild(m)}return this.roster._nextParams?void this.rosterLoadMore.classList.remove("chat__roster-load-more--disable"):void this.rosterLoadMore.classList.add("chat__roster-load-more--disable")}},{key:"closeFlyoutOnBlur",value:function(t){h["default"](t,this.flyout,this.el)&&(this._blurEvent(),this._blurEvent=null,this.flyout.classList.remove("chat__flyout--visible"))}},{key:"toggleRosterFlyout",value:function(){this.roster.update(this.cleanUpdateRoster),this.flyout.classList.toggle("chat__flyout--visible"),this._blurEvent||(this._blurEvent=d["default"](document,"click",this.closeFlyoutOnBlur))}}]),t}();n["default"]=m},{"../utils/addEvent.js":15,"../utils/createElement.js":16,"../utils/isBlurred.js":18}],14:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("@livelyvideo/chat-core"),l=r(u);t("classlist-polyfill");var h=t("./components/chat-body.js"),c=r(h),d=t("./components/chat-emoticons.js"),f=r(d),m=t("./components/chat-input.js"),p=r(m),_=t("./components/chat-options.js"),v=r(_),y=t("./components/chat-header.js"),g=r(y),b=t("./components/chat-roster.js"),w=r(b),k=t("./components/chat-admin.js"),E=r(k),x=t("./components/chat-help.js"),O=r(x),S=t("./components/chat-controls.js"),T=r(S),M={INVALID_EL:"invalid-element"},R={user:null,room:null,apiHost:null,websocketHost:null,authUrl:null},D=function(){function t(e,n){var r=this;s(this,t),this.options=o({},R,n);var i=this.options.user?{url:this.options.authUrl+"?username="+this.options.user}:null;this.chat=new l["default"]({room:this.options.room,apiHost:this.options.apiHost,websocketHost:this.options.websocketHost},i),this.chat._username=this.options.user,this.chat._roomname=this.options.room,this.chat.on("error",function(t){console.error(t)}),this.chat.once("me",function(t){if(r.history)for(var e=0;e<r.history.messages.length;e++)r.chatBody.renderChat(r.history.messages[e]);return t?(t.showTimestamps?r.el.classList.add("chat--timestamps"):r.el.classList.remove("chat--timestamps"),r.roleHandler(t),void r.renderAuthedUser(t)):void r.roleHandler({room:{role:"anon"}})}),this.history=null,this.chat.once("history",function(t){r.history=t}),this.mount(e),this.render()}return a(t,[{key:"mount",value:function(t){switch("undefined"==typeof t?"undefined":i(t)){case"string":this.el=document.querySelector(t);break;case"object":this.el=t;break;default:console.log(M.INVALID_EL)}this.el.classList.add("chat")}},{key:"render",value:function(){var t=this;this.chatHeader=new g["default"](this.el,this.options),this.chatBody=new c["default"](this.el,this.chat),this.chatControls=new T["default"](this.el),this.chatAdmin=new E["default"](this.chatControls.el,this.chat,this.chatBody),this.chatRoster=new w["default"](this.chatControls.el,this.chat,this.chatBody),this.chatHelp=new O["default"](this.chatControls.el,this.chat),this.chatOptions=new v["default"](this.chatControls.el,this.chat),this.chatInput=new p["default"](this.el,this.chat,this.chatBody),this.chatEmoticons=new f["default"](this.el,this.chat,this.chatInput),this.chat.on("chat",function(e){t.chatBody.renderChat(e)}),this.chat.once("room",function(){t.chatAdmin.init()}),this.chat.on("message",function(e){t.chatBody.renderMessage(e)}),this.chat.on("delete",function(e){t.chat.emit("delete "+e.id)})}},{key:"renderAuthedUser",value:function(t){var e=this;this.chatOptions.initUser(),this.chatEmoticons.initUser(),this.chatInput.initUser(),this.chatRoster.initUser(),this._currentRole=t.room.role,this.chat.on("me",function(t){t.showTimestamps?e.el.classList.add("chat--timestamps"):e.el.classList.remove("chat--timestamps"),e.roleHandler(t)})}},{key:"roleHandler",value:function(t){if(this._currentRole&&this._currentRole!==t.room.role){var e={};switch(e.level="info",this._currentRole){case"user":e.message="you have been modded";break;default:e.message="you have been unmodded"}this.chatBody.renderMessage(e)}this.el.classList.add("chat--"+t.room.role),this._currentRole!==t.room.role&&this.el.classList.remove("chat--"+this._currentRole),this._currentRole=t.room.role}},{key:"destroy",value:function(){for(this.chat.destroy(),this.el.className="chat";this.el.firstChild;)this.el.removeChild(this.el.firstChild)}}]),t}();n["default"]=D},{"./components/chat-admin.js":5,"./components/chat-body.js":6,"./components/chat-controls.js":7,"./components/chat-emoticons.js":8,"./components/chat-header.js":9,"./components/chat-help.js":10,"./components/chat-input.js":11,"./components/chat-options.js":12,"./components/chat-roster.js":13,"@livelyvideo/chat-core":1,"classlist-polyfill":2}],15:[function(t,e,n){"use strict";function r(t,e,n){if(t.addEventListener){t.addEventListener(e,n);var r=function(){t.removeEventListener(e,n)};return r}t.attachEvent("on"+e,function(){n.call(t)});var s=function(){t.detachEvent("on"+e,function(){n.call(t)})};return s}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}],16:[function(t,e,n){"use strict";function r(t){var e=void 0,n=void 0,s=void 0;if(t.tagName){if(e=document.createElement(t.tagName),t.className&&(e.className=t.className),t.attributes)for(n in t.attributes)e.setAttribute(n,t.attributes[n]);void 0!==t.html&&(e.innerHTML=t.html)}else e=document.createDocumentFragment();if(t.text&&e.appendChild(document.createTextNode(t.text)),void 0===window.HTMLElement&&(window.HTMLElement=Element),t.childs&&t.childs.length)for(s=0;s<t.childs.length;s++)e.appendChild(t.childs[s]instanceof window.HTMLElement?t.childs[s]:r(t.childs[s]));if(t.events)for(var i in t.events)e.addEventListener(i,t.events[i]);return e}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}],17:[function(t,e,n){"use strict";function r(t,e,n){var r=void 0;return function(){for(var s=arguments.length,i=Array(s),o=0;s>o;o++)i[o]=arguments[o];var a=this,u=function(){r=null,n||t.apply(a,i)},l=n&&!r;clearTimeout(r),r=setTimeout(u,e||200),l&&t.apply(a,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}],18:[function(t,e,n){"use strict";function r(t,e,n){for(var r=t.target;r&&r!==document.body;){if(r===e||r===n)return!1;r=r.parentNode}return!0}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{}]},{},[14])(14)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},[1]);
